webpackJsonp([0],{"+5nH":function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva"),o=n("LHV8"),s=o.render,u=o.bound,l=n("J731"),c=a.Dependencies,f=n("6gf1"),h=n("XVii"),d=n("Lp/H");function p(e,t,n){this._el=null,this._model=null,this._width=this.__width=t||500,this._height=this.__height=n||300,this._bgcolor=null,this._cursor=!0,this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._viewport=null,this._renderer=null,this._handler=null,this._streamer=null,this._skipSignals=!1,this._changeset=null,this._repaint=!0,this._renderers=s,this._io=null,this._api={}}var g=p.prototype;function m(e){var t=this,n=this._model.data(e);if(!n)return l.error('Data source "'+e+'" is not defined.');var r=n.pipeline()[0],a=this._streamer,o={};return this._api[e]?this._api[e]:(o.insert=function(s){return n.insert(i.duplicate(s)),a.addListener(r),t._changeset.data[e]=1,o},o.update=function(){return a.addListener(r),t._changeset.data[e]=1,n.update.apply(n,arguments),o},o.remove=function(){return a.addListener(r),t._changeset.data[e]=1,n.remove.apply(n,arguments),o},o.values=function(){return n.values()},this._api[e]=o)}g.model=function(e){return arguments.length?(this._model!==e&&(this._model=e,this._streamer=new a.Node(e),this._streamer._rank=-1,this._changeset=a.ChangeSet.create(),this._handler&&this._handler.model(e)),this):this._model},g.data=function(e){var t=this;return arguments.length?i.isString(e)?m.call(t,e):(i.isObject(e)&&i.keys(e).forEach(function(n){var r=m.call(t,n);e[n](r)}),this):t._model.values()};var v=i.toMap(["width","height","padding"]);function y(e,t){var n=this._changeset,r=this._model.signal(e);if(!r)return l.error('Signal "'+e+'" is not defined.');this._streamer.addListener(r.value(t)),n.signals[e]=1,n.reflow=!0}g.signal=function(e,t,n){var r,a,o=this._model;if(!arguments.length)return o.values(c.SIGNALS);if(1===arguments.length&&i.isString(e))return o.values(c.SIGNALS,e);i.isObject(e)?(a=e,n=t):(a={})[e]=t;for(r in a)v[r]?this[r](a[r]):y.call(this,r,a[r]);return this._skipSignals=n,this},g.width=function(e){return arguments.length?(this.__width!==e&&(this._width=this.__width=e,this.model().width(e),this.initialize(),this._strict&&(this._autopad=1),y.call(this,"width",e)),this):this.__width},g.height=function(e){return arguments.length?(this.__height!==e&&(this._height=this.__height=e,this.model().height(e),this.initialize(),this._strict&&(this._autopad=1),y.call(this,"height",e)),this):this.__height},g.background=function(e){return arguments.length?(this._bgcolor!==e&&(this._bgcolor=e,this.initialize()),this):this._bgcolor},g.padding=function(e){return arguments.length?(this._padding!==e&&(i.isString(e)?(this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._strict="strict"===e):(this._autopad=0,this._padding=e,this._strict=!1),this._renderer&&this._renderer.resize(this._width,this._height,this._padding),this._handler&&this._handler.padding(this._padding),y.call(this,"padding",this._padding)),this._repaint=!0,this):this._padding},g.autopad=function(e){if(this._autopad<1)return this;this._autopad=0;var t=function(){var e,t,n=this.model().scene(),r=n.items[0].legendItems,i=0,a=r.length;if(this._strict){for(e=u.mark(n,null,!1);i<a;++i)t=r[i].bounds,e.add(t.x1,0).add(t.x2,0);return e}return n.bounds}.call(this),n=this._padding,r=this.model().config().autopadInset,i=t.x1<0?Math.ceil(-t.x1)+r:0,a=t.y1<0?Math.ceil(-t.y1)+r:0,o=t.x2>this._width?Math.ceil(+t.x2-this._width)+r:0;return n={left:i,top:a,right:o,bottom:t=t.y2>this._height?Math.ceil(+t.y2-this._height)+r:0},this._strict?(this._autopad=0,this._padding=n,this._width=Math.max(0,this.__width-(i+o)),this._height=Math.max(0,this.__height-(a+t)),this._model.width(this._width).height(this._height).reset(),y.call(this,"width",this._width),y.call(this,"height",this._height),y.call(this,"padding",n),this.initialize().update({props:"enter"}).update({props:"update"})):this.padding(n).update(e),this},g.viewport=function(e){return arguments.length?(this._viewport!==e&&(this._viewport=e,this.initialize()),this):this._viewport},g.renderer=function(e){if(!arguments.length)return this._renderer;if(this._renderers[e])e=this._renderers[e];else{if(i.isString(e))throw new Error("Unknown renderer: "+e);if(!e)throw new Error("No renderer specified")}return this._io!==e&&(this._io=e,this._renderer=null,this.initialize(),this._build&&this.render()),this},g.initialize=function(e){var t,n=this,i=n._width,a=n._height,o=n._padding,u=n._bgcolor,l=this.model().config();return arguments.length&&null!==e||(e=this._el?this._el.parentNode:null)?(r.select(e).select("div.vega").remove(),this._el=e=r.select(e).append("div").attr("class","vega").style("position","relative").node(),n._viewport&&r.select(e).style("width",(n._viewport[0]||i)+"px").style("height",(n._viewport[1]||a)+"px").style("overflow","auto"),s.canvas.Renderer.RETINA=l.render.retina,n._renderer=(n._renderer||new this._io.Renderer(l.load)).initialize(e,i,a,o).background(u),t=n._handler,n._handler=(new this._io.Handler).initialize(e,o,n),t?t.handlers().forEach(function(e){n._handler.on(e.type,e.handler)}):n._detach=f(this),this._repaint=!0,this):this},g.destroy=function(){this._detach&&this._detach()},g.update=function(e){e=e||{};var t=this._model,n=this._streamer,r=this._changeset,o=e.duration?new d(e.duration,e.ease):null;if(o&&(r.trans=o),void 0!==e.props){if(i.keys(r.data).length>0)throw Error("New data values are not reflected in the visualization. Please call view.update() before updating a specified property set.");r.reflow=!0,r.request=e.props}var s=this._build;return this._build=this._build||function(){var e=this;return e._renderNode=new a.Node(e._model).router(!0),e._renderNode.evaluate=function(t){l.debug(t,["rendering"]);var n=e._model.scene(),r=e._handler;return r&&r.scene&&r.scene(n),t.trans?t.trans.start(function(t){e._renderer.render(n,t)}):e._repaint?e._renderer.render(n):t.dirty.length&&e._renderer.render(n,t.dirty),t.dirty.length&&(t.dirty.forEach(function(e){e._dirty=!1}),n.items[0]._dirty=!1),e._repaint=e._skipSignals=!1,t},e._model.scene(e._renderNode),!0}.call(this),e.items&&s?(h.update(t,e.trans,e.props,e.items,r.dirty),this._renderNode.evaluate(r)):n.listeners().length&&s?(this._repaint&&n.addListener(t.node()),t.propagate(r,n,null,this._skipSignals),n.disconnect()):t.fire(r),this._changeset=a.ChangeSet.create(),this.autopad(e)},g.toImageURL=function(e){var t;switch(e||"png"){case"canvas":case"png":t=s.canvas.Renderer;break;case"svg":t=s.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+e)}var n=s.canvas.Renderer.RETINA;s.canvas.Renderer.RETINA=!1;var r=new t(this._model.config.load).initialize(null,this._width,this._height,this._padding).background(this._bgcolor).render(this._model.scene());if(s.canvas.Renderer.RETINA=n,"svg"===e){var i=new Blob([r.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(i)}return r.canvas().toDataURL("image/png")},g.render=function(e){return this._renderer.render(this._model.scene(),e),this},g.on=function(){return this._handler.on.apply(this._handler,arguments),this},g.onSignal=function(e,t){var n=this._model.signal(e);return n?n.on(t):l.error('Signal "'+e+'" is not defined.'),this},g.off=function(){return this._handler.off.apply(this._handler,arguments),this},g.offSignal=function(e,t){var n=this._model.signal(e);return n?n.off(t):l.error('Signal "'+e+'" is not defined.'),this},p.factory=function(e){var t=n("oCPx");return function(n){n=n||{};var a=e.defs(),o=(n.el?new p:new t).model(e).renderer(n.renderer||"canvas").width(a.width).height(a.height).background(a.background).padding(a.padding).viewport(a.viewport).initialize(n.el);return n.data&&o.data(n.data),n.el&&(!1!==n.hover&&o.on("mouseover",function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"hover",items:t})}).on("mouseout",function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"update",items:t})}),!1!==n.cursor&&o.onSignal("cursor",function(e,t){var n=r.select("body");i.isString(t)?(o._cursor="default"===t,n.style("cursor",t)):i.isObject(t)&&o._cursor&&n.style("cursor",t.default)})),o}},e.exports=p},"/2vj":function(e,t,n){var r=n("zF6n"),i=n("uHQN"),a="__dl_rem__";function o(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}var s=o.prototype;s.add=function(e){this._add.push(e)},s.rem=function(e){this._rem.push(e)},s.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,o,s=this._add,u=this._rem,l=this._key,c=Array(s.length-u.length);if(r.isObject(u[0]))if(l)for(o=r.toMap(u,l),e=0,t=0,n=s.length;e<n;++e)o.hasOwnProperty(l(s[e]))||(c[t++]=s[e]);else{for(e=0,n=u.length;e<n;++e)u[e][a]=1;for(e=0,t=0,n=s.length;e<n;++e)s[e][a]||(c[t++]=s[e]);for(e=0,n=u.length;e<n;++e)delete u[e][a]}else for(o=i.count.map(u),e=0,t=0,n=s.length;e<n;++e)o[s[e]]>0?o[s[e]]-=1:c[t++]=s[e];return this._rem=[],this._add=c},s.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=i.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},s.argmin=function(e){return this.extent(e)[0]},s.argmax=function(e){return this.extent(e)[1]},s.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):1/0},s.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-1/0},s.quartile=function(e){return this._get===e&&this._q||(this._q=i.quartile(this.values(),e),this._get=e),this._q},s.q1=function(e){return this.quartile(e)[0]},s.q2=function(e){return this.quartile(e)[1]},s.q3=function(e){return this.quartile(e)[2]},e.exports=o},"/7Ur":function(e,t,n){"use strict";var r=n("h/tW"),i=n("z5TJ"),a=n("WJ2w"),o=n("QSMf"),s=n("j8cM");function u(e){return o.map(e,function(e,n){return n+t.ASSIGN+c(e)}).join(t.DELIM)}function l(e){return e.split(t.DELIM).reduce(function(e,n){var r=n.split(t.ASSIGN),i=r[0].trim(),a=r[1];return e[i]=f(a),e},{})}function c(e){return(e.aggregate?e.aggregate+t.FUNC:"")+(e.timeUnit?e.timeUnit+t.FUNC:"")+(e.bin?"bin"+t.FUNC:"")+(e.field||"")+t.TYPE+a.SHORT_TYPE[e.type]}function f(e){for(var n=e.split(t.TYPE),o={field:n[0].trim(),type:a.TYPE_FROM_SHORT_TYPE[n[1].trim()]},s=0;s<r.AGGREGATE_OPS.length;s++){var u=r.AGGREGATE_OPS[s];if(0===o.field.indexOf(u+"_")){o.field=o.field.substr(u.toString().length+1),u===r.AggregateOp.COUNT&&0===o.field.length&&(o.field="*"),o.aggregate=u;break}}for(s=0;s<i.TIMEUNITS.length;s++){var l=i.TIMEUNITS[s];if(o.field&&0===o.field.indexOf(l+"_")){o.field=o.field.substr(o.field.length+1),o.timeUnit=l;break}}return o.field&&0===o.field.indexOf("bin_")&&(o.field=o.field.substr(4),o.bin=!0),o}t.DELIM="|",t.ASSIGN="=",t.TYPE=",",t.FUNC="_",t.shorten=function(e){return"mark"+t.ASSIGN+e.mark+t.DELIM+u(e.encoding)},t.parse=function(e,n,r){var i=e.split(t.DELIM),a=i.shift().split(t.ASSIGN)[1].trim(),o=l(i.join(t.DELIM)),u={mark:s.Mark[a],encoding:o};return void 0!==n&&(u.data=n),void 0!==r&&(u.config=r),u},t.shortenEncoding=u,t.parseEncoding=l,t.shortenFieldDef=c,t.shortenFieldDefs=function(e,n){return void 0===n&&(n=t.DELIM),e.map(c).join(n)},t.parseFieldDef=f},"/MHv":function(e,t){var n={},r={},i=[].join;e.exports={segments:function(e,t,r,a,o,s,u,l,c){var f=i.call(arguments);if(n[f])return n[f];var h=u*(Math.PI/180),d=Math.sin(h),p=Math.cos(h),g=p*(l-e)*.5+d*(c-t)*.5,m=p*(c-t)*.5-d*(l-e)*.5,v=g*g/((r=Math.abs(r))*r)+m*m/((a=Math.abs(a))*a);v>1&&(r*=v=Math.sqrt(v),a*=v);var y=p/r,_=d/r,x=-d/a,b=p/a,M=y*l+_*c,k=x*l+b*c,S=y*e+_*t,E=x*e+b*t,A=1/((S-M)*(S-M)+(E-k)*(E-k))-.25;A<0&&(A=0);var w=Math.sqrt(A);s==o&&(w=-w);var T=.5*(M+S)-w*(E-k),O=.5*(k+E)+w*(S-M),N=Math.atan2(k-O,M-T),L=Math.atan2(E-O,S-T)-N;L<0&&1===s?L+=2*Math.PI:L>0&&0===s&&(L-=2*Math.PI);for(var C=Math.ceil(Math.abs(L/(.5*Math.PI+.001))),R=[],I=0;I<C;++I){var D=N+I*L/C,U=N+(I+1)*L/C;R[I]=[T,O,D,U,r,a,d,p]}return n[f]=R},bezier:function(e){var t=i.call(e);if(r[t])return r[t];var n=e[0],a=e[1],o=e[2],s=e[3],u=e[4],l=e[5],c=e[6],f=e[7],h=f*u,d=-c*l,p=c*u,g=f*l,m=Math.cos(o),v=Math.sin(o),y=Math.cos(s),_=Math.sin(s),x=.5*(s-o),b=Math.sin(.5*x),M=8/3*b*b/Math.sin(x),k=n+m-M*v,S=a+v+M*m,E=n+y,A=a+_,w=E+M*_,T=A-M*y;return r[t]=[h*k+d*S,p*k+g*S,h*w+d*T,p*w+g*T,h*E+d*A,p*E+g*A]},cache:{segments:n,bezier:r}}},"/lc5":function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("4JPs");function o(e){a.prototype.init.call(this,e),a.addParameters(this,{by:{type:"array<field>"}}),this.router(!0)}var s=o.prototype=Object.create(a.prototype);s.constructor=o,s.transform=function(e){return i.debug(e,["sorting"]),(e.add.length||e.mod.length||e.rem.length)&&(e.sort=r.comparator(this.param("by").field)),e},e.exports=o,o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Sort transform",description:"Sorts the values of a data set.",type:"object",properties:{type:{enum:["sort"]},by:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"A list of fields to use as sort criteria."}},required:["type","by"]}},"0ZZw":function(e,t,n){"use strict";var r=n("P/aK"),i=n("QSMf"),a=n("o+e1"),o=n("j8cM"),s=n("Fw/k"),u=n("ZAUf"),l=n("k2D6"),c=n("SIx5"),f=n("MtYt"),h=n("HES2"),d=n("rKP5"),p=n("8lgt"),g=n("G+HP"),m=n("XL1Y"),v={area:l.area,bar:c.bar,line:h.line,point:d.point,text:g.text,tick:m.tick,rule:p.rule,circle:d.circle,square:d.square};function y(e){if(e.has(r.ORDER)){var t=e.encoding().order;return t instanceof Array?t.map(f.sortField):f.sortField(t)}return null}function _(e,t){var n,o,l,c,f,h=(o=(n=e).encoding(),r.STACK_GROUP_CHANNELS.reduce(function(e,t){var r=o[t];if(i.has(o,t))if(u.isArray(r))r.forEach(function(t){e.push(a.field(t))});else{var l=r,c=n.scale(t);e.push(a.field(l,{binSuffix:c&&c.type===s.ScaleType.ORDINAL?"_range":"_start"}))}return e},[]));return t?[(l=e,c=h,f=l.stack(),{type:"impute",field:l.field(f.fieldChannel),groupby:c,orderby:[l.field(f.groupbyChannel,{binSuffix:"_mid"})],method:"value",value:0}),x(e,h)]:[x(e,h)]}function x(e,t){var n=e.stack(),i=e.encoding(),a=e.has(r.ORDER)?(u.isArray(i[r.ORDER])?i[r.ORDER]:[i[r.ORDER]]).map(f.sortField):t.map(function(e){return"-"+e}),o=e.field(n.fieldChannel),s={type:"stack",groupby:[e.field(n.groupbyChannel,{binSuffix:"_mid"})],field:e.field(n.fieldChannel),sortby:a,output:{start:o+"_start",end:o+"_end"}};return n.offset&&(s.offset=n.offset),s}t.parseMark=function(e){return u.contains([o.LINE,o.AREA],e.mark())?function(e){var t,n=e.mark(),i=e.parent()&&e.parent().isFacet(),a={data:e.dataTable()},s=(t=e,[r.COLOR,r.DETAIL,r.OPACITY,r.SHAPE].reduce(function(e,n){return t.has(n)&&!t.fieldDef(n).aggregate&&e.push(t.field(n)),e},[])),l=[{name:e.name("marks"),type:v[n].markType(),from:u.extend(i||s.length>0?{}:a,{transform:[{type:"sort",by:function(e){if(e.mark()===o.LINE&&e.has(r.PATH)){var t=e.encoding().path;return t instanceof Array?t.map(f.sortField):f.sortField(t)}return"-"+e.field("horizontal"===e.config().mark.orient?r.Y:r.X,{binSuffix:"_mid"})}(e)}]}),properties:{update:v[n].properties(e)}}];if(s.length>0){var c={type:"facet",groupby:s},h=n===o.AREA&&e.stack()?_(e,!0).concat(c):[].concat(c,e.has(r.ORDER)?[{type:"sort",by:y(e)}]:[]);return[{name:e.name("pathgroup"),type:"group",from:u.extend(i?{}:a,{transform:h}),properties:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:l}]}return l}(e):function(e){var t=e.mark(),n=e.parent()&&e.parent().isFacet(),i={data:e.dataTable()},a=[];if(t===o.TEXT&&e.has(r.COLOR)&&e.config().mark.applyColorToBackground&&!e.has(r.X)&&!e.has(r.Y)&&a.push(u.extend({name:e.name("background"),type:"rect"},n?{}:{from:i},{properties:{update:g.text.background(e)}})),a.push(u.extend({name:e.name("marks"),type:v[t].markType()},!n||e.stack()||e.has(r.ORDER)?{from:u.extend(n?{}:i,e.stack()?{transform:_(e,!1)}:e.has(r.ORDER)?{transform:[{type:"sort",by:y(e)}]}:{})}:{},{properties:{update:v[t].properties(e)}})),e.has(r.LABEL)&&v[t].labels){var s=v[t].labels(e);void 0!==s&&a.push(u.extend({name:e.name("label"),type:"text"},n?{}:{from:i},{properties:{update:s}}))}return a}(e)}},"1/F5":function(e,t,n){(function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return(e=t(Math.abs(e)))?e[1]:NaN}var r;function i(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}var a={"":function(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,i=1,a=-1;i<r;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return i(100*e,t)},r:i,s:function(e,n){var i=t(e,n);if(!i)return e+"";var a=i[0],o=i[1],s=o-(r=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,u=a.length;return s===u?a:s>u?a+new Array(s-u+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+t(e,Math.max(0,n+s-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},o=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function s(e){return new u(e)}function u(e){if(!(t=o.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",s=t[4]||"",u=!!t[5],l=t[6]&&+t[6],c=!!t[7],f=t[8]&&+t[8].slice(1),h=t[9]||"";"n"===h?(c=!0,h="g"):a[h]||(h=""),(u||"0"===n&&"="===r)&&(u=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=u,this.width=l,this.comma=c,this.precision=f,this.type=h}u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var l=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function c(e){return e}function f(e){var t,i,o=e.grouping&&e.thousands?(t=e.grouping,i=e.thousands,function(e,n){for(var r=e.length,a=[],o=0,s=t[0],u=0;r>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),a.push(e.substring(r-=s,r+s)),!((u+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(i)}):c,u=e.currency,f=e.decimal;function h(e){var t=(e=s(e)).fill,n=e.align,i=e.sign,c=e.symbol,h=e.zero,d=e.width,p=e.comma,g=e.precision,m=e.type,v="$"===c?u[0]:"#"===c&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===c?u[1]:/[%p]/.test(m)?"%":"",_=a[m],x=!m||/[defgprs%]/.test(m);return g=null==g?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),function(e){var a=v,s=y;if("c"===m)s=_(e)+s,e="";else{var u=((e=+e)<0||1/e<0)&&(e*=-1,!0);if(e=_(e,g),u){var c=-1,b=e.length;for(u=!1;++c<b;)if(48<(M=e.charCodeAt(c))&&M<58||"x"===m&&96<M&&M<103||"X"===m&&64<M&&M<71){u=!0;break}}if(a=(u?"("===i?i:"-":"-"===i||"("===i?"":i)+a,s=s+("s"===m?l[8+r/3]:"")+(u&&"("===i?")":""),x){var M;for(c=-1,b=e.length;++c<b;)if(48>(M=e.charCodeAt(c))||M>57){s=(46===M?f+e.slice(c+1):e.slice(c))+s,e=e.slice(0,c);break}}}p&&!h&&(e=o(e,1/0));var k=a.length+e.length+s.length,S=k<d?new Array(d-k+1).join(t):"";switch(p&&h&&(e=o(S+e,S.length?d-s.length:1/0),S=""),n){case"<":return a+e+s+S;case"=":return a+S+e+s;case"^":return S.slice(0,k=S.length>>1)+a+e+s+S.slice(k)}return S+a+e+s}}return{format:h,formatPrefix:function(e,t){var r=h(((e=s(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(n(t)/3))),a=Math.pow(10,-i),o=l[8+i/3];return function(e){return r(a*e)+o}}}}var h=f({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),d=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),p=f({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),g=f({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),m=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),v=f({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),y=f({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),_=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),x=f({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),b=f({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),M=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),k=f({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),S=f({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),E=f({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),A=f({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),w=f({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),T=f({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),O=f({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),N=f({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),L=f({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),C=f({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),R=f({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),I=f({decimal:".",thousands:",",grouping:[3],currency:["¥",""]});var D=h.format,U=h.formatPrefix;e.version="0.4.2",e.format=D,e.formatPrefix=U,e.locale=f,e.localeCaEs=d,e.localeCsCz=p,e.localeDeCh=g,e.localeDeDe=m,e.localeEnCa=v,e.localeEnGb=y,e.localeEnUs=h,e.localeEsEs=_,e.localeFiFi=x,e.localeFrCa=b,e.localeFrFr=M,e.localeHeIl=k,e.localeHuHu=S,e.localeItIt=E,e.localeJaJp=A,e.localeKoKr=w,e.localeMkMk=T,e.localeNlNl=O,e.localePlPl=N,e.localePtBr=L,e.localeRuRu=C,e.localeSvSe=R,e.localeZhCn=I,e.formatSpecifier=s,e.precisionFixed=function(e){return Math.max(0,-n(Math.abs(e)))},e.precisionPrefix=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))},e.precisionRound=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,n(t)-n(e))+1}})(t)},10:function(e,t){},11:function(e,t){},"1C2Q":function(e,t){var n=0;function r(e){this.id="gradient_"+n++,this.type=e||"linear",this.stops=[],this.x1=0,this.x2=1,this.y1=0,this.y2=0}r.prototype.stop=function(e,t){return this.stops.push({offset:e,color:t}),this},e.exports=r},"1PdY":function(e,t,n){"use strict";!function(e){function t(e){return e.transform().filter}e.parseUnit=t,e.parseFacet=function(e){var n=t(e),r=e.child().component.data;return!r.source&&r.filter&&(n=(n?n+" && ":"")+r.filter,delete r.filter),n},e.parseLayer=function(e){var n=t(e);return e.children().forEach(function(t){var r=t.component.data;e.compatibleSource(t)&&r.filter&&r.filter===n&&delete r.filter}),n},e.assemble=function(e){var t=e.filter;return t?[{type:"filter",test:t}]:[]}}(t.filter||(t.filter={}))},"2I0S":function(e,t,n){var r=n("zF6n"),i={values:a({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:a({name:"count",set:"cell.num"}),missing:a({name:"missing",set:"this.missing"}),valid:a({name:"valid",set:"this.valid"}),sum:a({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:a({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:a({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:a({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:a({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:a({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:a({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:a({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:a({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:a({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:a({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:a({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:a({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:a({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:a({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:a({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:a({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};function a(e){return function(t){var n=r.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}i.create=function(e,t,a,o){var s,u,l,c="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",f="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",h="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",d="var t = this.tuple; var cell = this.cell;";return(u=t,l=(s=e).reduce(function e(t,n){function r(n){t[n]||e(t,t[n]=i[n]())}return n.req&&n.req.forEach(r),u&&n.str&&n.str.forEach(r),t},s.reduce(function(e,t){return e[t.name]=t,e},{})),r.vals(l).sort(function(e,t){return e.idx-t.idx})).forEach(function(e){e.idx<0?(c=e.init+c,f=e.add+f,h=e.rem+h):(c+=e.init,f+=e.add,h+=e.rem)}),e.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){d+="this.assign(t,'"+e.out+"',"+e.set+");"}),d+="return t;",(c=Function("cell","t",c)).prototype.assign=o,c.prototype.add=Function("t","var v = this.get(t);"+f),c.prototype.rem=Function("t","var v = this.get(t);"+h),c.prototype.set=Function(d),c.prototype.get=a,c.prototype.distinct=n("uHQN").count.distinct,c.prototype.isValid=r.isValid,c.fields=e.map(r.$("out")),c},e.exports=i},"2zc7":function(e,t,n){var r=n("sV93"),i=n("VeBo"),a=n("kC7m");function o(){i.call(this),this._down=null,this._touch=null,this._first=!0}var s=i.prototype,u=o.prototype=Object.create(s);function l(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function c(e){return function(t){this.fire(e,t),this._active=null}}u.constructor=o,u.initialize=function(e,t,n){var i=this._canvas=r.find(e,"canvas");if(i){var a=this;this.events.forEach(function(e){i.addEventListener(e,function(t){u[e]?u[e].call(a,t):a.fire(e,t)})})}return s.initialize.call(this,e,t,n)},u.canvas=function(){return this._canvas},u.context=function(){return this._canvas.getContext("2d")},u.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],u.DOMMouseScroll=function(e){this.fire("mousewheel",e)},u.mousemove=l("mousemove","mouseover","mouseout"),u.dragover=l("dragover","dragenter","dragleave"),u.mouseout=c("mouseout"),u.dragleave=c("dragleave"),u.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},u.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},u.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},u.touchmove=function(e){this.fire("touchmove",e,!0)},u.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},u.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(o)for(t.vegaType=e,r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},u.on=function(e,t){var n=this.eventName(e),r=this._handlers;return(r[n]||(r[n]=[])).push({type:e,handler:t}),this},u.off=function(e,t){var n,r=this.eventName(e),i=this._handlers[r];if(i){for(n=i.length;--n>=0;)i[n].type===e&&(t&&i[n].handler!==t||i.splice(n,1));return this}},u.pickEvent=function(e){var t,n,r=this._canvas.getBoundingClientRect(),i=this._padding;return this.pick(this._scene,t=e.clientX-r.left,n=e.clientY-r.top,t-i.left,n-i.top)},u.pick=function(e,t,n,r,i){var o=this.context();return a[e.marktype].pick.call(this,o,e,t,n,r,i)},e.exports=o},"3C/O":function(e,t,n){var r=n("Za4h"),i=n("gtuQ"),a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){return s.prototype.init.call(this,e),o.addParameters(this,{clipExtent:{type:"array<value>",default:n("MRce").extent},x:{type:"field",default:"layout_x"},y:{type:"field",default:"layout_y"}}),this._layout=r.geom.voronoi(),this._output={path:"layout_path"},this.mutates(!0)}var l=u.prototype=Object.create(s.prototype);l.constructor=u,l.batchTransform=function(e,t){a.debug(e,["voronoi"]);for(var n=this._output.path,r=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(t),o=0;o<t.length;++o)r[o]&&i.set(t[o],n,"M"+r[o].join("L")+"Z");return e.fields[n]=1,e},e.exports=u,u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Voronoi transform",type:"object",properties:{type:{enum:["voronoi"]},clipExtent:{description:"The min and max points at which to clip the voronoi diagram.",oneOf:[{type:"array",items:{oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[[-1e5,-1e5],[1e5,1e5]]},x:{description:"The input x coordinates.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},y:{description:"The input y coordinates.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},"3FFs":function(e,t,n){var r=n("D3vM").ALL,i=0;function a(e){e&&this.init(e)}var o=a.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32},s=a.prototype;s.init=function(e){this._id=++i,this._graph=e,this._rank=e.rank(),this._qrank=null,this._stamp=0,this._listeners=[],this._listeners._ids={},this._deps={};for(var t=0,n=r.length;t<n;++t)this._deps[r[t]]=[];return this._flags=0,this},s.rank=function(){return this._rank},s.rerank=function(){for(var e,t=this._graph,n=[this];n.length;)(e=n.shift())._rank=t.rank(),n.unshift.apply(n,e.listeners());return this},s.qrank=function(){return arguments.length?(this._qrank=this._rank,this):this._qrank},s.last=function(e){return arguments.length?(this._stamp=e,this):this._stamp},s._setf=function(e,t){return t?this._flags|=e:this._flags&=~e,this},s.router=function(e){return arguments.length?this._setf(o.Router,e):this._flags&o.Router},s.collector=function(e){return arguments.length?this._setf(o.Collector,e):this._flags&o.Collector},s.produces=function(e){return arguments.length?this._setf(o.Produces,e):this._flags&o.Produces},s.mutates=function(e){return arguments.length?this._setf(o.Mutates,e):this._flags&o.Mutates},s.reflows=function(e){return arguments.length?this._setf(o.Reflows,e):this._flags&o.Reflows},s.batch=function(e){return arguments.length?this._setf(o.Batch,e):this._flags&o.Batch},s.dependency=function(e,t){var n=this._deps[e],r=n._names||(n._names={});if(1===arguments.length)return n;if(null===t)n.splice(0,n.length),n._names={};else if(Array.isArray(t))for(var i,a=0,o=t.length;a<o;++a)r[i=t[a]]||(n.push(i),r[i]=1);else{if(r[t])return this;n.push(t),r[t]=1}return this},s.listeners=function(){return this._listeners},s.addListener=function(e){if(!(e instanceof a))throw Error("Listener is not a Node");return this._listeners._ids[e._id]?this:(this._listeners.push(e),this._listeners._ids[e._id]=1,this._rank>e._rank&&e.rerank(),this)},s.removeListener=function(e){if(!this._listeners._ids[e._id])return!1;var t=this._listeners.indexOf(e),n=t>=0;return n&&(this._listeners.splice(t,1),this._listeners._ids[e._id]=null),n},s.disconnect=function(){this._listeners=[],this._listeners._ids={}},s.evaluate=function(e){return e},s.reevaluate=function(e){var t,n,i,a,o,s;for(i=0,a=r.length;i<a;++i)for(t=r[i],o=0,s=(n=this._deps[t]).length;o<s;++o)if(e[t][n[o]])return!0;return!1},a.reset=function(){i=0},e.exports=a},"3Gpk":function(e,t,n){var r=n("BONk"),i=["items","axisItems","legendItems"],a=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];e.exports={toJSON:function(e,t){return JSON.stringify(e,a,t)},fromJSON:function(e){return function e(t){var n,a,o,s,u,l=t.marktype;for(o=0,s=i.length;o<s;++o)if(u=t[i[o]])for(n=0,a=u.length;n<a;++n)u[n][l?"mark":"group"]=t,l&&"group"!==l||e(u[n]);return l&&r.mark(t),t}("string"==typeof e?JSON.parse(e):e)}}},"3Scv":function(e,t){function n(e){return null!=e.fontSize?e.fontSize:11}e.exports={size:n,value:function(e){return null!=e?String(e):""},font:function(e,t){var r=e.font;return t&&r&&(r=String(r).replace(/\"/g,"'")),(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+n(e)+"px "+(r||"sans-serif")},offset:function(e){var t=e.baseline,r=n(e);return Math.round("top"===t?.93*r:"middle"===t?.3*r:"bottom"===t?-.21*r:0)}}},"3Y21":function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=n("J731"),o=i.ChangeSet,s=i.Tuple,u=i.Dependencies,l=n("4JPs"),c=n("QvNu");function f(e){return l.prototype.init.call(this,e),l.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(e){var t,n,i,a,o,s,l={},c=this._transform;if(!r.isArray(a=e)){a=[];for(o in e)s=r.array(e[o]),a.push({field:o,ops:s})}function f(e){e.signal&&(l[e.signal]=1)}for(t=0,n=a.length;t<n;++t)(i=a[t]).field.signal&&(l[i.field.signal]=1),r.array(i.ops).forEach(f),r.array(i.as).forEach(f);return c._fields=a,c._aggr=null,c.dependency(u.SIGNALS,r.keys(l)),c}}}),this._aggr=null,this._input=null,this._args=null,this._fields=[],this._out=[],this._type=d.TUPLE,this._acc={groupby:r.true,value:r.true},this.router(!0).produces(!0)}var h=f.prototype=Object.create(l.prototype);h.constructor=f;var d=f.TYPES={VALUE:1,TUPLE:2,MULTI:3};f.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"],h.type=function(e){return this._type=e,this},h.accessors=function(e,t){var n=this._acc;n.groupby=r.$(e)||r.true,n.value=r.$(t)||r.true},h.aggr=function(){if(this._aggr)return this._aggr;var e=this._graph,t=!1,n=[],i=this.param("groupby").field,a=function(t){return t.signal?e.signalRef(t.signal):t},o=this._fields.map(function(e){var i={name:a(e.field),as:r.array(e.as),ops:r.array(a(e.ops)).map(a),get:e.get};return t=t||null!=i.get,n.push(i.name),i});i.forEach(function(e){e.get&&(t=!0),n.push(e.name||e)}),this._args=t||!o.length?null:n,o.length||(o={"*":"values"});var s=this._aggr=(new c).groupby(i).stream(!0).summarize(o);return this._out=function(e){var t,n,r,i,a,o,s,u=[];for(a=e._dims,t=0,n=a.length;t<n;++t)u.push(a[t].name);for(o=e._aggr,t=0,n=o.length;t<n;++t)for(s=o[t].measures.fields,r=0,i=s.length;r<i;++r)u.push(s[r]);return u}(s),this._type!==d.VALUE&&s.key("_id"),s},h.transform=function(e,t){a.debug(e,["aggregate"]);var n,r,i,u,l,c=o.create(e),f=this.aggr(),h=this._out,p=this._args,g=!0,m=s.prev;if(t&&(c.rem.push.apply(c.rem,f.result()),f.clear(),this._aggr=null,f=this.aggr()),this._type===d.TUPLE)n=function(e){f._add(e),s.prev_init(e)},r=function(e){f._rem(m(e))},i=function(e){f._mod(e,m(e))},u=function(e){f._markMod(e,m(e))};else{var v=this._acc.groupby,y=this._acc.value,_=this._type===d.VALUE?y:function(e){return{_id:e._id,groupby:v(e),value:y(e)}};n=function(e){f._add(_(e)),s.prev_init(e)},r=function(e){f._rem(_(m(e)))},i=function(e){f._mod(_(e),_(m(e)))},u=function(e){f._mark(_(e),_(m(e)))}}if(e.add.forEach(n),t)e.mod.forEach(n);else{if(e.rem.forEach(r),p)for(l=0,g=!1;l<p.length;++l)if(e.fields[p[l]]){g=!0;break}e.mod.forEach(g?i:u)}for(l=0;l<h.length;++l)c.fields[h[l]]=1;return f._input=e,f.changes(c)},e.exports=f;var p=f.VALID_OPS;f.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Aggregate transform",description:"Compute summary aggregate statistics",type:"object",properties:{type:{enum:["aggregate"]},groupby:{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},description:"A list of fields to split the data into groups."},summarize:{oneOf:[{type:"object",additionalProperties:{type:"array",description:"An array of aggregate functions.",items:{oneOf:[{enum:p},{$ref:"#/refs/signal"}]}}},{type:"array",items:{type:"object",properties:{field:{description:"The name of the field to aggregate.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},ops:{type:"array",description:"An array of aggregate functions.",items:{oneOf:[{enum:p},{$ref:"#/refs/signal"}]}},as:{type:"array",description:"An optional array of names to use for the output fields.",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}}},additionalProperties:!1,required:["field","ops"]}}]}},additionalProperties:!1,required:["type"]}},"3bKu":function(e,t,n){var r=n("zF6n"),i=n("mgrV"),a=i.utc,o=e.exports;o.$year=r.$func("year",i.year.unit),o.$month=r.$func("month",i.months.unit),o.$date=r.$func("date",i.dates.unit),o.$day=r.$func("day",i.weekdays.unit),o.$hour=r.$func("hour",i.hours.unit),o.$minute=r.$func("minute",i.minutes.unit),o.$second=r.$func("second",i.seconds.unit),o.$utcYear=r.$func("utcYear",a.year.unit),o.$utcMonth=r.$func("utcMonth",a.months.unit),o.$utcDate=r.$func("utcDate",a.dates.unit),o.$utcDay=r.$func("utcDay",a.weekdays.unit),o.$utcHour=r.$func("utcHour",a.hours.unit),o.$utcMinute=r.$func("utcMinute",a.minutes.unit),o.$utcSecond=r.$func("utcSecond",a.seconds.unit)},"4JPs":function(e,t,n){var r=n("Hqva"),i=r.Node.prototype,a=r.Dependencies,o=n("fRRI");function s(e){e&&i.init.call(this,e)}s.addParameters=function(e,t){e._parameters=e._parameters||{};for(var n in t){var r=t[n],i=new o(n,r.type,e);e._parameters[n]=i,"custom"===r.type&&(r.set&&(i.set=r.set.bind(i)),r.get&&(i.get=r.get.bind(i))),r.hasOwnProperty("default")&&i.set(r.default)}};var u=s.prototype=Object.create(i);u.constructor=s,u.param=function(e,t){var n=this._parameters[e];return void 0===n?this:1===arguments.length?n.get():n.set(t)},u.transform=function(e){return e},u.evaluate=function(e){var t=this._stamp<e.stamp&&this.dependency(a.SIGNALS).reduce(function(t,n){return t+(e.signals[n]?1:0)},0);return this.transform(e,t)},u.output=function(e){for(var t in this._output)void 0!==e[t]&&(this._output[t]=e[t]);return this},e.exports=s},"4XOj":function(e,t,n){function r(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t]]=1;return r}function i(e){var t,n=[];for(t in e)n.push(t);return n}e.exports=function(e){var t=(e=e||{}).constants||n("MSrK"),a=(e.functions||n("nj7R"))(v),o=e.functionDefs?e.functionDefs(v):{},s=e.idWhiteList?r(e.idWhiteList):null,u=e.idBlackList?r(e.idBlackList):null,l=0,c=e.fieldVar||"datum",f=e.globalVar||"signals",h={},d={},p={};function g(e){var t={code:v(e),globals:i(h),fields:i(d),dataSources:i(p),defs:o};return h={},d={},p={},t}var m="function"==typeof f?f:function(e){return f+'["'+e+'"]'};function v(e){if("string"==typeof e)return e;var t=y[e.type];if(null==t)throw new Error("Unsupported type: "+e.type);return t(e)}var y={Literal:function(e){return e.raw},Identifier:function(e){var n=e.name;if(l>0)return n;if(t.hasOwnProperty(n))return t[n];if(s)return s.hasOwnProperty(n)?n:(h[n]=1,m(n));if(u&&u.hasOwnProperty(n))throw new Error("Illegal identifier: "+n);return n},Program:function(e){return e.body.map(v).join("\n")},MemberExpression:function(e){var t=!e.computed,n=v(e.object);t&&(l+=1);var r=v(e.property);return n===c&&(d[r]=1),t&&(l-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if("Identifier"!==e.callee.type)throw new Error("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=a.hasOwnProperty(t)&&a[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n,h,d,p):r+"("+n.map(v).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(v).join(",")+"]"},BinaryExpression:function(e){return"("+v(e.left)+e.operator+v(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+v(e.argument)+")"},ConditionalExpression:function(e){return"("+v(e.test)+"?"+v(e.consequent)+":"+v(e.alternate)+")"},LogicalExpression:function(e){return"("+v(e.left)+e.operator+v(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(v).join(",")+"}"},Property:function(e){l+=1;var t=v(e.key);return l-=1,t+":"+v(e.value)},ExpressionStatement:function(e){return v(e.expression)}};return g.functions=a,g.functionDefs=o,g.constants=t,g}},"58eP":function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){return s.prototype.init.call(this,e),o.addParameters(this,{field:{type:"field",default:null},startAngle:{type:"value",default:0},endAngle:{type:"value",default:2*Math.PI},sort:{type:"value",default:!1}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}var l=u.prototype=Object.create(s.prototype);function c(){return 1}l.constructor=u,l.batchTransform=function(e,t){a.debug(e,["pie"]);var n,o,s,u=this._output,l=this.param("field").accessor||c,f=this.param("startAngle"),h=this.param("endAngle"),d=this.param("sort"),p=t.map(l),g=f,m=(h-f)/r.sum(p),v=r.range(t.length);for(d&&v.sort(function(e,t){return p[e]-p[t]}),n=0;n<v.length;++n)o=t[v[n]],s=p[v[n]],i.set(o,u.start,g),i.set(o,u.mid,g+.5*s*m),i.set(o,u.end,g+=s*m);return e.fields[u.start]=1,e.fields[u.end]=1,e.fields[u.mid]=1,e},e.exports=u,u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Pie transform",description:"Computes a pie chart layout.",type:"object",properties:{type:{enum:["pie"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"The data values to encode as angular spans. If this property is omitted, all pie slices will have equal spans."},startAngle:{oneOf:[{type:"number",minimum:0,maximum:2*Math.PI},{$ref:"#/refs/signal"}],default:0},endAngle:{oneOf:[{type:"number",minimum:0,maximum:2*Math.PI},{$ref:"#/refs/signal"}],default:2*Math.PI},sort:{description:" If true, will sort the data prior to computing angles.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!1},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"layout_start"},end:{type:"string",default:"layout_end"},mid:{type:"string",default:"layout_mid"}}}},required:["type"]}},"5AQc":function(e,t,n){var r=n("zF6n"),i=/^([A-Za-z]+:)?\/\//,a="file://";function o(e,t){return o.loader(e,t)}function s(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function u(e,t){return null!=e&&0===e.lastIndexOf(t,0)}o.loader=function(e,t){var n,r=t||function(e){throw e};try{n=o.sanitizeUrl(e)}catch(e){return void r(e)}if(n)return o.useXHR?o.xhr(n,e,t):u(n,a)?o.file(n.slice(a.length),e,t):n.indexOf("://")<0?o.file(n,e,t):o.http(n,e,t);r("Invalid URL: "+e.url)},o.sanitizeUrl=function(e){var t=e.url;if(!t&&e.file)return a+e.file;if(e.baseURL&&!i.test(t)&&(u(t,"/")||"/"===e.baseURL[e.baseURL.length-1]||(t="/"+t),t=e.baseURL+t),!o.useXHR&&u(t,"//")&&(t=(e.defaultProtocol||"http")+":"+t),e.domainWhiteList){var r,s;if(o.useXHR){var l=document.createElement("a");l.href=t,""===l.host&&(l.href=l.href),r=l.hostname.toLowerCase(),s=window.location.hostname}else{var c=n(11).parse(t);r=c.hostname,s=null}if(s!==r&&!e.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&"."===r[t-1]&&r.lastIndexOf(e)===t}))throw"URL is not whitelisted: "+t}return t},o.xhr=function(e,t,n){var i=!!n,a=new XMLHttpRequest;function u(){var e=a.status;!e&&s(a)||e>=200&&e<300||304===e?n(null,a.responseText):n(a,null)}if("undefined"==typeof XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),i&&("onload"in a?a.onload=a.onerror=u:a.onreadystatechange=function(){a.readyState>3&&u()}),a.open("GET",e,i),a.setRequestHeader){var l=r.extend({},o.headers,t.headers);for(var c in l)a.setRequestHeader(c,l[c])}if(a.send(),!i&&s(a))return a.responseText},o.file=function(e,t,r){var i=n(8);if(!r)return i.readFileSync(e,"utf8");i.readFile(e,r)},o.http=function(e,t,i){var a={url:e,encoding:null,gzip:!0,headers:r.extend({},o.headers,t.headers)};if(!i)return n(10)("GET",e,a).getBody();n(9)(a,function(e,t,n){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",i(e,null)):i(null,n)})},o.useXHR="undefined"!=typeof XMLHttpRequest,o.headers={},e.exports=o},"6+LD":function(e,t,n){var r=n("Hqva"),i=r.Tuple,a=n("J731"),o=n("4JPs");function s(e){return o.prototype.init.call(this,e),o.addParameters(this,{field:{type:"field",default:"data"},pattern:{type:"value",default:"[\\w']+"},case:{type:"value",default:"lower"},stopwords:{type:"value",default:""}}),this._output={text:"text",count:"count"},this.router(!0).produces(!0)}var u=s.prototype=Object.create(o.prototype);u.constructor=s,u.transform=function(e,t){a.debug(e,["countpattern"]);var n=this.param("field").accessor,r=this.param("pattern"),o=this.param("stopwords"),s=!1;function u(e){return i.prev_init(e),n(e)}function l(e){return n(i.prev(e))}return this._stop!==o&&(this._stop=o,this._stop_re=new RegExp("^"+o+"$","i"),t=!0),this._pattern!==r&&(this._pattern=r,this._match=new RegExp(this._pattern,"g"),t=!0),t&&(this._counts={}),this._add(e.add,u),t||this._rem(e.rem,l),(t||(s=e.fields[n.field]))&&(s&&this._rem(e.mod,l),this._add(e.mod,u)),this._changeset(e)},u._changeset=function(e){var t,n,a,o=this._counts,s=this._tuples||(this._tuples={}),u=r.ChangeSet.create(e),l=this._output;for(t in o)n=s[t],a=o[t]||0,!n&&a?(s[t]=n=i.ingest({}),n[l.text]=t,n[l.count]=a,u.add.push(n)):0===a?(n&&u.rem.push(n),delete o[t],delete s[t]):n[l.count]!==a&&(i.set(n,l.count,a),u.mod.push(n));return u},u._tokenize=function(e){switch(this.param("case")){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(this._match)},u._add=function(e,t){var n,r,i,a,o=this._counts,s=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)s.test(a=n[r])||(o[a]=1+(o[a]||0))},u._rem=function(e,t){var n,r,i,a,o=this._counts,s=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)s.test(a=n[r])||(o[a]-=1)},e.exports=s,s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"CountPattern transform",type:"object",properties:{type:{enum:["countpattern"]},field:{description:"The field containing the text to analyze.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"data"},pattern:{description:"A regexp pattern for matching words in text.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"[\\w']+"},case:{description:"Text case transformation to apply.",oneOf:[{enum:["lower","upper","none"]},{$ref:"#/refs/signal"}],default:"lower"},stopwords:{description:"A regexp pattern for matching stopwords to omit.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:""},output:{type:"object",description:"Rename the output data fields",properties:{text:{type:"string",default:"text"},count:{type:"string",default:"count"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},"6gf1":function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva"),o=n("XSKZ"),s=n("S/OH"),u="_vgGATEKEEPER",l="_vgEVALUATOR",c={getItem:function(){return this.item},getGroup:function(e){var t=e?this.name[e]:this.group,n=t&&t.mark;return n&&(n.interactive||void 0===n.interactive)?t:{}},getXY:function(e){var t={x:this.x,y:this.y};for("string"==typeof e&&(e=this.name[e]);e;e=e.mark&&e.mark.group)t.x-=e.x||0,t.y-=e.y||0;return t},getX:function(e){return this.getXY(e).x},getY:function(e){return this.getXY(e).y}};function f(e){var t=e.model(),n=t.expr("true"),f=t.expr("false"),h=t.defs().signals,d={handlers:{},nodes:{}},p=i.duplicate(d),g=i.duplicate(d);return i.array(h).forEach(function(e){var n=t.signal(e.name);e.expr||i.array(e.streams).forEach(function(e){var r=o.parse(e.type),i=t.expr(e.expr);y(n,r,i,e)})}),i.keys(p.handlers).forEach(function(t){e.on(t,function(e,n){e.preventDefault(),m(e,n),v(p,t,n&&n.datum||{},n&&n.mark&&n.mark.group&&n.mark.group.datum||{},e)})}),i.keys(g.handlers).forEach(function(e){if("undefined"!=typeof window){for(var t=g.handlers[e],n=e.split(":"),i="window"===n[0]?[window]:window.document.querySelectorAll(n[0]),a=0;a<i.length;++a)i[a].addEventListener(n[1],o);t.elements=i,t.listener=o}function o(t){m(t),v(g,e,r.select(this).datum(),this.parentNode&&r.select(this.parentNode).datum(),t)}}),g.detach=function(){i.keys(g.handlers).forEach(function(e){for(var t=g.handlers[e],n=e.split(":"),r=i.array(t.elements),a=0;a<r.length;++a)r[a].removeEventListener(n[1],t.listener)})},g.detach;function m(t,n){var i,a,o,s=r.mouse((r.event=t,e.renderer().scene())),u=e.padding(),l={};if(n)for(a="group"===(i=n.mark).marktype?n:i.group,o=n;null!=o;o=o.mark.group)o.mark.def.name&&(l[o.mark.def.name]=o);l.root=e.model().scene().items[0],t.vg=Object.create(c),t.vg.group=a,t.vg.item=n||{},t.vg.name=l,t.vg.x=s[0]-u.left,t.vg.y=s[1]-u.top}function v(e,n,r,i,o){var u,l,c,f,h=e.handlers[n],d=e.nodes[n],p=a.ChangeSet.create(null,!0);function g(e){return!e.fn(r,i,o)}for(l=0,c=h.length;l<c;++l)(f=h[l]).filters.some(g)||(u=f.exp.fn(r,i,o),f.spec.scale&&(u=s.scale(t,f.spec,u,r,o)),(u!==f.signal.value()||f.signal.verbose())&&(f.signal.value(u),p.signals[f.signal.name()]=1));t.propagate(p,d)}function y(e,r,o,c){r.forEach(function(r){var h,d,m,v,_,x,b,M,k,S,E,A,w,T;r.event?function(e,n,r,o){var s=n.event,u=n.name,l=n.mark,c=n.target,f=i.array(n.filters),h=c?g:p,d=c?c+":"+s:s,m=h.nodes[d]||(h.nodes[d]=new a.Node(t)),v=h.handlers[d]||(h.handlers[d]=[]);u?f.push('!!event.vg.name["'+u+'"]'):l&&f.push("event.vg.item.mark && event.vg.item.mark.marktype==="+i.str(l));v.push({signal:e,exp:r,spec:o,filters:f.map(function(e){return t.expr(e)})}),m.addListener(e)}(e,r,o,c):r.signal?(S=r,E=o,A=c,w=(k=e).name(),(T=t.signal(w+l,null)).evaluate=function(e){if(!e.signals[S.signal])return t.doNotPropagate;var n=E.fn();return A.scale&&(n=s.scale(t,A,n)),(n!==k.value()||k.verbose())&&(k.value(n),e.signals[w]=1,e.reflow=!0),e},T.dependency(a.Dependencies.SIGNALS,S.signal),T.addListener(k),t.signal(S.signal).addListener(T)):r.start?(d=r,m=o,v=c,_=(h=e).name()+u,x=d.middle,b=x.filters||(x.filters=[]),y(M=t.signal(_)||t.signal(_,!1),[d.start],n,{}),y(M,[d.end],f,{}),b.push(M.name()),y(h,[d.middle],m,v)):r.stream&&(r.filters&&r.stream.forEach(function(e){e.filters=i.array(e.filters).concat(r.filters)}),y(e,r.stream,o,c))})}}e.exports=f,f.schema={defs:{streams:{type:"array",items:{type:"object",properties:{type:{type:"string"},expr:{type:"string"},scale:{$ref:"#/refs/scopedScale"}},additionalProperties:!1,required:["type","expr"]}}}}},7:function(e,t){},"736r":function(e,t,n){"use strict";var r=n("o+e1"),i=n("WJ2w"),a=n("ZAUf"),o=n("wKIX");!function(e){function t(e){return e.reduce(function(e,t,n){var a=r.field(t,{nofn:!0,datum:!0});t.type===i.TEMPORAL&&t.timeUnit&&(e[r.field(t)]={type:"formula",field:r.field(t),expr:o.parseExpression(t.timeUnit,a)});return e},{})}e.parseUnit=t,e.parseFacet=function(e){var n=t(e),r=e.child().component.data;return r.source||(a.extend(n,r.timeUnit),delete r.timeUnit),n},e.parseLayer=function(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;t.source||(a.extend(n,t.timeUnit),delete t.timeUnit)}),n},e.assemble=function(e){return a.vals(e.timeUnit)}}(t.timeUnit||(t.timeUnit={}))},"7YRp":function(e,t,n){"use strict";var r=n("ZAUf");t.isUnionedDomain=function(e){return!r.isArray(e)&&"fields"in e},t.isDataRefDomain=function(e){return!r.isArray(e)&&"data"in e}},"7Zus":function(e,t,n){var r=n("gWW/"),i=n("eJnU"),a=n("bSC/");function o(e,t){if(null==t.path)return!0;var n=t.pathCache||(t.pathCache=i(t.path));a(e,n,t.x,t.y)}e.exports={draw:r.drawAll(o),pick:r.pickPath(o)}},"7rLc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("jyAW");n.d(t,"dispatch",function(){return r.a})},8:function(e,t){},"81R7":function(e,t){e.exports=function(e){function t(){}function n(t,n){e.add(t,n)}return{bounds:function(t){return arguments.length?(e=t,this):e},beginPath:t,closePath:t,moveTo:n,lineTo:n,quadraticCurveTo:function(t,n,r,i){e.add(t,n),e.add(r,i)},bezierCurveTo:function(t,n,r,i,a,o){e.add(t,n),e.add(r,i),e.add(a,o)}}}},"8NMF":function(e,t,n){var r=n("Za4h"),i={};i.load={baseURL:"",domainWhiteList:!1},i.autopadInset=5,i.scale={time:r.time.scale,utc:r.time.scale.utc},i.render={retina:!0},i.scene={fill:void 0,fillOpacity:void 0,stroke:void 0,strokeOpacity:void 0,strokeWidth:void 0,strokeDash:void 0,strokeDashOffset:void 0},i.axis={layer:"back",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1e4,titleOffsetAutoMargin:4},i.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"},i.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]},i.range={category10:r.scale.category10().range(),category20:r.scale.category20().range(),category20b:r.scale.category20b().range(),category20c:r.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]},e.exports=i},"8lgt":function(e,t,n){"use strict";var r=n("P/aK"),i=n("MtYt");!function(e){e.markType=function(){return"rule"},e.properties=function(e){var t={};return"vertical"===e.config().mark.orient?(e.has(r.X)?t.x={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_mid"})}:t.x={value:0},e.has(r.Y)?t.y={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_mid"})}:t.y={field:{group:"height"}},e.has(r.Y2)?t.y2={scale:e.scaleName(r.Y),field:e.field(r.Y2,{binSuffix:"_mid"})}:t.y2={value:0}):(e.has(r.Y)?t.y={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_mid"})}:t.y={value:0},e.has(r.X)?t.x={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_mid"})}:t.x={value:0},e.has(r.X2)?t.x2={scale:e.scaleName(r.X),field:e.field(r.X2,{binSuffix:"_mid"})}:t.x2={field:{group:"width"}}),i.applyColorAndOpacity(t,e),e.has(r.SIZE)?t.strokeWidth={scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}:t.strokeWidth={value:(n=e,a=n.fieldDef(r.SIZE),a&&void 0!==a.value?a.value:n.config().mark.ruleSize)},t;var n,a},e.labels=function(e){}}(t.rule||(t.rule={}))},9:function(e,t){},"9+55":function(e,t,n){var r=n("gWW/");e.exports={draw:function(e,t,n){if(t.items&&t.items.length)for(var r,i=t.items,a=0,o=i.length;a<o;++a)if(r=i[a],!n||n.intersects(r.bounds)){r.image&&r.image.url===r.url||(r.image=this.loadImage(r.url),r.image.url=r.url);var s,u=r.x||0,l=r.y||0,c=r.width||r.image&&r.image.width||0,f=r.height||r.image&&r.image.height||0;u-="center"===r.align?c/2:"right"===r.align?c:0,l-="middle"===r.baseline?f/2:"bottom"===r.baseline?f:0,r.image.loaded&&(e.globalAlpha=null!=(s=r.opacity)?s:1,e.drawImage(r.image,u,l,c,f))}},pick:r.pick()}},"92+E":function(e,t,n){var r=n("SbOu"),i=n("h36N");function a(e,t,n,a){return{type:"group",width:n,height:a,properties:function(e,t){var n,r,a,s,u,l=t.config().scene,c={};for(n=0,r=a=o.length;n<r;++n)s=o[n],void 0!==(u=e[s])?c[s]=u.signal?u:{value:u}:l[s]?c[s]={value:l[s]}:--a;return a?{update:i(t,"group",c)}:{}}(t.scene||{},e),scales:t.scales||[],axes:t.axes||[],legends:t.legends||[],marks:(t.marks||[]).map(function(t){return r(e,t,!0)})}}var o=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];e.exports=a,a.schema={defs:{container:{type:"object",properties:{scene:{type:"object",properties:{fill:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},fillOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},stroke:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},strokeOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},strokeWidth:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},strokeDash:{oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/signal"}]},strokeDashOffset:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}}},scales:{type:"array",items:{$ref:"#/defs/scale"}},axes:{type:"array",items:{$ref:"#/defs/axis"}},legends:{type:"array",items:{$ref:"#/defs/legend"}},marks:{type:"array",items:{oneOf:[{$ref:"#/defs/groupMark"},{$ref:"#/defs/visualMark"}]}}}},groupMark:{allOf:[{properties:{type:{enum:["group"]}},required:["type"]},{$ref:"#/defs/mark"},{$ref:"#/defs/container"}]},visualMark:{allOf:[{not:{properties:{type:{enum:["group"]}}}},{$ref:"#/defs/mark"}]}}}},"95dH":function(e,t,n){e.exports={Handler:n("yszh"),Renderer:n("mP8n"),string:{Renderer:n("9eLo")}}},"9eLo":function(e,t,n){var r=n("ZyfV"),i=n("zLl/"),a=n("zhsD"),o=n("3Scv"),s=n("sV93"),u=s.openTag,l=s.closeTag,c=n("rfWk");function f(e){r.call(this),this._loader=new i(e),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={clip_id:1,gradient:{},clipping:{}}}var h,d=r.prototype,p=f.prototype=Object.create(d);function g(e,t,n,r){h[r||e]=t}function m(e,t,n,r){if(null==e)return"";var i,s,u,l,c,f="";for("bgrect"===n&&!1===t.interactive&&(f+="pointer-events: none;"),"text"===n&&(f+="font: "+o.font(e)+";"),i=0,s=a.styleProperties.length;i<s;++i)u=a.styleProperties[i],l=a.styles[u],null==(c=e[u])?"fill"===l&&(f+=(f.length?" ":"")+"fill: none;"):(c.id&&(r.gradient[c.id]=c,c="url(#"+c.id+")"),f+=(f.length?" ":"")+l+": "+c+";");return f?'style="'+f+'"':null}p.constructor=f,p.resize=function(e,t,n){d.resize.call(this,e,t,n);var r=this._padding,i=this._text,o={class:"marks",width:this._width+r.left+r.right,height:this._height+r.top+r.bottom};for(var s in a.metadata)o[s]=a.metadata[s];return i.head=u("svg",o),i.root=u("g",{transform:"translate("+r.left+","+r.top+")"}),i.foot=l("g")+l("svg"),this},p.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot},p.render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},p.reset=function(){return this._defs.clip_id=0,this},p.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(r=(n=i.gradient[t]).stops,a+=u("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=u("stop",{offset:r[e].offset,"stop-color":r[e].color})+l("stop");a+=l("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=u("clipPath",{id:t}),a+=u("rect",{x:0,y:0,width:n.width,height:n.height})+l("rect"),a+=l("clipPath");return a.length>0?u("defs")+a+l("defs"):""},p.imageURL=function(e){return this._loader.imageURL(e)},p.attributes=function(e,t){return h={},e(g,t,this),h},p.mark=function(e){var t,n,r,i=c[e.marktype],a=i.tag,f=i.attr,h=i.nest||!1?e.items&&e.items.length?[e.items[0]]:[]:e.items||[],d=this._defs,p="";for("g"!==a&&!1===e.interactive&&(t='style="pointer-events: none;"'),p+=u("g",{class:s.cssClass(e)},t),n=0;n<h.length;++n)r=h[n],t="g"!==a?m(r,e,a,d):null,p+=u(a,this.attributes(f,r),t),"text"===a?p+=o.value(r.text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===a&&(p+=u("rect",this.attributes(i.background,r),m(r,e,"bgrect",d))+l("rect"),p+=this.markGroup(r)),p+=l(a);return p+l("g")},p.markGroup=function(e){var t,n,r="",i=e.axisItems||[],a=e.items||[],o=e.legendItems||[];for(t=0,n=i.length;t<n;++t)"back"===i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=a.length;t<n;++t)r+=this.mark(a[t]);for(t=0,n=i.length;t<n;++t)"back"!==i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=o.length;t<n;++t)r+=this.mark(o[t]);return r},e.exports=f},ARV7:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("KfF0"),o=n("ekYZ"),s=n("xZ2+"),u=n("B1p+"),l=n("gtuQ"),c=n("KMnl"),f=n("D3vM");function h(){}var d=h.prototype;d.init=function(){this._stamp=0,this._rank=0,this._data={},this._signals={},this._requestedIndexes={},this.doNotPropagate={}},d.rank=function(){return++this._rank},d.values=function(e,t,n){var i,a,o=e===f.SIGNALS?this._signals:this._data,s=void 0!==t?t:r.keys(o);if(Array.isArray(s)){for(i=n||{},a=0;a<s.length;++a)i[s[a]]=o[s[a]].values();return i}return o[s].values()},d.dataValues=function(e){return this.values(f.DATA,e)},d.signalValues=function(e){return this.values(f.SIGNALS,e)},d.data=function(e,t,n){var r=this._data;if(arguments.length)return 1===arguments.length?r[e]:r[e]=new s(this,e,n).pipeline(t);var i,a=[];for(i in r)a.push(r[i]);return a},d.signal=function(e,t){if(1===arguments.length){var n=this;return Array.isArray(e)?e.map(function(e){return n._signals[e]}):this._signals[e]}return this._signals[e]=new c(this,e,t)},d.signalRef=function(e){Array.isArray(e)||(e=r.field(e));var t=this.signal(e[0]).value();if(e.length>1)for(var n=1,i=e.length;n<i;++n)t=t[e[n]];return t},d.requestIndex=function(e,t){var n=this._requestedIndexes;return(n[e]||(n[e]={}))[t]=!0,this},d.buildIndexes=function(){var e,t,n,i,a,o,s,u,l=this._requestedIndexes,c=r.keys(l);for(e=0,t=c.length;e<t;++e){if(!(o=this.data(a=c[e])))throw Error("Data source "+r.str(a)+" does not exist.");for(n=0,i=(s=r.keys(l[a])).length;n<i;++n)null!==(u=s[n])&&(o.getIndex(u),l[a][u]=null)}return this},d.propagate=function(e,t,n,r){var i,s,u,l,f,h,d,p,g={},m=new a(function(e,t){return e._qrank-t._qrank});if(e.stamp)throw Error("Pulse already has a non-zero stamp.");for(e.stamp=n||++this._stamp,g[t._id]=e,m.push(t.qrank(!0));m.size()>0;)if(p=(t=m.peek())instanceof c,e=g[t._id],t.rank()!==t.qrank())m.replace(t.qrank(!0));else if(m.pop(),g[t._id]=null,i=t._listeners,(!p||p&&!r)&&(e=this.evaluate(e,t)),e!==this.doNotPropagate)for(!e.reflow&&t.reflows()&&(e=o.create(e,!0)),h=0,d=i.length;h<d;++h)if(void 0!==(u=g[(s=i[h])._id])){if(null===u)throw Error("Already propagated to node.");if(u===e)continue;if(l=e.add.length||e.mod.length||e.rem.length,f=u.add.length||u.mod.length||u.rem.length,l&&f)throw Error("Multiple changeset pulses to same node");g[s._id]=l?e:u,g[s._id].reflow=e.reflow||u.reflow}else m.push(s.qrank(!0)),g[s._id]=e;return this.done(e)},d.done=function(e){i.debug(e,["bookkeeping"]);for(var t in e.data)this.data(t).synchronize();return this},d.preprocess=function(e){for(var t,n,r,i,a=0,o=0;o<e.length;++o)(t=e[o]).batch()&&!t._collector&&(n||!r?(t=new u(this),e.splice(o,0,t),n=!1):t._collector=r),(i=t.collector())&&(r=t),n=n||t.router()&&!i,a=a||t.mutates(),t.produces()&&(e.splice(o+1,0,new u(this)),n=!1);return{router:n,collector:r,mutates:a}},d.connect=function(e){var t,n,i,a,o,s,u,l,c,h;for(o=0,s=e.length;o<s;++o){for((n=e[o]).collector()&&(t=n),u=0,l=(i=n.dependency(f.DATA)).length;u<l;++u){if(!(c=this.data(h=i[u])))throw new Error("Unknown data source "+r.str(h));c.addListener(t)}for(u=0,l=(a=n.dependency(f.SIGNALS)).length;u<l;++u){if(!(c=this.signal(h=a[u])))throw new Error("Unknown signal "+r.str(h));c.addListener(t)}o>0&&e[o-1].addListener(n)}return e},d.disconnect=function(e){var t,n,r,i,a,o,s,u;for(a=0,o=e.length;a<o;++a){for((n=e[a]).collector()&&(t=n),s=0,u=(r=n.dependency(f.DATA)).length;s<u;++s)this.data(r[s]).removeListener(t);for(s=0,u=(i=n.dependency(f.SIGNALS)).length;s<u;++s)this.signal(i[s]).removeListener(t);n.disconnect()}return e},d.synchronize=function(e){var t,n,r,i,a,o,s,u,c={};for(r=0,i=e.length;r<i;++r)if((t=e[r]).collector())for(a=0,o=(n=t.data()).length;a<o;++a)c[u=(s=n[a])._id]||(l.prev_update(s),c[u]=1);return this},d.reevaluate=function(e,t){var n=e.reflow&&t.last()>=e.stamp;return t.router()||e.add.length||e.rem.length||!n||t.reevaluate(e)},d.evaluate=function(e,t){return this.reevaluate(e,t)?(e=t.evaluate(e),t.last(e.stamp),e):e},e.exports=h},"Aj/a":function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva").Tuple,o=n("J731"),s=n("4JPs"),u=n("acp7"),l=.5*(1+Math.sqrt(5));function c(e){return u.prototype.init.call(this,e),s.addParameters(this,{sort:{type:"array<field>",default:["-value"]},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"field",default:"value"},size:{type:"array<value>",default:n("MRce").size},round:{type:"value",default:!0},sticky:{type:"value",default:!1},ratio:{type:"value",default:l},padding:{type:"value",default:null},mode:{type:"value",default:"squarify"}}),this._layout=r.layout.treemap(),this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var f=c.prototype=Object.create(u.prototype);f.constructor=c,f.batchTransform=function(e,t){o.debug(e,["treemap"]);var n=this._layout,r=this._output,s=this.param("sticky"),u=this.param("parent").accessor,l=t.filter(function(e){return null===u(e)})[0];return n.sticky()!==s&&n.sticky(s),n.sort(i.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(l),t.forEach(function(e){a.set(e,r.x,e.x),a.set(e,r.y,e.y),a.set(e,r.width,e.dx),a.set(e,r.height,e.dy),a.set(e,r.depth,e.depth)}),e.fields[r.x]=1,e.fields[r.y]=1,e.fields[r.width]=1,e.fields[r.height]=1,e.fields[r.depth]=1,e},e.exports=c,c.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Treemap transform",type:"object",properties:{type:{enum:["treemap"]},sort:{description:"A list of fields to use as sort criteria for sibling nodes.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:["-value"]},children:{description:"The data field for the children node array",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"children"},parent:{description:"The data field for the parent node",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"parent"},field:{description:"The values to use to determine the area of each leaf-level treemap cell.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},mode:{description:"The treemap layout algorithm to use.",oneOf:[{enum:["squarify","slice","dice","slice-dice"]},{$ref:"#/refs/signal"}],default:"squarify"},size:{description:"The dimensions of the treemap layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[500,500]},round:{description:"If true, treemap cell dimensions will be rounded to integer pixels.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!0},sticky:{description:"If true, repeated runs of the treemap will use cached partition boundaries.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!1},ratio:{description:"The target aspect ratio for the layout to optimize.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:l},padding:{oneOf:[{type:"number"},{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:4,maxItems:4},{$ref:"#/refs/signal"}],description:"he padding (in pixels) to provide around internal nodes in the treemap."},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},width:{type:"string",default:"layout_width"},height:{type:"string",default:"layout_height"},depth:{type:"string",default:"layout_depth"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},"B1p+":function(e,t,n){var r=n("J731"),i=n("gtuQ"),a=n("3FFs").prototype,o=n("ekYZ");function s(e){a.init.call(this,e),this._data=[],this.router(!0).collector(!0)}var u=s.prototype=Object.create(a);u.constructor=s,u.data=function(){return this._data},u.evaluate=function(e){r.debug(e,["collecting"]);var t=o.create(e);return e.rem.length&&(this._data=i.idFilter(this._data,e.rem),t.rem=e.rem.slice(0)),e.add.length&&(this._data=this._data.concat(e.add),t.add=e.add.slice(0)),e.mod.length&&(t.mod=e.mod.slice(0)),e.sort&&this._data.sort(e.sort),e.reflow&&(t.mod=t.mod.concat(i.idFilter(this._data,t.add,t.mod,t.rem)),t.reflow=!1),t},e.exports=s},BB2X:function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=i.Node,o=i.Dependencies,s=i.Tuple,u=i.Collector,l=n("J731"),c=n("Vp7n"),f=n("NNYs"),h=n("W+IH"),d=n("v4pi");function p(){return this._children={},this._scaler=null,this._recursor=null,this._scales={},this.scale=v.bind(this),arguments.length?this.init.apply(this,arguments):this}var g=p.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"},m=p.prototype=new c;function v(e,t){var n=this,r=null;if(2===arguments.length)return n._scales[e]=t,t;for(;null==r&&(r=n._scales[e],n=n.mark?n.mark.group:n._parent););return r}function y(e,t){l.debug(e,["building children marks #"+t._id]);var n,r,i,a,o,s,u=this._def.marks;for(a=0,o=u.length;a<o;++a)r=(n=u[a]).from||{},i=t.datum._facetID,t.items[a]={group:t,_scaleRefs:{}},(s=n.type===g.GROUP?new p:new c).init(this._graph,n,t.items[a],this,t._id,i),this._children[t._id].push({builder:s,from:r.data||(r.mark?"vg_"+t._id+"_"+r.mark:i),type:g.MARK})}function _(e,t){var n=t.axes,r=t.axisItems,i=this;h(this._graph,this._def.axes,n,t),n.forEach(function(e,n){var a=i._def.axes[n].scale,s=e.def(),u=null;r[n]={group:t,axis:e,layer:s.layer},(u=s.type===g.GROUP?new p:new c).init(i._graph,s,r[n],i).dependency(o.SCALES,a),i._children[t._id].push({builder:u,type:g.AXIS,scale:a})})}function x(e,t){var n=t.legends,r=t.legendItems,i=this;d(this._graph,this._def.legends,n,t),n.forEach(function(e,n){var a=e.size()||e.shape()||e.fill()||e.stroke()||e.opacity(),s=e.def(),u=null;r[n]={group:t,legend:e},(u=s.type===g.GROUP?new p:new c).init(i._graph,s,r[n],i).dependency(o.SCALES,a),i._children[t._id].push({builder:u,type:g.LEGEND,scale:a})})}m.init=function(e,t){var n,i=this;this._scaler=new a(e),(t.scales||[]).forEach(function(t){t=i.scale(n=t.name,new f(e,t,i)),i.scale(n+":prev",t),i._scaler.addListener(t)}),this._recursor=new a(e),this._recursor.evaluate=function(e){var t,n,i,a,o,s,u,l=this,c=r.array(this._def.marks).length>0,f=r.array(this._def.axes).length>0,h=r.array(this._def.legends).length>0,d=!1;for(t=0,a=e.add.length;t<a;++t)o=e.add[t],c&&y.call(this,e,o),f&&_.call(this,e,o),h&&x.call(this,e,o);for(t=e.add.length-1;t>=0;--t)for(o=e.add[t],n=this._children[o._id].length-1;n>=0;--n)(i=this._children[o._id][n]).builder.connect(),s=i.builder.pipeline(),u=i.builder._def,d=(d=(d=(d=u.type!==g.GROUP)&&void 0!==this._graph.data(i.from))&&1===s[s.length-1].listeners().length)&&u.from&&!u.from.mark,i.inline=d,d?this._graph.evaluate(e,i.builder):this._recursor.addListener(i.builder);function p(e){e.type!=g.MARK||e.inline||void 0===l._graph.data(e.from)||l._recursor.removeListener(e.builder)}function m(t){var n=t.scale();e.scales[n.scaleName]&&t.reset().def()}function v(t){var n=t.size()||t.shape()||t.fill()||t.stroke()||t.opacity();e.scales[n.scaleName]&&t.reset().def()}for(t=0,a=e.mod.length;t<a;++t)o=e.mod[t],c&&l._children[o._id].forEach(p),f&&o.axes.forEach(m),h&&o.legends.forEach(v);function b(e){l._recursor.removeListener(e.builder),e.builder.disconnect()}for(t=0,a=e.rem.length;t<a;++t)o=e.rem[t],l._children[o._id].forEach(b),delete l._children[o._id];return e}.bind(this);var s=(t.axes||[]).reduce(function(e,t){return e[t.scale]=1,e},{});return s=(t.legends||[]).reduce(function(e,t){return e[t.size||t.shape||t.fill||t.stroke||t.opacity]=1,e},s),this._recursor.dependency(o.SCALES,r.keys(s)),this._collector=new u(e),c.prototype.init.apply(this,arguments)},m.evaluate=function(){var e=c.prototype.evaluate.apply(this,arguments),t=this._graph,n=this,i=this._scales,a=this._mark.items;if(e.mod.length<a.length){var o=r.keys(i).some(function(t){return i[t].reevaluate(e)});!o&&this._def.axes&&(o=this._def.axes.reduce(function(t,n){return t||e.scales[n.scale]},!1)),!o&&this._def.legends&&(o=this._def.legends.reduce(function(t,n){return t||e.scales[n.size||n.shape||n.fill||n.stroke]},!1)),o&&(e.mod=e.mod.concat(s.idFilter(a,e.mod,e.add,e.rem)))}return e.add.forEach(function(t){(function(e,t){l.debug(e,["building group",t._id]),t._scales=t._scales||{},t.scale=v.bind(t),t.items=t.items||[],this._children[t._id]=this._children[t._id]||[],t.axes=t.axes||[],t.axisItems=t.axisItems||[],t.legends=t.legends||[],t.legendItems=t.legendItems||[],this._graph.group(t._id,t)}).call(n,e,t)}),e.rem.forEach(function(e){t.group(e._id,null)}),e},m.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]},m.disconnect=function(){var e=this;return r.keys(e._children).forEach(function(t){e._children[t].forEach(function(t){e._recursor.removeListener(t.builder),t.builder.disconnect()})}),e._children={},c.prototype.disconnect.call(this)},m.child=function(e,t){for(var n,r=this._children[t],i=0,a=r.length;i<a&&((n=r[i]).type!=g.MARK||n.builder._def.name!=e);++i);return n.builder},e.exports=p},BO8z:function(e,t,n){var r=n("Hqva"),i=n("J731"),a=n("4JPs");function o(e){return a.prototype.init.call(this,e),a.addParameters(this,{test:{type:"expr"}}),this._skip={},this.router(!0)}var s=o.prototype=Object.create(a.prototype);s.constructor=o,s.transform=function(e){i.debug(e,["filtering"]);var t=r.ChangeSet.create(e),n=this._skip,a=this.param("test");return e.rem.forEach(function(e){1!==n[e._id]?t.rem.push(e):n[e._id]=0}),e.add.forEach(function(e){a(e)?t.add.push(e):n[e._id]=1}),e.mod.forEach(function(e){var r=a(e),i=1===n[e._id];r&&i?(n[e._id]=0,t.add.push(e)):r&&!i?t.mod.push(e):!r&&i||(t.rem.push(e),n[e._id]=1)}),t},e.exports=o,o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Filter transform",description:"Filters elements from a data set to remove unwanted items.",type:"object",properties:{type:{enum:["filter"]},test:{type:"string",description:"A string containing an expression (in JavaScript syntax) for the filter predicate."}},additionalProperties:!1,required:["type","test"]}},BONk:function(e,t,n){var r=n("81R7"),i=n("lnKO"),a=n("WFOa"),o=n("zhsD"),s=n("3Scv"),u=n("pfe9"),l=u.parse,c=u.render,f=o.path.area,h=o.path.line,d=Math.PI/2,p=Math.sqrt(3),g=Math.tan(30*Math.PI/180),m=null,v=r();function y(e,t){return e.stroke&&0!==e.opacity&&0!==e.stokeOpacity&&t.expand(null!=e.strokeWidth?e.strokeWidth:1),t}function _(e,t,n,r,i){return null==t?n.set(0,0,0,0):(c(v.bounds(n),t,r,i),y(e,n)),n}function x(e,t,n){var r,i,o=m||(m=a.instance(1,1).getContext("2d")),u=s.size(e),l=e.align,c=e.radius||0,f=e.x||0,h=e.y||0,d=e.dx||0,p=(e.dy||0)+s.offset(e)-Math.round(.8*u);return c&&(i=(e.theta||0)-Math.PI/2,f+=c*Math.cos(i),h+=c*Math.sin(i)),o.font=s.font(e),r=o.measureText(s.value(e.text)).width,"center"===l?d-=r/2:"right"===l&&(d-=r),t.set(d+=f,p+=h,d+r,p+u),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,f,h),t.expand(n?0:1)}function b(e,t,n){var r,i,a=e.axisItems||[],o=e.items||[],s=e.legendItems||[];if(!e.clip){for(r=0,i=a.length;r<i;++r)t.union(a[r].bounds);for(r=0,i=o.length;r<i;++r)o[r].bounds&&t.union(o[r].bounds);if(n)for(r=0,i=s.length;r<i;++r)t.union(s[r].bounds)}return(e.clip||e.width||e.height)&&y(e,t.add(0,0).add(e.width||0,e.height||0)),t.translate(e.x||0,e.y||0)}var M={group:b,symbol:function(e,t){var n,r,i,a,o=null!=e.size?e.size:100,s=e.x||0,u=e.y||0;switch(e.shape){case"cross":r=3*Math.sqrt(o/5)/2,t.set(s-r,u-r,s+r,u+r);break;case"diamond":i=(a=Math.sqrt(o/(2*g)))*g,t.set(s-i,u-a,s+i,u+a);break;case"square":n=(r=Math.sqrt(o))/2,t.set(s-n,u-n,s+n,u+n);break;case"triangle-down":case"triangle-up":a=(i=Math.sqrt(o/p))*p/2,t.set(s-i,u-a,s+i,u+a);break;default:n=Math.sqrt(o/Math.PI),t.set(s-n,u-n,s+n,u+n)}return y(e,t)},image:function(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return n-="center"===e.align?i/2:"right"===e.align?i:0,r-="middle"===e.baseline?a/2:"bottom"===e.baseline?a:0,t.set(n,r,n+i,r+a)},rect:function(e,t){var n,r;return y(e,t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0))},rule:function(e,t){var n,r;return y(e,t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r))},arc:function(e,t){var n,r,i,a,o,s,u,l,c,f=e.x||0,h=e.y||0,p=e.innerRadius||0,g=e.outerRadius||0,m=(e.startAngle||0)-d,v=(e.endAngle||0)-d,_=1/0,x=-1/0,b=1/0,M=-1/0,k=[m,v],S=m-m%d;for(r=0;r<4&&S<v;++r,S+=d)k.push(S);for(r=0,i=k.length;r<i;++r)n=k[r],s=p*(a=Math.cos(n)),l=g*a,u=p*(o=Math.sin(n)),c=g*o,_=Math.min(_,s,l),x=Math.max(x,s,l),b=Math.min(b,u,c),M=Math.max(M,u,c);return y(e,t.set(f+_,h+b,f+x,h+M))},text:x,path:function(e,t){var n=e.path?e.pathCache||(e.pathCache=l(e.path)):null;return _(e,n,t,e.x,e.y)},area:function(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=l(f(n)));return _(r,i,t)},line:function(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=l(h(n)));return _(r,i,t)}};function k(e,t,n){var r=e.mark.marktype;(t=t||M[r]).nest&&(e=e.mark);var a=e.bounds,o=e["bounds:prev"]||(e["bounds:prev"]=new i);return a?(o.clear().union(a),a.clear()):e.bounds=new i,t(e,e.bounds,n),a||o.clear().union(e.bounds),e.bounds}M.area.nest=!0,M.line.nest=!0;var S={mark:null};e.exports={mark:function(e,t,n){var r,a,o,s=e.marktype,u=M[s],l=e.items,c=l&&l.length;if(u.nest)return o=k(c?l[0]:(S.mark=e,S),u,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new i,c)for(r=0,a=l.length;r<a;++r)t.union(k(l[r],u,n));return e.bounds=t},item:k,text:x,group:b}},C8zq:function(e,t,n){e.exports={aggregate:n("3Y21"),bin:n("RdYp"),cross:n("juLC"),countpattern:n("6+LD"),linkpath:n("rCVn"),facet:n("Uikm"),filter:n("BO8z"),fold:n("MZ+b"),force:n("pKLr"),formula:n("TXaq"),geo:n("ct8e"),geopath:n("snBf"),hierarchy:n("Sgrz"),impute:n("P7vC"),lookup:n("ec8D"),pie:n("58eP"),rank:n("yLCL"),sort:n("/lc5"),stack:n("wLy+"),treeify:n("ei6W"),treemap:n("Aj/a"),voronoi:n("3C/O"),wordcloud:n("GXXi")}},CXWl:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("LHV8").Gradient,o=n("h36N"),s=n("SbOu"),u=n("v0Fq");var l={left:"x1",right:"x2","top-left":"x1","top-right":"x2","bottom-left":"x1","bottom-right":"x2"};function c(e,t,n,r,i,a,o){var s,u=r?{}:t,c=t.mark.def,f=c.offset,h=c.orient,d=2*c.padding,p="left"===h?0:n.width,g=~~t.bounds.width()+(t.width?0:d),m=~~t.bounds.height()+(t.height?0:d),v=n._legendPositions||(n._legendPositions={right:.5,left:.5});if(u.x=.5,u.y=.5,u.width=g,u.height=m,"left"===h||"right"===h){u.y=v[h],v[h]+=m+c.margin;var y=n.axes,_=n.axisItems,x=l[h];for(s=0;s<y.length;++s)y[s].orient()===h&&(p=Math.max(p,Math.abs(_[s].bounds[x])))}switch(h){case"left":u.x-=p+f+g;break;case"right":u.x+=p+f;break;case"top-left":u.x+=f,u.y+=f;break;case"top-right":u.x+=n.width-g-f,u.y+=f;break;case"bottom-left":u.x+=f,u.y+=n.height-m-f;break;case"bottom-right":u.x+=n.width-g-f,u.y+=n.height-m-f}var b=e.baseline,M=0;for(s=0;s<n.legendItems.length;s++){M+=n.legendItems[s].bounds.height()+(t.height?0:d)}"middle"===b?u.y+=f+n.height/2-M/2:"bottom"===b&&(u.y+=f+n.height-M),r&&r.interpolate(t,u);var k=t.mark.def.properties.enter.encode;return k.call(k,t,n,r,i,a,o),!0}function f(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:e.titleColor},font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}e.exports=function(e){var t=null,n=null,h=null,d=null,p=null,g=null,m=null,v=null,y=null,_=null,x=e.config().legend,b=x.orient,M=x.offset,k=x.padding,S=[5],E={},A={},w={},T={},O={},N={titles:{},symbols:{},labels:{},gradient:{}},L={},C={};function R(){C.type=null}function I(e,t){return{data:e,index:t}}return L.def=function(){var l,L=t||n||h||d||p;return C.type||(C=L!==h&&L!==d||"ordinal"===(l=L.type)||"quantize"===l||"quantile"===l||"threshold"===l?function(a){var l,b,M,w,L,R,D,U,P,z,F,j,q,Y,$,H,W,V,X,G,Z,B=(w=t,L=n,R=h,D=d,U=p,P=i.extend(N.titles,f(x)),z=i.extend(N.symbols,{type:"symbol",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:(q=x).symbolShape},size:{value:q.symbolSize},stroke:{value:q.symbolColor},strokeWidth:{value:q.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}),F=i.extend(N.labels,{type:"text",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:(j=x).labelColor},font:{value:j.labelFont},fontSize:{value:j.labelFontSize},align:{value:j.labelAlign},baseline:{value:j.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}),$=w,H=L,W=R,V=D,X=U,G=(Y=z).properties.enter,Z=Y.properties.update,$&&(G.size=Z.size={scale:$.scaleName,field:"data"}),H&&(G.shape=Z.shape={scale:H.scaleName,field:"data"}),W&&(G.fill=Z.fill={scale:W.scaleName,field:"data"}),V&&(G.stroke=Z.stroke={scale:V.scaleName,field:"data"}),X&&(Z.opacity={scale:X.scaleName,field:"data"}),i.extend(P.properties.update,T),i.extend(z.properties.update,A),i.extend(F.properties.update,O),P.properties.enter.x.value+=k,P.properties.enter.y.value+=k,F.properties.enter.x.offset+=k+1,z.properties.enter.x.offset=k+1,F.properties.update.x.offset+=k+1,z.properties.update.x.offset=k+1,i.extend(C,{type:"group",interactive:!1,properties:{enter:o(e,"group",E),legendPosition:{encode:c.bind(null,x),signals:[],scales:[],data:[],fields:[]}}}),C.marks=[P,z,F].map(function(t){return s(e,t)}),C),J=(null==m?a.ticks?a.ticks.apply(a,S):a.domain():m).map(I),Q=u.getTickFormat(a,J.length,y,v),K=r.range(J.length);t?(b=J.map(function(e){return Math.sqrt(t(e.data))}),M=r.max(b),b=b.reduce(function(e,t,n,r){return n>0&&(e[n]=e[n-1]+r[n-1]/2+5),e[n]+=t/2,e},[0]).map(Math.round)):(M=Math.round(Math.sqrt(x.symbolSize)),b=g||(l=O.fontSize)&&l.value+5||x.labelFontSize+5,b=K.map(function(e,t){return Math.round(M/2+t*b)}));var ee,te=k;_&&(ee=T.fontSize,te+=5+(ee&&ee.value||x.titleFontSize));for(var ne=0,re=b.length;ne<re;++ne)b[ne]+=te;B.scales=B.scales||[{}],i.extend(B.scales[0],{name:"legend",type:"ordinal",points:!0,domain:K,range:b});var ie=(_?[_]:[]).map(I);return J.forEach(function(e){e.label=Q(e.data),e.offset=M}),B.marks[0].from=function(){return ie},B.marks[1].from=function(){return J},B.marks[2].from=B.marks[1].from,B}(L):function(t){var n=function(t){var n,r,u=i.extend(N.titles,f(x)),l=i.extend(N.gradient,{type:"rect",interactive:!1,properties:{enter:{x:{value:0},y:{value:0},width:{value:(r=x).gradientWidth},height:{value:r.gradientHeight},stroke:{value:r.gradientStrokeColor},strokeWidth:{value:r.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}),h=i.extend(N.labels,{type:"text",interactive:!1,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:(n=x).labelColor},font:{value:n.labelFont},fontSize:{value:n.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}),d=new a,p=t.domain(),g=p[0],m=p[p.length-1],v=t.copy().domain([g,m]).range([0,1]),y="linear"!==t.type&&t.ticks?t.ticks.call(t,15):p;g!==y[0]&&y.unshift(g),m!==y[y.length-1]&&y.push(m);for(var b=0,M=y.length;b<M;++b)d.stop(v(y[b]),t(y[b]));l.properties.enter.fill={value:d},i.extend(u.properties.update,T),i.extend(l.properties.update,w),i.extend(h.properties.update,O);var S=l.properties,A=w.height,L=A&&A.value||S.enter.height.value;if(h.properties.enter.y.value=L,h.properties.update.y.value=L,_){var R=u.properties,I=T.fontSize,D=4+(I&&I.value||R.enter.fontSize.value);l.properties.enter.y.value+=D,h.properties.enter.y.value+=D,l.properties.update.y.value+=D,h.properties.update.y.value+=D}return u.properties.enter.x.value+=k,u.properties.enter.y.value+=k,l.properties.enter.x.value+=k,l.properties.enter.y.value+=k,h.properties.enter.y.value+=k,l.properties.update.x.value+=k,l.properties.update.y.value+=k,h.properties.update.y.value+=k,i.extend(C,{type:"group",interactive:!1,properties:{enter:o(e,"group",E),legendPosition:{encode:c.bind(null,x),signals:[],scales:[],data:[],fields:[]}}}),C.marks=[u,l,h].map(function(t){return s(e,t)}),C}(t),r=t.domain(),l=(null==m?r:m).map(I),h=w.width&&w.width.value||x.gradientWidth,d=u.getTickFormat(t,l.length,y,v);n.scales=n.scales||[{}];var p=i.extend(n.scales[0],{name:"legend",type:t.type,round:!0,zero:!1,domain:[r[0],r[r.length-1]],range:[k,h+k]});"pow"===t.type&&(p.exponent=t.exponent());var g=(_?[_]:[]).map(I);return l.forEach(function(e,t){e.label=d(e.data),e.align=t==l.length-1?"right":0===t?"left":"center"}),n.marks[0].from=function(){return g},n.marks[1].from=function(){return[1]},n.marks[2].from=function(){return l},n}(L)),C.orient=b,C.offset=M,C.padding=k,C.margin=x.margin,C},L.size=function(e){return arguments.length?(t!==e&&(t=e,R()),L):t},L.shape=function(e){return arguments.length?(n!==e&&(n=e,R()),L):n},L.fill=function(e){return arguments.length?(h!==e&&(h=e,R()),L):h},L.stroke=function(e){return arguments.length?(d!==e&&(d=e,R()),L):d},L.opacity=function(e){return arguments.length?(p!==e&&(p=e,R()),L):p},L.title=function(e){return arguments.length?(_!==e&&(_=e,R()),L):_},L.format=function(e){return arguments.length?(v!==e&&(v=e,R()),L):v},L.formatType=function(e){return arguments.length?(y!==e&&(y=e,R()),L):y},L.spacing=function(e){return arguments.length?(g!==+e&&(g=+e,R()),L):g},L.orient=function(e){return arguments.length?(b=e in l?e+"":x.orient,L):b},L.offset=function(e){return arguments.length?(M=+e,L):M},L.values=function(e){return arguments.length?(m=e,L):m},L.legendProperties=function(e){return arguments.length?(E=e,L):E},L.symbolProperties=function(e){return arguments.length?(A=e,L):A},L.gradientProperties=function(e){return arguments.length?(w=e,L):w},L.labelProperties=function(e){return arguments.length?(O=e,L):O},L.titleProperties=function(e){return arguments.length?(T=e,L):T},L.reset=function(){return R(),L},L}},CiyH:function(e,t,n){var r=n("zicW"),i=n("UaGl"),a=n("NNYs"),o=n("8NMF");function s(e,t,n){var i=e.schema;i&&(i.refs&&r.extend(n.refs,i.refs),i.defs&&r.extend(n.defs,i.defs))}e.exports=function(e){var t=null;return(e=e||{}).url?t=r.json(r.extend({url:e.url},o.load)):(t={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"},r.keys(i).forEach(function(e){s(i[e],0,t)}),s(a,0,t)),e.properties&&r.keys(e.properties).forEach(function(n){t.defs.propset.properties[n]={$ref:"#/refs/"+e.properties[n]+"Value"}}),e.propertySets&&r.keys(e.propertySets).forEach(function(e){t.defs.mark.properties.properties.properties[e]={$ref:"#/defs/propset"}}),t}},D3vM:function(e,t){var n=e.exports={ALL:["data","fields","scales","signals"]};n.ALL.forEach(function(e){n[e.toUpperCase()]=e})},DUWk:function(e,t,n){var r=n("zicW"),i=n("C8zq");function a(e,t){var n,a=i[t.type];if(!a)throw new Error('"'+t.type+'" is not a valid transformation');return n=new a(e),t.output&&n.output(t.output),r.keys(t).forEach(function(e){"type"!==e&&"output"!==e&&n.param(e,t[e])}),n}e.exports=a;var o=r.keys(i).filter(function(e){return i[e].schema}),s=o.reduce(function(e,t){return e[t+"Transform"]=i[t].schema,e},{});a.schema={defs:r.extend(s,{transform:{type:"array",items:{oneOf:o.map(function(e){return{$ref:"#/defs/"+e+"Transform"}})}}})}},F9eC:function(e,t,n){"use strict";var r=n("Py5Z"),i=n("QSMf"),a=n("j8cM"),o=n("f2i1"),s=n("P/aK"),u=n("QSMf"),l=n("ZAUf");function c(e){if(h(e)){var t=i.has(e.encoding,s.ROW),n=i.has(e.encoding,s.COLUMN);return t||n}return!1}function f(e){return!!h(e)&&!c(e)}function h(e){return void 0!==e.mark}function d(e){var t=i.has(e.encoding,s.ROW),n=i.has(e.encoding,s.COLUMN),r=l.duplicate(e.encoding);return delete r.column,delete r.row,l.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},{data:e.data},e.transform?{transform:e.transform}:{},{facet:l.extend(t?{row:e.encoding.row}:{},n?{column:e.encoding.column}:{}),spec:p({mark:e.mark,encoding:r})},e.config?{config:e.config}:{})}function p(e){var t=e.config,n=t&&t.overlay,o=n&&e.mark===a.AREA&&l.contains([r.AreaOverlay.LINEPOINT,r.AreaOverlay.LINE],n.area),s=n&&(n.line&&e.mark===a.LINE||n.area===r.AreaOverlay.LINEPOINT&&e.mark===a.AREA);return e.mark===a.ERRORBAR?m(e):i.isRanged(e.encoding)?g(e):y(e)?e:s||o?v(e,s,o):e}function g(e){if(e.encoding){var t=i.has(e.encoding,s.X),n=i.has(e.encoding,s.Y),r=i.has(e.encoding,s.X2),a=i.has(e.encoding,s.Y2);if(r&&!t||a&&!n){var o=l.duplicate(e);return r&&!t&&(o.encoding.x=o.encoding.x2,delete o.encoding.x2),a&&!n&&(o.encoding.y=o.encoding.y2,delete o.encoding.y2),o}}return e}function m(e){var t=l.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},e.data?{data:e.data}:{},e.transform?{transform:e.transform}:{},e.config?{config:e.config}:{},{layers:[]});if(!e.encoding)return t;if(e.mark===a.ERRORBAR){var n={mark:a.RULE,encoding:l.extend(e.encoding.x?{x:l.duplicate(e.encoding.x)}:{},e.encoding.y?{y:l.duplicate(e.encoding.y)}:{},e.encoding.x2?{x2:l.duplicate(e.encoding.x2)}:{},e.encoding.y2?{y2:l.duplicate(e.encoding.y2)}:{},{})},r={mark:a.TICK,encoding:l.extend(e.encoding.x?{x:l.duplicate(e.encoding.x)}:{},e.encoding.y?{y:l.duplicate(e.encoding.y)}:{},e.encoding.size?{size:l.duplicate(e.encoding.size)}:{},{})},i={mark:a.TICK,encoding:l.extend({x:e.encoding.x2?l.duplicate(e.encoding.x2):l.duplicate(e.encoding.x),y:e.encoding.y2?l.duplicate(e.encoding.y2):l.duplicate(e.encoding.y)},e.encoding.size?{size:l.duplicate(e.encoding.size)}:{})};t.layers.push(p(n)),t.layers.push(p(r)),t.layers.push(p(i))}return t}function v(e,t,n){var i=["name","description","data","transform"],o=l.omit(e,i.concat("config")),s=l.duplicate(e.config);delete s.overlay;var u=l.extend(l.pick(e,i),{layers:[o]},l.keys(s).length>0?{config:s}:{});if(n){var c=l.duplicate(o);c.mark=a.LINE;var f=l.extend({},r.defaultOverlayConfig.lineStyle,e.config.overlay.lineStyle);l.keys(f).length>0&&(c.config={mark:f}),u.layers.push(c)}if(t){var h=l.duplicate(o);h.mark=a.POINT;f=l.extend({},r.defaultOverlayConfig.pointStyle,e.config.overlay.pointStyle);l.keys(f).length>0&&(h.config={mark:f}),u.layers.push(h)}return u}function y(e){return null!==o.stack(e.mark,e.encoding,e.config)}t.isFacetSpec=function(e){return void 0!==e.facet},t.isExtendedUnitSpec=c,t.isUnitSpec=f,t.isSomeUnitSpec=h,t.isLayerSpec=function(e){return void 0!==e.layers},t.normalize=function(e){return c(e)?d(e):f(e)?p(e):e},t.normalizeExtendedUnitSpec=d,t.normalizeUnitSpec=p,t.normalizeRangedUnitSpec=g,t.normalizeErrorBarUnitSpec=m,t.normalizeOverlay=v,t.alwaysNoOcclusion=function(e){return u.isAggregate(e.encoding)},t.fieldDefs=function(e){return u.fieldDefs(e.encoding)},t.getCleanSpec=function(e){return e},t.isStacked=y,t.transpose=function(e){var t=e.encoding,n=l.duplicate(e.encoding);return n.x=t.y,n.y=t.x,n.row=t.column,n.column=t.row,e.encoding=n,e}},FmT5:function(e,t,n){"use strict";var r=n("P/aK");t.autoMaxBins=function(e){switch(e){case r.ROW:case r.COLUMN:case r.SIZE:case r.SHAPE:return 6;default:return 10}}},"Fw/k":function(e,t,n){"use strict";var r;(r=t.ScaleType||(t.ScaleType={}))[r.LINEAR="linear"]="LINEAR",r[r.LOG="log"]="LOG",r[r.POW="pow"]="POW",r[r.SQRT="sqrt"]="SQRT",r[r.QUANTILE="quantile"]="QUANTILE",r[r.QUANTIZE="quantize"]="QUANTIZE",r[r.ORDINAL="ordinal"]="ORDINAL",r[r.TIME="time"]="TIME",r[r.UTC="utc"]="UTC";var i;t.ScaleType;(i=t.NiceTime||(t.NiceTime={}))[i.SECOND="second"]="SECOND",i[i.MINUTE="minute"]="MINUTE",i[i.HOUR="hour"]="HOUR",i[i.DAY="day"]="DAY",i[i.WEEK="week"]="WEEK",i[i.MONTH="month"]="MONTH",i[i.YEAR="year"]="YEAR";t.NiceTime;t.defaultScaleConfig={round:!0,textBandWidth:90,bandSize:21,padding:1,useRawDomain:!1,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]},t.defaultFacetScaleConfig={round:!0,padding:16}},"G+HP":function(e,t,n){"use strict";var r=n("P/aK"),i=n("MtYt"),a=n("o+e1"),o=n("WJ2w");!function(e){e.markType=function(){return"text"},e.background=function(e){return{x:{value:0},y:{value:0},width:{field:{group:"width"}},height:{field:{group:"height"}},fill:{scale:e.scaleName(r.COLOR),field:e.field(r.COLOR,e.fieldDef(r.COLOR).type===o.ORDINAL?{prefn:"rank_"}:{})}}},e.properties=function(e){var t={};i.applyMarkConfig(t,e,["angle","align","baseline","dx","dy","font","fontWeight","fontStyle","radius","theta","text"]);var n=e.config(),s=e.fieldDef(r.TEXT);if(t.x=(h=e.encoding().x,d=e.scaleName(r.X),p=n,g=s,h&&h.field?{scale:d,field:a.field(h,{binSuffix:"_mid"})}:g&&g.type===o.QUANTITATIVE?{field:{group:"width"},offset:-5}:{value:p.scale.textBandWidth/2}),t.y=(l=e.encoding().y,c=e.scaleName(r.Y),f=n,l&&l.field?{scale:c,field:a.field(l,{binSuffix:"_mid"})}:{value:f.scale.bandSize/2}),t.fontSize=function(e,t,n){if(e){if(e.field)return{scale:t,field:a.field(e)};if(e.value)return{value:e.value}}return{value:n.mark.fontSize}}(e.encoding().size,e.scaleName(r.SIZE),n),t.text=function(e,t,n){if(e){if(e.field){if(o.QUANTITATIVE===e.type){var r=i.numberFormat(e,n.mark.format,n),s="number"+(r?":'"+r+"'":"");return{template:"{{"+a.field(e,{datum:!0})+" | "+s+"}}"}}return o.TEMPORAL===e.type?{template:i.timeTemplate(a.field(e,{datum:!0}),e.timeUnit,n.mark.format,n.mark.shortTimeLabels,n)}:{field:e.field}}if(e.value)return{value:e.value}}return{value:n.mark.text}}(e.encoding().text,e.scaleName(r.TEXT),n),!e.config().mark.applyColorToBackground||e.has(r.X)||e.has(r.Y))i.applyColorAndOpacity(t,e);else{t.fill={value:"black"};var u=e.config().mark.opacity;u&&(t.opacity={value:u})}var l,c,f;var h,d,p,g;return t}}(t.text||(t.text={}))},GXXi:function(e,t,n){var r=n("zicW"),i=n("Za4h"),a=n("NobO"),o=n("LHV8").canvas,s=n("gtuQ"),u=n("J731"),l=n("4JPs"),c=n("acp7");function f(e){return c.prototype.init.call(this,e),l.addParameters(this,{size:{type:"array<value>",default:n("MRce").size},text:{type:"field",default:"data"},rotate:{type:"field|value",default:0},font:{type:"field|value",default:{value:"sans-serif"}},fontSize:{type:"field|value",default:14},fontStyle:{type:"field|value",default:{value:"normal"}},fontWeight:{type:"field|value",default:{value:"normal"}},fontScale:{type:"array<value>",default:[10,50]},padding:{type:"value",default:1},spiral:{type:"value",default:"archimedean"}}),this._layout=a().canvas(o.instance),this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"},this.mutates(!0)}var h=f.prototype=Object.create(c.prototype);function d(e){return e&&e.accessor||e}function p(e){var t=Object.create(e);return t._tuple=e,t}h.constructor=f,h.batchTransform=function(e,t){u.debug(e,["wordcloud"]);var n,a,o=this._layout,l=this._output,c=this.param("fontSize"),f=c.accessor&&this.param("fontScale");c=c.accessor||i.functor(c),f.length&&(a=i.scale.sqrt().domain(r.extent(t,n=c)).range(f),c=function(e){return a(n(e))}),o.size(this.param("size")).text(d(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(d(this.param("rotate"))).font(d(this.param("font"))).fontStyle(d(this.param("fontStyle"))).fontWeight(d(this.param("fontWeight"))).fontSize(c).words(t.map(p)).on("end",function(e){var t,n,r,i,a=o.size(),u=a[0]>>1,c=a[1]>>1;for(r=0,i=e.length;r<i;++r)n=(t=e[r])._tuple,s.set(n,l.x,t.x+u),s.set(n,l.y,t.y+c),s.set(n,l.font,t.font),s.set(n,l.fontSize,t.size),s.set(n,l.fontStyle,t.style),s.set(n,l.fontWeight,t.weight),s.set(n,l.rotate,t.rotate)}).start();for(var h in l)e.fields[l[h]]=1;return e},e.exports=f;var g=n("fRRI");f.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Wordcloud transform",type:"object",properties:{type:{enum:["wordcloud"]},size:{description:"The dimensions of the wordcloud layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[900,500]},font:{description:"The font face to use for a word.",oneOf:[{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:"sans-serif"},fontStyle:{description:"The font style to use for a word.",oneOf:[{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:"normal"},fontWeight:{description:"The font weight to use for a word.",oneOf:[{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:"normal"},fontSize:{description:"The font size to use for a word.",oneOf:[{type:"number"},g.schema,{type:"string"},{$ref:"#/refs/signal"}],default:14},fontScale:{description:"The minimum and maximum scaled font sizes, or null to prevent scaling.",oneOf:[{type:"null"},{type:"array",minItems:2,maxItems:2,items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}}],default:[10,50]},rotate:{description:"The field or number to set the roration angle (in degrees).",oneOf:[{type:"number"},{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:0},text:{description:"The field containing the text to use for each word.",oneOf:[{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:"data"},spiral:{description:"The type of spiral used for positioning words, either 'archimedean' or 'rectangular'.",oneOf:[{enum:["archimedean","rectangular"]},g.schema,{$ref:"#/refs/signal"}],default:"archimedean"},padding:{description:"The padding around each word.",oneOf:[{type:"number"},g.schema,{$ref:"#/refs/signal"}],default:1},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},font:{type:"string",default:"layout_font"},fontSize:{type:"string",default:"layout_fontSize"},fontStyle:{type:"string",default:"layout_fontStyle"},fontWeight:{type:"string",default:"layout_fontWeight"},rotate:{type:"string",default:"layout_rotate"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},GXhC:function(e,t,n){var r,i,a,o,s=n("zF6n"),u=n("aZ75"),l=n("bZsP"),c=n("1/F5"),f=c,h=l,d=new Date(2e3,0,1);function p(e){return e.length>4&&"locale"+(e[0].toUpperCase()+e[1].toLowerCase()+e[3].toUpperCase()+e[4].toLowerCase())}function g(e){var t=s.isString(e)?c[p(e)]:c.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);f=t}function m(e){var t=s.isString(e)?l[p(e)]:l.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);h=t,r=i=a=o=null}e.exports={numberLocale:g,number:function(e){return f.format(e)},numberPrefix:function(e,t){return f.formatPrefix(e,t)},timeLocale:m,time:function(e){return h.format(e)},utc:function(e){return h.utcFormat(e)},locale:function(e){g(e),m(e)},auto:{number:function(e){var t=f.format(".1f")(1)[1];null==e&&(e=",");null==(e=c.formatSpecifier(e)).precision&&(e.precision=12);switch(e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return n=f.format(e),r=t,function(e){var t=n(e),i=t.indexOf(r);if(i<0)return t;for(var a=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(t,i),o=a<t.length?t.slice(a):"";--a>i;)if("0"!==t[a]){++a;break}return t.slice(0,a)+o};var n,r},linear:function(e,t,n){var r=function(e,t){e.length||(e=[0]);null==t&&(t=10);var n=e[0],r=e[e.length-1];r<n&&(o=r,r=n,n=o);var i=r-n||(t=1,n||r||1),a=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=i/t/a;o>=v?a*=10:o>=y?a*=5:o>=_&&(a*=2);return[Math.ceil(n/a)*a,Math.floor(r/a)*a+a/2,a]}(e,t);null==n&&(n=",f");switch((n=c.formatSpecifier(n)).type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=c.precisionPrefix(r[2],i)),f.formatPrefix(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=c.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=c.precisionFixed(r[2])-2*("%"===n.type))}return f.format(n)},time:function(){return e=h.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),l=e("%Y"),function(e){var c=+e;return(u.second(e)<c?t:u.minute(e)<c?n:u.hour(e)<c?r:u.day(e)<c?i:u.month(e)<c?u.week(e)<c?a:o:u.year(e)<c?s:l)(e)};var e,t,n,r,i,a,o,s,l},utc:function(){return e=h.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),l=e("%Y"),function(e){var c=+e;return(u.utcSecond(e)<c?t:u.utcMinute(e)<c?n:u.utcHour(e)<c?r:u.utcDay(e)<c?i:u.utcMonth(e)<c?u.utcWeek(e)<c?a:o:u.utcYear(e)<c?s:l)(e)};var e,t,n,r,i,a,o,s,l}},month:function(e,t){var n=t?i||(i=h.format("%b")):r||(r=h.format("%B"));return d.setMonth(e),n(d)},day:function(e,t){var n=t?o||(o=h.format("%a")):a||(a=h.format("%A"));return d.setMonth(0),d.setDate(2+e),n(d)},quarter:function(e){return Math.floor(e.getMonth()/3)+1},utcQuarter:function(e){return Math.floor(e.getUTCMonth()/3)+1}};var v=Math.sqrt(50),y=Math.sqrt(10),_=Math.sqrt(2)},H3bJ:function(e,t){e.exports=function(){"use strict";var e,t,n,r,i,a,o,s,u,l,c,f,h,d,p;function g(e,t){if(!e)throw new Error("ASSERT: "+t)}function m(e){return e>=48&&e<=57}function v(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function y(e){return"01234567".indexOf(e)>=0}function _(e){return 10===e||13===e||8232===e||8233===e}function x(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&a.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function b(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&a.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function M(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function k(){var e,t;for(0===u;u<f;)if(e=o.charCodeAt(u),32===(t=e)||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0)++u;else{if(!_(e))break;++u,13===e&&10===o.charCodeAt(u)&&++u,++l,c=u,!0}}function S(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(u<f&&v(o[u])))return"";r=o[u++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(i)}function E(){var e,t,n,r;for(t=0,"}"===(e=o[u])&&F({},i.UnexpectedToken,"ILLEGAL");u<f&&v(e=o[u++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&F({},i.UnexpectedToken,"ILLEGAL"),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function A(){var e,t;for(e=o.charCodeAt(u++),t=String.fromCharCode(e),92===e&&(117!==o.charCodeAt(u)&&F({},i.UnexpectedToken,"ILLEGAL"),++u,(e=S("u"))&&"\\"!==e&&x(e.charCodeAt(0))||F({},i.UnexpectedToken,"ILLEGAL"),t=e);u<f&&b(e=o.charCodeAt(u));)++u,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==o.charCodeAt(u)&&F({},i.UnexpectedToken,"ILLEGAL"),++u,(e=S("u"))&&"\\"!==e&&b(e.charCodeAt(0))||F({},i.UnexpectedToken,"ILLEGAL"),t+=e);return t}function w(){var t,n;return t=u,{type:1===(n=92===o.charCodeAt(u)?A():function(){var e,t;for(e=u++;u<f;){if(92===(t=o.charCodeAt(u)))return u=e,A();if(!b(t))break;++u}return o.slice(e,u)}()).length?e.Identifier:function(e){if(s&&M(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(n)?e.Keyword:"null"===n?e.NullLiteral:"true"===n||"false"===n?e.BooleanLiteral:e.Identifier,value:n,lineNumber:l,lineStart:c,start:t,end:u}}function T(){var t,n,r,a,s=u,f=o.charCodeAt(u),h=o[u];switch(f){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++u,p.tokenize&&(40===f?p.openParenToken=p.tokens.length:123===f&&(p.openCurlyToken=p.tokens.length)),{type:e.Punctuator,value:String.fromCharCode(f),lineNumber:l,lineStart:c,start:s,end:u};default:if(61===(t=o.charCodeAt(u+1)))switch(f){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return u+=2,{type:e.Punctuator,value:String.fromCharCode(f)+String.fromCharCode(t),lineNumber:l,lineStart:c,start:s,end:u};case 33:case 61:return u+=2,61===o.charCodeAt(u)&&++u,{type:e.Punctuator,value:o.slice(s,u),lineNumber:l,lineStart:c,start:s,end:u}}}return">>>="===(a=o.substr(u,4))?(u+=4,{type:e.Punctuator,value:a,lineNumber:l,lineStart:c,start:s,end:u}):">>>"===(r=a.substr(0,3))||"<<="===r||">>="===r?(u+=3,{type:e.Punctuator,value:r,lineNumber:l,lineStart:c,start:s,end:u}):h===(n=r.substr(0,2))[1]&&"+-<>&|".indexOf(h)>=0||"=>"===n?(u+=2,{type:e.Punctuator,value:n,lineNumber:l,lineStart:c,start:s,end:u}):"<>=!+-*%&|^/".indexOf(h)>=0?(++u,{type:e.Punctuator,value:h,lineNumber:l,lineStart:c,start:s,end:u}):void F({},i.UnexpectedToken,"ILLEGAL")}function O(){var t,n,r;if(g(m((r=o[u]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=u,t="","."!==r){if(t=o[u++],r=o[u],"0"===t){if("x"===r||"X"===r)return++u,function(t){for(var n="";u<f&&v(o[u]);)n+=o[u++];return 0===n.length&&F({},i.UnexpectedToken,"ILLEGAL"),x(o.charCodeAt(u))&&F({},i.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:l,lineStart:c,start:t,end:u}}(n);if(y(r))return function(t){for(var n="0"+o[u++];u<f&&y(o[u]);)n+=o[u++];return(x(o.charCodeAt(u))||m(o.charCodeAt(u)))&&F({},i.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:l,lineStart:c,start:t,end:u}}(n);r&&m(r.charCodeAt(0))&&F({},i.UnexpectedToken,"ILLEGAL")}for(;m(o.charCodeAt(u));)t+=o[u++];r=o[u]}if("."===r){for(t+=o[u++];m(o.charCodeAt(u));)t+=o[u++];r=o[u]}if("e"===r||"E"===r)if(t+=o[u++],"+"!==(r=o[u])&&"-"!==r||(t+=o[u++]),m(o.charCodeAt(u)))for(;m(o.charCodeAt(u));)t+=o[u++];else F({},i.UnexpectedToken,"ILLEGAL");return x(o.charCodeAt(u))&&F({},i.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseFloat(t),lineNumber:l,lineStart:c,start:n,end:u}}function N(){var t,n,r,a;return h=null,k(),t=u,n=function(){var e,t,n,r;for(g("/"===(e=o[u]),"Regular expression literal must start with a slash"),t=o[u++],n=!1,r=!1;u<f;)if(t+=e=o[u++],"\\"===e)_((e=o[u++]).charCodeAt(0))&&F({},i.UnterminatedRegExp),t+=e;else if(_(e.charCodeAt(0)))F({},i.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||F({},i.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),r=function(){var e,t,n,r;for(t="",n="";u<f&&b((e=o[u]).charCodeAt(0));)if(++u,"\\"===e&&u<f)if("u"===(e=o[u])){if(r=++u,e=S("u"))for(n+=e,t+="\\u";r<u;++r)t+=o[r];else u=r,n+="u",t+="\\u";j({},i.UnexpectedToken,"ILLEGAL")}else t+="\\",j({},i.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}(),a=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){if(parseInt(t,16)<=1114111)return"x";F({},i.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){F({},i.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}}(n.value,r.value),p.tokenize?{type:e.RegularExpression,value:a,regex:{pattern:n.value,flags:r.value},lineNumber:l,lineStart:c,start:t,end:u}:{literal:n.literal+r.literal,value:a,regex:{pattern:n.value,flags:r.value},start:t,end:u}}function L(){var e,t,n,r;return k(),e=u,t={start:{line:l,column:u-c}},n=N(),t.end={line:l,column:u-c},p.tokenize||(p.tokens.length>0&&(r=p.tokens[p.tokens.length-1]).range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||p.tokens.pop()),p.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,u],loc:t})),n}function C(){var t;return k(),u>=f?{type:e.EOF,lineNumber:l,lineStart:c,start:u,end:u}:x(t=o.charCodeAt(u))?w():40===t||41===t||59===t?T():39===t||34===t?function(){var t,n,r,a,s,h,d,p,m="",v=!1;for(d=l,p=c,g("'"===(t=o[u])||'"'===t,"String literal must starts with a quote"),n=u,++u;u<f;){if((r=o[u++])===t){t="";break}if("\\"===r)if((r=o[u++])&&_(r.charCodeAt(0)))++l,"\r"===r&&"\n"===o[u]&&++u,c=u;else switch(r){case"u":case"x":"{"===o[u]?(++u,m+=E()):(h=u,(s=S(r))?m+=s:(u=h,m+=r));break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:y(r)?(0!==(a="01234567".indexOf(r))&&(v=!0),u<f&&y(o[u])&&(v=!0,a=8*a+"01234567".indexOf(o[u++]),"0123".indexOf(r)>=0&&u<f&&y(o[u])&&(a=8*a+"01234567".indexOf(o[u++]))),m+=String.fromCharCode(a)):m+=r}else{if(_(r.charCodeAt(0)))break;m+=r}}return""!==t&&F({},i.UnexpectedToken,"ILLEGAL"),{type:e.StringLiteral,value:m,octal:v,startLineNumber:d,startLineStart:p,lineNumber:l,lineStart:c,start:n,end:u}}():46===t?m(o.charCodeAt(u+1))?O():T():m(t)?O():p.tokenize&&47===t?function(){var e,t;if(!(e=p.tokens[p.tokens.length-1]))return L();if("Punctuator"===e.type){if("]"===e.value)return T();if(")"===e.value)return!(t=p.tokens[p.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?T():L();if("}"===e.value){if(p.tokens[p.openCurlyToken-3]&&"Keyword"===p.tokens[p.openCurlyToken-3].type){if(!(t=p.tokens[p.openCurlyToken-4]))return T()}else{if(!p.tokens[p.openCurlyToken-4]||"Keyword"!==p.tokens[p.openCurlyToken-4].type)return T();if(!(t=p.tokens[p.openCurlyToken-5]))return L()}return T()}return L()}return"Keyword"===e.type&&"this"!==e.value?L():T()}():T()}function R(){var n,r,i,a;return k(),n={start:{line:l,column:u-c}},r=C(),n.end={line:l,column:u-c},r.type!==e.EOF&&(i=o.slice(r.start,r.end),a={type:t[r.type],value:i,range:[r.start,r.end],loc:n},r.regex&&(a.regex={pattern:r.regex.pattern,flags:r.regex.flags}),p.tokens.push(a)),r}function I(){var e;return u=(e=h).end,l=e.lineNumber,c=e.lineStart,h=void 0!==p.tokens?R():C(),u=e.end,l=e.lineNumber,c=e.lineStart,e}function D(){var e,t,n;e=u,t=l,n=c,h=void 0!==p.tokens?R():C(),u=e,l=t,c=n}function U(){this.line=l,this.column=u-c}function P(){u=h.start,h.type===e.StringLiteral?(l=h.startLineNumber,c=h.startLineStart):(l=h.lineNumber,c=h.lineStart),p.range&&(this.range=[u,0]),p.loc&&(this.loc=new function(){this.start=new U,this.end=null})}function z(t){p.range&&(this.range=[t.start,0]),p.loc&&(this.loc=new function(t){t.type===e.StringLiteral?this.start={line:t.startLineNumber,column:t.start-t.startLineStart}:this.start={line:t.lineNumber,column:t.start-t.lineStart},this.end=null}(t))}function F(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return g(t<r.length,"Message reference must be in range"),r[t]});throw"number"==typeof e.lineNumber?((n=new Error("Line "+e.lineNumber+": "+i)).index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-c+1):((n=new Error("Line "+l+": "+i)).index=u,n.lineNumber=l,n.column=u-c+1),n.description=i,n}function j(){try{F.apply(null,arguments)}catch(e){if(!p.errors)throw e;p.errors.push(e)}}function q(t){if(t.type===e.EOF&&F(t,i.UnexpectedEOS),t.type===e.NumericLiteral&&F(t,i.UnexpectedNumber),t.type===e.StringLiteral&&F(t,i.UnexpectedString),t.type===e.Identifier&&F(t,i.UnexpectedIdentifier),t.type===e.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(t.value))F(t,i.UnexpectedReserved);else if(s&&M(t.value))return void j(t,i.StrictReservedWord);F(t,i.UnexpectedToken,t.value)}F(t,i.UnexpectedToken,t.value)}function Y(t){var n=I();n.type===e.Punctuator&&n.value===t||q(n)}function $(t){if(p.errors){var n=h;n.type!==e.Punctuator&&n.value!==t?j(n,i.UnexpectedToken,n.value):I()}else Y(t)}function H(t){return h.type===e.Punctuator&&h.value===t}function W(t){return h.type===e.Keyword&&h.value===t}function V(){var t;59===o.charCodeAt(u)||H(";")?I():(t=l,k(),l===t&&(h.type===e.EOF||H("}")||q(h)))}function X(){var t,n=new P;return(t=I()).type===e.StringLiteral||t.type===e.NumericLiteral?(s&&t.octal&&j(t,i.StrictOctalLiteral),n.finishLiteral(t)):n.finishIdentifier(t.value)}(t={})[(e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",t[e.EOF]="<end>",t[e.Identifier]="Identifier",t[e.Keyword]="Keyword",t[e.NullLiteral]="Null",t[e.NumericLiteral]="Numeric",t[e.Punctuator]="Punctuator",t[e.StringLiteral]="String",t[e.RegularExpression]="RegularExpression",n={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},r={Data:1,Get:2,Set:4},i={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},a={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},z.prototype=P.prototype={finish:function(){p.range&&(this.range[1]=u),p.loc&&(this.loc.end=new U,p.source&&(this.loc.source=p.source))},finishArrayExpression:function(e){return this.type=n.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,r){return this.type=n.AssignmentExpression,this.operator=e,this.left=t,this.right=r,this.finish(),this},finishBinaryExpression:function(e,t,r){return this.type="||"===e||"&&"===e?n.LogicalExpression:n.BinaryExpression,this.operator=e,this.left=t,this.right=r,this.finish(),this},finishCallExpression:function(e,t){return this.type=n.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,r){return this.type=n.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r,this.finish(),this},finishExpressionStatement:function(e){return this.type=n.ExpressionStatement,this.expression=e,this.finish(),this},finishIdentifier:function(e){return this.type=n.Identifier,this.name=e,this.finish(),this},finishLiteral:function(e){return this.type=n.Literal,this.value=e.value,this.raw=o.slice(e.start,e.end),e.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,r){return this.type=n.MemberExpression,this.computed="["===e,this.object=t,this.property=r,this.finish(),this},finishObjectExpression:function(e){return this.type=n.ObjectExpression,this.properties=e,this.finish(),this},finishProgram:function(e){return this.type=n.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,r){return this.type=n.Property,this.key=t,this.value=r,this.kind=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type=n.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this}};var G={if:1,this:1};function Z(){var t,a,o,u,l;if(H("("))return Y("("),++d.parenthesisCount,l=re(),Y(")"),l;if(H("["))return function(){var e=[],t=new P;for(Y("[");!H("]");)H(",")?(I(),e.push(null)):(e.push(ne()),H("]")||Y(","));return I(),t.finishArrayExpression(e)}();if(H("{"))return function(){var t,a,o,u,l,c,f,d,p,g=[],m={},v=String,y=new P;for(Y("{");!H("}");)l=void 0,c=void 0,f=void 0,d=void 0,p=void 0,p=new P,a=(t=(l=h).type===e.Identifier?(f=X(),Y(":"),d=ne(),p.finishProperty("init",f,d)):l.type!==e.EOF&&l.type!==e.Punctuator?(c=X(),Y(":"),d=ne(),p.finishProperty("init",c,d)):void q(l)).key.type===n.Identifier?t.key.name:v(t.key.value),u="init"===t.kind?r.Data:"get"===t.kind?r.Get:r.Set,o="$"+a,Object.prototype.hasOwnProperty.call(m,o)?(m[o]===r.Data?s&&u===r.Data?j({},i.StrictDuplicateProperty):u!==r.Data&&j({},i.AccessorDataProperty):u===r.Data?j({},i.AccessorDataProperty):m[o]&u&&j({},i.AccessorGetSet),m[o]|=u):m[o]=u,g.push(t),H("}")||$(",");return Y("}"),y.finishObjectExpression(g)}();if(t=h.type,u=new P,t===e.Identifier||G[h.value])o=u.finishIdentifier(I().value);else if(t===e.StringLiteral||t===e.NumericLiteral)s&&h.octal&&j(h,i.StrictOctalLiteral),o=u.finishLiteral(I());else{if(t===e.Keyword)throw new Error("Disabled.");t===e.BooleanLiteral?((a=I()).value="true"===a.value,o=u.finishLiteral(a)):t===e.NullLiteral?((a=I()).value=null,o=u.finishLiteral(a)):H("/")||H("/=")?(o=void 0!==p.tokens?u.finishLiteral(L()):u.finishLiteral(N()),D()):q(I())}return o}function B(){var e=[];if(Y("("),!H(")"))for(;u<f&&(e.push(ne()),!H(")"));)$(",");return Y(")"),e}function J(){var t,n,r=new P;return t=I(),(n=t).type!==e.Identifier&&n.type!==e.Keyword&&n.type!==e.BooleanLiteral&&n.type!==e.NullLiteral&&q(t),r.finishIdentifier(t.value)}function Q(){var t,n,r,i,a=function(){var e,t,n,r,i,a=d.allowIn;for(r=h,d.allowIn=!0,e=Z();;)if(H("."))Y("."),n=J(),e=new z(r).finishMemberExpression(".",e,n);else if(H("("))t=B(),e=new z(r).finishCallExpression(e,t);else{if(!H("["))break;i=void 0,Y("["),i=re(),Y("]"),n=i,e=new z(r).finishMemberExpression("[",e,n)}return d.allowIn=a,e}();if(h.type===e.Punctuator&&(H("++")||H("--"))&&(t=u,n=l,r=c,k(),i=l!==n,u=t,l=n,c=r,!i))throw new Error("Disabled.");return a}function K(){var t,n,r;if(h.type!==e.Punctuator&&h.type!==e.Keyword)n=Q();else{if(H("++")||H("--"))throw new Error("Disabled.");if(H("+")||H("-")||H("~")||H("!"))r=h,t=I(),n=K(),n=new z(r).finishUnaryExpression(t.value,n);else{if(W("delete")||W("void")||W("typeof"))throw new Error("Disabled.");n=Q()}}return n}function ee(t,n){var r=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function te(){var e,t,n,r,i;return i=h,e=function(){var e,t,n,r,i,a,o,s,u,l;if(e=h,u=K(),0===(i=ee(r=h,d.allowIn)))return u;for(r.prec=i,I(),t=[e,h],a=[u,r,o=K()];(i=ee(h,d.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),t.pop(),n=new z(t[t.length-1]).finishBinaryExpression(s,u,o),a.push(n);(r=I()).prec=i,a.push(r),t.push(h),n=K(),a.push(n)}for(n=a[l=a.length-1],t.pop();l>1;)n=new z(t.pop()).finishBinaryExpression(a[l-1].value,a[l-2],n),l-=2;return n}(),H("?")&&(I(),t=d.allowIn,d.allowIn=!0,n=ne(),d.allowIn=t,Y(":"),r=ne(),e=new z(i).finishConditionalExpression(e,n,r)),e}function ne(){return d.parenthesisCount,h,h,te()}function re(){var e=ne();if(H(","))throw new Error("Disabled.");return e}function ie(){var t,n,r,i,a=h.type;if(a===e.EOF&&q(h),a===e.Punctuator&&"{"===h.value)throw new Error("Disabled.");if(n=new P,a===e.Punctuator)switch(h.value){case";":throw new Error("Disabled.");case"(":return r=n,i=re(),V(),r.finishExpressionStatement(i)}else if(a===e.Keyword)throw new Error("Disabled.");return t=re(),V(),n.finishExpressionStatement(t)}function ae(){if(h.type===e.Keyword)switch(h.value){case"const":case"let":case"function":throw new Error("Disabled.");default:return ie()}if(h.type!==e.EOF)return ie()}function oe(){var t,r;return k(),D(),r=new P,s=!0,t=function(){for(var t,r,a,l=[];u<f&&(r=h).type===e.StringLiteral&&(t=ae(),l.push(t),t.expression.type===n.Literal);)"use strict"===o.slice(r.start+1,r.end-1)?(s=!0,a&&j(a,i.StrictOctalLiteral)):!a&&r.octal&&(a=r);for(;u<f&&void 0!==(t=ae());)l.push(t);return l}(),r.finishProgram(t)}function se(){var e,t,n,r=[];for(e=0;e<p.tokens.length;++e)n={type:(t=p.tokens[e]).type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),p.range&&(n.range=t.range),p.loc&&(n.loc=t.loc),r.push(n);p.tokens=r}return{tokenize:function(t,n){var r,i;r=String,"string"==typeof t||t instanceof String||(t=r(t)),u=0,l=(o=t).length>0?1:0,c=0,f=o.length,h=null,d={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},p={},(n=n||{}).tokens=!0,p.tokens=[],p.tokenize=!0,p.openParenToken=-1,p.openCurlyToken=-1,p.range="boolean"==typeof n.range&&n.range,p.loc="boolean"==typeof n.loc&&n.loc,"boolean"==typeof n.tolerant&&n.tolerant&&(p.errors=[]);try{if(D(),h.type===e.EOF)return p.tokens;for(I();h.type!==e.EOF;)try{I()}catch(e){if(p.errors){p.errors.push(e);break}throw e}se(),i=p.tokens,void 0!==p.errors&&(i.errors=p.errors)}catch(e){throw e}finally{p={}}return i},parse:function(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),u=0,l=(o=e).length>0?1:0,c=0,f=o.length,h=null,d={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},p={},void 0!==t&&(p.range="boolean"==typeof t.range&&t.range,p.loc="boolean"==typeof t.loc&&t.loc,p.loc&&null!==t.source&&void 0!==t.source&&(p.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(p.tokens=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(p.errors=[]));try{n=oe(),void 0!==p.tokens&&(se(),n.tokens=p.tokens),void 0!==p.errors&&(n.errors=p.errors)}catch(e){throw e}finally{p={}}return n}}}()},HES2:function(e,t,n){"use strict";var r=n("P/aK"),i=n("o+e1"),a=n("MtYt");!function(e){e.markType=function(){return"line"},e.properties=function(e){var t={},n=e.config();t.x=(u=e.encoding().x,l=e.scaleName(r.X),u&&u.field?{scale:l,field:i.field(u,{binSuffix:"_mid"})}:{value:0}),t.y=(o=e.encoding().y,s=e.scaleName(r.Y),o&&o.field?{scale:s,field:i.field(o,{binSuffix:"_mid"})}:{field:{group:"height"}});var o,s;var u,l;var c=(f=e.encoding().size,h=n,f&&void 0!==f.value?{value:f.value}:{value:h.mark.lineSize});var f,h;return c&&(t.strokeWidth=c),a.applyColorAndOpacity(t,e),a.applyMarkConfig(t,e,["interpolate","tension"]),t},e.labels=function(e){}}(t.line||(t.line={}))},HaGw:function(e,t,n){var r=n("gWW/");e.exports={draw:function(e,t,n){if(t.items&&t.items.length)for(var i,a,o,s,u,l,c=t.items,f=0,h=c.length;f<h;++f)i=c[f],n&&!n.intersects(i.bounds)||0!==(a=null==i.opacity?1:i.opacity)&&(o=i.x||0,s=i.y||0,u=i.width||0,l=i.height||0,i.fill&&r.fill(e,i,a)&&e.fillRect(o,s,u,l),i.stroke&&r.stroke(e,i,a)&&e.strokeRect(o,s,u,l))},pick:r.pick()}},HeGT:function(e,t,n){"use strict";var r,i=n("cihr"),a=n("P/aK"),o=n("o+e1"),s=n("WJ2w"),u=n("ZAUf"),l=n("MtYt");function c(e,n){var i=e===a.COLUMN,o=e===a.ROW,s=i?"x":o?"y":e,l=n.axis(e),c={type:s,scale:n.scaleName(e)};["format","grid","layer","offset","orient","tickSize","ticks","tickSizeEnd","title","titleOffset","tickPadding","tickSize","tickSizeMajor","tickSizeMinor","values","subdivide"].forEach(function(r){var i,a=(i=t[r])?i(n,e,c):l[r];void 0!==a&&(c[r]=a)});var f=n.axis(e).properties||{};return["axis","labels","grid","title","ticks","majorTicks","minorTicks"].forEach(function(t){var i=r[t]?r[t](n,e,f[t]||{},c):f[t];void 0!==i&&u.keys(i).length>0&&(c.properties=c.properties||{},c.properties[t]=i)}),c}function f(e,t){var n=e.axis(t).grid;return void 0!==n?n:!e.isOrdinalScale(t)&&!e.fieldDef(t).bin}t.parseAxisComponent=function(e,t){return t.reduce(function(t,n){return e.axis(n)&&(t[n]=c(n,e)),t},{})},t.parseInnerAxis=function(e,n){var i=e===a.COLUMN,o=e===a.ROW,s={type:i?"x":o?"y":e,scale:n.scaleName(e),grid:!0,tickSize:0,properties:{labels:{text:{value:""}},axis:{stroke:{value:"transparent"}}}},l=n.axis(e);["layer","ticks","values","subdivide"].forEach(function(r){var i,a=(i=t[r])?i(n,e,s):l[r];void 0!==a&&(s[r]=a)});var c=n.axis(e).properties||{};return["grid"].forEach(function(t){var i=r[t]?r[t](n,e,c[t]||{},s):c[t];void 0!==i&&u.keys(i).length>0&&(s.properties=s.properties||{},s.properties[t]=i)}),s},t.parseAxis=c,t.format=function(e,t){return l.numberFormat(e.fieldDef(t),e.axis(t).format,e.config())},t.offset=function(e,t){return e.axis(t).offset},t.gridShow=f,t.grid=function(e,t){if(t!==a.ROW&&t!==a.COLUMN)return f(e,t)&&(t===a.Y||t===a.X)&&!(e.parent()&&e.parent().isFacet())},t.layer=function(e,t,n){var r=e.axis(t).layer;return void 0!==r?r:n.grid?"back":void 0},t.orient=function(e,t){var n=e.axis(t).orient;return n||(t===a.COLUMN?i.AxisOrient.TOP:void 0)},t.ticks=function(e,t){var n=e.axis(t).ticks;return void 0!==n?n:t!==a.X||e.fieldDef(t).bin?void 0:5},t.tickSize=function(e,t){var n=e.axis(t).tickSize;if(void 0!==n)return n},t.tickSizeEnd=function(e,t){var n=e.axis(t).tickSizeEnd;if(void 0!==n)return n},t.title=function(e,t){var n=e.axis(t);if(void 0!==n.title)return n.title;var r,i=o.title(e.fieldDef(t),e.config());n.titleMaxLength?r=n.titleMaxLength:t!==a.X||e.isOrdinalScale(a.X)?t!==a.Y||e.isOrdinalScale(a.Y)||(r=e.config().cell.height/e.axis(a.Y).characterWidth):r=e.config().cell.width/e.axis(a.X).characterWidth;return r?u.truncate(i,r):i},t.titleOffset=function(e,t){var n=e.axis(t).titleOffset;if(void 0!==n)return n},function(e){e.axis=function(e,t,n){var r=e.axis(t);return u.extend(void 0!==r.axisColor?{stroke:{value:r.axisColor}}:{},void 0!==r.axisWidth?{strokeWidth:{value:r.axisWidth}}:{},n||{})},e.grid=function(e,t,n){var r=e.axis(t);return u.extend(void 0!==r.gridColor?{stroke:{value:r.gridColor}}:{},void 0!==r.gridOpacity?{strokeOpacity:{value:r.gridOpacity}}:{},void 0!==r.gridWidth?{strokeWidth:{value:r.gridWidth}}:{},void 0!==r.gridDash?{strokeDashOffset:{value:r.gridDash}}:{},n||{})},e.labels=function(e,t,n,r){var i=e.fieldDef(t),c=e.axis(t),f=e.config();return c.labels?(u.contains([s.NOMINAL,s.ORDINAL],i.type)&&c.labelMaxLength?n=u.extend({text:{template:"{{ datum.data | truncate:"+c.labelMaxLength+" }}"}},n||{}):i.type===s.TEMPORAL&&(n=u.extend({text:{template:l.timeTemplate("datum.data",i.timeUnit,c.format,c.shortTimeLabels,f)}},n)),void 0!==c.labelAngle?n.angle={value:c.labelAngle}:t!==a.X||!o.isDimension(i)&&i.type!==s.TEMPORAL||(n.angle={value:270}),void 0!==c.labelAlign?n.align={value:c.labelAlign}:n.angle&&(270===n.angle.value?n.align={value:"top"===r.orient?"left":"x"===r.type?"right":"center"}:90===n.angle.value&&(n.align={value:"center"})),void 0!==c.labelBaseline?n.baseline={value:c.labelBaseline}:n.angle&&(270===n.angle.value?n.baseline={value:"x"===r.type?"middle":"bottom"}:90===n.angle.value&&(n.baseline={value:"bottom"})),void 0!==c.tickLabelColor&&(n.stroke={value:c.tickLabelColor}),void 0!==c.tickLabelFont&&(n.font={value:c.tickLabelFont}),void 0!==c.tickLabelFontSize&&(n.fontSize={value:c.tickLabelFontSize}),0===u.keys(n).length?void 0:n):u.extend({text:""},n)},e.ticks=function(e,t,n){var r=e.axis(t);return u.extend(void 0!==r.tickColor?{stroke:{value:r.tickColor}}:{},void 0!==r.tickWidth?{strokeWidth:{value:r.tickWidth}}:{},n||{})},e.title=function(e,t,n){var r=e.axis(t);return u.extend(void 0!==r.titleColor?{stroke:{value:r.titleColor}}:{},void 0!==r.titleFont?{font:{value:r.titleFont}}:{},void 0!==r.titleFontSize?{fontSize:{value:r.titleFontSize}}:{},void 0!==r.titleFontWeight?{fontWeight:{value:r.titleFontWeight}}:{},n||{})}}(r=t.properties||(t.properties={}))},Hqva:function(e,t,n){e.exports={ChangeSet:n("ekYZ"),Collector:n("B1p+"),DataSource:n("xZ2+"),Dependencies:n("D3vM"),Graph:n("ARV7"),Node:n("3FFs"),Signal:n("KMnl"),Tuple:n("gtuQ"),debug:n("J731").debug}},ISRz:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n("cihr"),a=n("P/aK"),o=n("Py5Z"),s=n("x6Fv"),u=n("QSMf"),l=n("o+e1"),c=n("Fw/k"),f=n("WJ2w"),h=n("ZAUf"),d=n("HeGT"),p=n("MtYt"),g=n("V22v"),m=n("YBv9"),v=n("jGoH"),y=n("TLMq"),_=function(e){function t(t,n,r){e.call(this,t,n,r);var i=this._config=this._initConfig(t.config,n),a=this._child=p.buildModel(t.spec,this,this.name("child")),o=this._facet=this._initFacet(t.facet);this._scale=this._initScale(o,i,a),this._axis=this._initAxis(o,i,a)}return r(t,e),t.prototype._initConfig=function(e,t){return h.mergeDeep(h.duplicate(o.defaultConfig),e,t?t.config():{})},t.prototype._initFacet=function(e){e=h.duplicate(e);var t=this;return u.channelMappingForEach(this.channels(),e,function(e,n){l.isDimension(e)||t.addWarning(n+" encoding should be ordinal."),e.type&&(e.type=f.getFullName(e.type))}),e},t.prototype._initScale=function(e,t,n){return[a.ROW,a.COLUMN].reduce(function(r,i){if(e[i]){var o=e[i].scale||{};r[i]=h.extend({type:c.ScaleType.ORDINAL,round:t.facet.scale.round,padding:i===a.ROW&&n.has(a.Y)||i===a.COLUMN&&n.has(a.X)?t.facet.scale.padding:0},o)}return r},{})},t.prototype._initAxis=function(e,t,n){return[a.ROW,a.COLUMN].reduce(function(r,o){if(e[o]){var s=e[o].axis;if(!1!==s){var u=r[o]=h.extend({},t.facet.axis,!0===s?{}:s||{});if(o===a.ROW){var l=n.axis(a.Y);l&&l.orient!==i.AxisOrient.RIGHT&&!u.orient&&(u.orient=i.AxisOrient.RIGHT),n.has(a.X)&&!u.labelAngle&&(u.labelAngle=u.orient===i.AxisOrient.RIGHT?90:270)}}}return r},{})},t.prototype.facet=function(){return this._facet},t.prototype.has=function(e){return!!this._facet[e]},t.prototype.child=function(){return this._child},t.prototype.hasSummary=function(){for(var e=this.component.data.summary,t=0;t<e.length;t++)if(h.keys(e[t].measures).length>0)return!0;return!1},t.prototype.dataTable=function(){return(this.hasSummary()?s.SUMMARY:s.SOURCE)+""},t.prototype.fieldDef=function(e){return this.facet()[e]},t.prototype.stack=function(){return null},t.prototype.parseData=function(){this.child().parseData(),this.component.data=g.parseFacetData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this.child().parseLayoutData(),this.component.layout=m.parseFacetLayout(this)},t.prototype.parseScale=function(){var e=this.child(),t=this;e.parseScale();var n=this.component.scale=y.parseScaleComponent(this);h.keys(e.component.scale).forEach(function(r){n[r]=e.component.scale[r],h.vals(n[r]).forEach(function(n){var r=n.name.substr(e.name("").length),i=t.scaleName(r);e.renameScale(n.name,i),n.name=i}),delete e.component.scale[r]})},t.prototype.parseMark=function(){var e,t,n;this.child().parseMark(),this.component.mark=h.extend({name:this.name("cell"),type:"group",from:h.extend(this.dataTable()?{data:this.dataTable()}:{},{transform:[{type:"facet",groupby:[].concat(this.has(a.ROW)?[this.field(a.ROW)]:[],this.has(a.COLUMN)?[this.field(a.COLUMN)]:[])}]}),properties:{update:(e=this,t=e.child(),n=h.extend({},t.config().cell,t.config().facet.cell),h.extend({x:e.has(a.COLUMN)?{scale:e.scaleName(a.COLUMN),field:e.field(a.COLUMN),offset:e.scale(a.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2},y:e.has(a.ROW)?{scale:e.scaleName(a.ROW),field:e.field(a.ROW),offset:e.scale(a.ROW).padding/2}:{value:e.config().facet.scale.padding/2},width:{field:{parent:e.child().sizeName("width")}},height:{field:{parent:e.child().sizeName("height")}}},t.assembleParentGroupProperties(n)))}},this.child().assembleGroup())},t.prototype.parseAxis=function(){this.child().parseAxis(),this.component.axis=d.parseAxisComponent(this,[a.ROW,a.COLUMN])},t.prototype.parseAxisGroup=function(){var e=x(this,a.X),t=x(this,a.Y);this.component.axisGroup=h.extend(e?{x:e}:{},t?{y:t}:{})},t.prototype.parseGridGroup=function(){var e,t,n,r,i=this.child();this.component.gridGroup=h.extend(!i.has(a.X)&&this.has(a.COLUMN)?{column:(n=this,r=n.config().facet.grid,[{name:n.name("column-grid"),type:"rule",from:{data:n.dataTable(),transform:[{type:"facet",groupby:[n.field(a.COLUMN)]}]},properties:{update:{x:{scale:n.scaleName(a.COLUMN),field:n.field(a.COLUMN)},y:{value:0,offset:-r.offset},y2:{field:{group:"height"},offset:r.offset},stroke:{value:r.color},strokeOpacity:{value:r.opacity},strokeWidth:{value:.5}}}},{name:n.name("column-grid-end"),type:"rule",properties:{update:{x:{field:{group:"width"}},y:{value:0,offset:-r.offset},y2:{field:{group:"height"},offset:r.offset},stroke:{value:r.color},strokeOpacity:{value:r.opacity},strokeWidth:{value:.5}}}}])}:{},!i.has(a.Y)&&this.has(a.ROW)?{row:(e=this,t=e.config().facet.grid,[{name:e.name("row-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(a.ROW)]}]},properties:{update:{y:{scale:e.scaleName(a.ROW),field:e.field(a.ROW)},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}},{name:e.name("row-grid-end"),type:"rule",properties:{update:{y:{field:{group:"height"}},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}])}:{})},t.prototype.parseLegend=function(){this.child().parseLegend(),this.component.legend=this._child.component.legend,this._child.component.legend={}},t.prototype.assembleParentGroupProperties=function(){return null},t.prototype.assembleData=function(e){return g.assembleData(this,e),this._child.assembleData(e)},t.prototype.assembleLayout=function(e){return this._child.assembleLayout(e),m.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return[].concat(h.vals(this.component.axisGroup),h.flatten(h.vals(this.component.gridGroup)),this.component.mark)},t.prototype.channels=function(){return[a.ROW,a.COLUMN]},t.prototype.mapping=function(){return this.facet()},t.prototype.isFacet=function(){return!0},t}(v.Model);function x(e,t){var n,r,i,o,s=null,u=e.child();return u.has(t)&&u.axis(t)&&(s=t===a.X?(o=(i=e).has(a.COLUMN),h.extend({name:i.name("x-axes"),type:"group"},o?{from:{data:i.dataTable(),transform:[{type:"aggregate",groupby:[i.field(a.COLUMN)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{parent:i.child().sizeName("width")}},height:{field:{group:"height"}},x:o?{scale:i.scaleName(a.COLUMN),field:i.field(a.COLUMN),offset:i.scale(a.COLUMN).padding/2}:{value:i.config().facet.scale.padding/2}}},axes:[d.parseAxis(a.X,i.child())]})):(r=(n=e).has(a.ROW),h.extend({name:n.name("y-axes"),type:"group"},r?{from:{data:n.dataTable(),transform:[{type:"aggregate",groupby:[n.field(a.ROW)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{group:"width"}},height:{field:{parent:n.child().sizeName("height")}},y:r?{scale:n.scaleName(a.ROW),field:n.field(a.ROW),offset:n.scale(a.ROW).padding/2}:{value:n.config().facet.scale.padding/2}}},axes:[d.parseAxis(a.Y,n.child())]})),u.axis(t)&&d.gridShow(u,t)?u.component.axis[t]=d.parseInnerAxis(t,u):delete u.component.axis[t]),s}t.FacetModel=_},J731:function(e,t){var n=Date.now();function r(e,t){if(r.enable){var i=Function.prototype.bind.call(console.log,console),a={prevTime:Date.now()-n,stamp:e.stamp};e.add&&(a.add=e.add.length,a.mod=e.mod.length,a.rem=e.rem.length,a.reflow=!!e.reflow),i.apply(console,(t.push(JSON.stringify(a)),t)),n=Date.now()}}e.exports={log:function(e){console.log("[Vega Log]",e)},error:function(e){console.error("[Vega Err]",e)},debug:(r.enable=!1,r)}},KMnl:function(e,t,n){var r=n("ekYZ"),i=n("3FFs"),a=i.prototype;function o(e,t,n){return a.init.call(this,e),this._name=t,this._value=n,this._verbose=!1,this._handlers=[],this}var s=o.prototype=Object.create(a);s.constructor=o,s.name=function(){return this._name},s.value=function(e){return arguments.length?(this._value=e,this):this._value},s.values=s.value,s.verbose=function(e){return arguments.length?(this._verbose=!!e,this):this._verbose},s.evaluate=function(e){return e.signals[this._name]?e:this._graph.doNotPropagate},s.fire=function(e){e||(e=r.create(null,!0)),e.signals[this._name]=1,this._graph.propagate(e,this)},s.on=function(e){var t=this,n=new i(this._graph);return n.evaluate=function(n){return e(t.name(),t.value()),n},this._handlers.push({handler:e,node:n}),this.addListener(n)},s.off=function(e){var t,n,r=this._handlers;for(t=r.length;--t>=0;)e&&r[t].handler!==e||(n=r.splice(t,1)[0],this.removeListener(n.node));return this},e.exports=o},KfF0:function(e,t){function n(e){this.cmp=e,this.nodes=[]}var r=n.prototype;function i(e,t,n,r){var i,a,o;for(i=e[n];n>t&&r(i,a=e[o=n-1>>1])<0;)e[n]=a,n=o;return e[n]=i}function a(e,t,n){for(var r,a=t,o=e.length,s=e[t],u=2*t+1;u<o;)(r=u+1)<o&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],u=2*(t=u)+1;return e[t]=s,i(e,a,t,n)}r.size=function(){return this.nodes.length},r.clear=function(){return this.nodes=[],this},r.peek=function(){return this.nodes[0]},r.push=function(e){var t=this.nodes;return t.push(e),i(t,0,t.length-1,this.cmp)},r.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,a(t,0,this.cmp)):e=n,e},r.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,a(t,0,this.cmp),n},r.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,a(t,0,this.cmp)),e},e.exports=n},LHV8:function(e,t,n){e.exports={path:n("pfe9"),render:n("WCPv"),Item:n("iMk1"),bound:n("BONk"),Bounds:n("lnKO"),canvas:n("WFOa"),Gradient:n("1C2Q"),toJSON:n("3Gpk").toJSON,fromJSON:n("3Gpk").fromJSON}},"Lp/H":function(e,t,n){var r=n("Za4h"),i=n("LHV8").bound,a=n("Hqva").Tuple,o=n("Vp7n").STATUS;function s(e,t){this.duration=e||500,this.ease=t&&r.ease(t)||r.ease("cubic-in-out"),this.updates={next:null}}var u=s.prototype,l={text:1,url:1};u.interpolate=function(e,t){var n,i,s,u,c=null;for(n in t)(i=e[n])!==(s=t[n])&&(l[n]||void 0===i?a.set(e,n,s):"number"!=typeof i||isFinite(i)?((u=r.interpolate(i,s)).property=n,(c||(c=[])).push(u)):a.set(e,n,s));return null===c&&e.status===o.EXIT&&(c=[]),null!=c&&(c.item=e,c.ease=e.mark.ease||this.ease,c.next=this.updates.next,this.updates.next=c),this},u.start=function(e){for(var t=this,n=t.updates,a=n.next;null!=a;a=(n=a).next)a.item.status===o.EXIT&&(a.item.status=o.UPDATE,a.remove=!0);t.callback=e,r.timer(function(e){return function(e){for(var t,n,r,a,s,u,l=this.updates,c=l.next,f=this.duration,h=!0;null!=c;c=(l=c).next)if(t=c.item,n=t.delay||0,(r=(e-n)/f)<0)h=!1;else{for(r>1&&(r=1),a=c.ease(r),s=0,u=c.length;s<u;++s)t[c[s].property]=c[s](a);t.touch(),i.item(t),1===r?(c.remove&&(t.status=o.EXIT,t.remove()),l.next=c.next,c=l):h=!1}return this.callback(),h}.call(t,e)})},e.exports=s},MRce:function(e,t){e.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},MSrK:function(e,t){e.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},"MZ+b":function(e,t,n){var r=n("Hqva"),i=r.Tuple,a=n("J731"),o=n("4JPs");function s(e){return o.prototype.init.call(this,e),o.addParameters(this,{fields:{type:"array<field>"}}),this._output={key:"key",value:"value"},this._cache={},this.router(!0).produces(!0)}var u=s.prototype=Object.create(o.prototype);u.constructor=s,u._reset=function(e,t){for(var n in this._cache)t.rem.push.apply(t.rem,this._cache[n]);this._cache={}},u._tuple=function(e,t,n){var r=this._cache[e._id]||(this._cache[e._id]=Array(n));return r[t]?i.rederive(e,r[t]):r[t]=i.derive(e)},u._fn=function(e,t,n){var r,a,o,s,u,l;for(r=0,o=e.length;r<o;++r)for(u=e[r],a=0,s=t.field.length;a<s;++a)l=this._tuple(u,a,s),i.set(l,this._output.key,t.field[a]),i.set(l,this._output.value,t.accessor[a](u)),n.push(l)},u.transform=function(e,t){a.debug(e,["folding"]);var n=this,i=this.param("fields"),o=r.ChangeSet.create(e);return t&&this._reset(e,o),this._fn(e.add,i,o.add),this._fn(e.mod,i,t?o.add:o.mod),e.rem.forEach(function(e){o.rem.push.apply(o.rem,n._cache[e._id]),n._cache[e._id]=null}),(e.add.length||e.rem.length||i.field.some(function(t){return!!e.fields[t]}))&&(o.fields[this._output.key]=1,o.fields[this._output.value]=1),o},e.exports=s,s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Fold transform",description:'Collapse ("fold") one or more data properties into two properties.',type:"object",properties:{type:{enum:["fold"]},fields:{oneOf:[{type:"array",description:"An array of field references indicating the data properties to fold.",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},minItems:1,uniqueItems:!0},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{key:{type:"string",default:"key"},value:{type:"string",default:"value"}},additionalProperties:!1}},additionalProperties:!1,required:["type","fields"]}},MtYt:function(e,t,n){"use strict";var r=n("P/aK"),i=n("o+e1"),a=n("yLwJ"),o=n("WJ2w"),s=n("ZAUf"),u=n("ISRz"),l=n("Wwtv"),c=n("z5TJ"),f=n("zYzi"),h=n("F9eC");function d(e,t,n){return n.forEach(function(n){var r=t[n];void 0!==r&&(e[n]={value:r})}),e}function p(e,t,n){return d(e,t.config().mark,n)}t.buildModel=function(e,t,n){return h.isFacetSpec(e)?new u.FacetModel(e,t,n):h.isLayerSpec(e)?new l.LayerModel(e,t,n):h.isUnitSpec(e)?new f.UnitModel(e,t,n):(console.error("Invalid spec."),null)},t.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","opacity"],t.FILL_CONFIG=["fill","fillOpacity","opacity"],t.FILL_STROKE_CONFIG=s.union(t.STROKE_CONFIG,t.FILL_CONFIG),t.applyColorAndOpacity=function(e,n){var i,a,s=n.config().mark.filled,u=n.fieldDef(r.COLOR),l=n.fieldDef(r.OPACITY);p(e,n,s?t.FILL_CONFIG:t.STROKE_CONFIG),n.has(r.COLOR)?i={scale:n.scaleName(r.COLOR),field:n.field(r.COLOR,u.type===o.ORDINAL?{prefn:"rank_"}:{})}:u&&u.value&&(i={value:u.value}),n.has(r.OPACITY)?a={scale:n.scaleName(r.OPACITY),field:n.field(r.OPACITY,l.type===o.ORDINAL?{prefn:"rank_"}:{})}:l&&l.value&&(a={value:l.value}),void 0!==i?s?e.fill=i:e.stroke=i:e[s?"fill":"stroke"]=e[s?"fill":"stroke"]||{value:n.config().mark.color},void 0!==a&&(e.opacity=a)},t.applyConfig=d,t.applyMarkConfig=p,t.numberFormat=function(e,t,n){if(e.type===o.QUANTITATIVE&&!e.bin)return t||n.numberFormat},t.sortField=function(e){return(e.sort===a.SortOrder.DESCENDING?"-":"")+i.field(e,{binSuffix:"_mid"})},t.timeTemplate=function(e,t,n,r,i){return!t||n?"{{"+e+" | time:'"+(n||i.timeFormat)+"'}}":c.template(t,e,r)}},NNYs:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva"),o=n("J731"),s=a.Node,u=a.Dependencies,l=n("3Y21"),c={width:1,height:1},f={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"},h={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"};function d(e,t,n){return this._def=t,this._parent=n,this._updated=!1,s.prototype.init.call(this,e).reflows(!0)}var p=d.prototype=new s;function g(e,t,n){var r,a,o=this._def,s=e._prev,u=!1,l=A.call(this,o.padding)||0,c=null==o.outerPadding?l:A.call(this,o.outerPadding),f=o.points&&A.call(this,o.points),d=A.call(this,o.round)||null==o.round,p=!0;if(i.isObject(o.range)&&!i.isArray(o.range)&&(u=!0,t=E.call(this,h.RANGE,o.range,e,n)),(r=E.call(this,h.DOMAIN,o.domain,e,n))&&!i.equal(s.domain,r)&&(e.domain(r),s.domain=r,this._updated=!0),!i.equal(s.range,t)){if(o.bandSize){var g,m=A.call(this,o.bandSize),_=r.length,x=o.points?l*m:l*m*(_-1)+2*c;t=t[0]>t[1]?[(g=t[1]||0)+(m*_+x),g]:[g=t[0]||0,g+(m*_+x)],o.reverse&&(t=t.reverse())}"string"==typeof t[0]||t.length>2||1===t.length||u?(e.range(t),p=!1):f&&d?e.rangeRoundPoints(t,l):f?e.rangePoints(t,l):d?e.rangeRoundBands(t,l,c):e.rangeBands(t,l,c),s.range=t,this._updated=!0}!e.invert&&p&&((a=e).invert=function(e,t){var n=a.range(),r=n[0]<n[1],o=r?v:y;if(1===arguments.length){if(!i.isNumber(e))throw Error("Ordinal scale inversion is only supported for numeric input ("+e+").");return a.domain()[o(n,e)]}if(2===arguments.length){if(!i.isNumber(e)||!i.isNumber(t))throw Error("Extents to ordinal invert are not numbers ("+e+", "+t+").");var s=a.domain(),u=o(n,e),l=o(n,t),c=n.length-1;return l<u&&(l=u=l),u<0&&(u=0),l>c&&(l=c),(r?i.range(u,l+1):i.range(l,u-1,-1)).map(function(e){return s[e]})}})}p.evaluate=function(e){var t=this,n=function(e){(function(e){var t=this._def.name,n=t+":prev",a=function(e){var t=this._graph.config(),n=this._def.type||f.LINEAR;if(!e||n!==e.type){var i=t.scale[n]||r.scale[n];if(!i)throw Error("Unrecognized scale type: "+n);(e=i()).type=e.type||n,e.scaleName=this._def.name,e._prev={}}return e}.call(this,e.scale(t)),s=a.type===f.ORDINAL?g:_,u=function(e){var t=this._def,n=this._graph.config(),r=A.call(this,t.range),a=[null,null];if(void 0!==r)if("string"==typeof r)if(c[r])a=[0,e[r]];else{if(!n.range[r])return o.error("Unrecogized range: "+r),a;a=n.range[r]}else if(i.isArray(r))a=i.duplicate(r).map(A.bind(this));else{if(i.isObject(r))return null;a=[0,r]}void 0!==t.rangeMin&&(a[0]=t.rangeMin.signal?A.call(this,t.rangeMin):t.rangeMin);void 0!==t.rangeMax&&(a[a.length-1]=t.rangeMax.signal?A.call(this,t.rangeMax):t.rangeMax);if(void 0!==t.reverse){var s=A.call(this,t.reverse);i.isObject(s)&&(s=i.accessor(s.field)(e.datum)),s&&(a=a.reverse())}var u=a[0],l=a[a.length-1];(null===u&&null!==l||null!==u&&null===l)&&o.error('Range is underspecified. Please ensure either the "range" property or both "rangeMin" and "rangeMax" are specified.');return a}.call(this,e);return s.call(this,a,u,e),e.scale(t,a),e.scale(n,e.scale(n)||a),a}).call(t,e)};return this._updated=!1,e.add.forEach(n),e.mod.forEach(n),this._updated&&(e.scales[this._def.name]=1,o.debug(e,["scale",this._def.name])),a.ChangeSet.create(e,!0)},p.dependency=function(e,t){if(2==arguments.length)for(var n=e===u.DATA?"data":"signal",r=0,a=(t=i.array(t)).length;r<a;++r)this._graph[n](t[r]).addListener(this._parent);return s.prototype.dependency.call(this,e,t)};var m=r.bisector(i.numcmp).right,v=function(e,t){return m(e,t)-1},y=r.bisector(function(e,t){return-1*i.numcmp(e,t)}).left;function _(e,t,n){var a,s,u=this._def,l=e._prev,c=A.call(this,u.round),d=A.call(this,u.exponent),p=A.call(this,u.clamp),g=A.call(this,u.nice);(a=u.type===f.QUANTILE?E.call(this,h.DOMAIN,u.domain,e,n):function(e,t){var n,r,a=this._def,o=[null,null];void 0!==a.domain&&(o=i.isObject(a.domain)?E.call(this,h.DOMAIN,a.domain,e,t):o);r=o.length-1,void 0!==a.domainMin&&(i.isObject(a.domainMin)?a.domainMin.signal?o[0]=i.isValid(n=A.call(this,a.domainMin))?n:o[0]:o[0]=E.call(this,h.DOMAIN+h.MIN,a.domainMin,e,t)[0]:o[0]=a.domainMin);void 0!==a.domainMax&&(i.isObject(a.domainMax)?a.domainMax.signal?o[r]=i.isValid(n=A.call(this,a.domainMax))?n:o[r]:o[r]=E.call(this,h.DOMAIN+h.MAX,a.domainMax,e,t)[1]:o[r]=a.domainMax);a.type===f.LOG||a.type===f.TIME||a.type===f.TIME_UTC||!a.zero&&void 0!==a.zero||(o[0]=Math.min(0,o[0]),o[r]=Math.max(0,o[r]));return o}.call(this,e,n))&&!i.equal(l.domain,a)&&(e.domain(a),l.domain=a,this._updated=!0),"height"===A.call(this,u.range)&&(t=t.reverse()),t&&!i.equal(l.range,t)&&(e[c&&e.rangeRound?"rangeRound":"range"](t),l.range=t,this._updated=!0),d&&u.type===f.POWER&&e.exponent(d),p&&e.clamp(!0),g&&(u.type===f.TIME?((s=r.time[g])||o.error("Unrecognized interval: "+s),e.nice(s)):e.nice())}function x(e){return e.type===f.ORDINAL||e.type===f.QUANTILE}function b(e){return e.fields||i.array(e)}function M(e){return e.some(function(e){return!e.data||e.data&&i.array(e.field).some(function(e){return e.parent})})}function k(e,t){return i.array(e.field).map(function(e){return e.parent?i.accessor(e.parent)(t.datum):e})}function S(e,t){var n=b(e);return 1==n.length&&1==i.array(n[0].field).length?l.TYPES.TUPLE:x(t)&&i.isObject(e.sort)?l.TYPES.MULTI:l.TYPES.VALUE}function E(e,t,n,r){if(null==t)return[];if(i.isArray(t))return t.map(A.bind(this));var a,o,s,c,f,d,p,g,m,v,y=this,_=this._graph,E=b(t),w=M(E),T=S(t,n),O=function(e,t,n,r){var a=b(t),o=M(a),s=S(t,n),u=x(n),c=t.sort,f="_"+e,d=k(a[0],r);if(n[f]||this[f])return n[f]||this[f];var p,g,m=new l(this._graph).type(s);return o?n[f]=m:this[f]=m,u?s===l.TYPES.VALUE?(p=[{name:h.GROUPBY,get:i.identity}],g={"*":h.COUNT}):s===l.TYPES.TUPLE?(p=[{name:h.GROUPBY,get:i.$(d[0])}],g=i.isObject(c)?[{field:h.VALUE,get:i.$(c.field),ops:[c.op]}]:{"*":h.COUNT}):(p=h.GROUPBY,g=[{field:h.VALUE,ops:[c.op]}]):(p=[],g=[{field:h.VALUE,get:s==l.TYPES.TUPLE?i.$(d[0]):i.identity,ops:[h.MIN,h.MAX],as:[h.MIN,h.MAX]}]),m.param("groupby",p).param("summarize",g),m._lastUpdate=-1,m}.apply(this,arguments),N=t.sort,L=x(n);function C(e){y.dependency(u.SIGNALS,e)}if(w||!w&&O._lastUpdate<this._stamp){for(a=0,o=E.length;a<o;++a)if(m=(f=E[a]).data||r.datum._facetID,!((g=_.data(m).last()).stamp<=this._stamp)){for(s=0,c=(d=k(f,r)).length;s<c;++s)p=d[s],T===l.TYPES.VALUE?O.accessors(null,p):T===l.TYPES.MULTI&&O.accessors(p,f.sort||N.field),O.evaluate(g);this.dependency(u.DATA,m),O.dependency(u.SIGNALS).forEach(C)}O._lastUpdate=this._stamp,g=O.aggr().result(),L?(i.isObject(N)?(v=N.op+"_"+h.VALUE,v=i.comparator(v)):!0===N&&(v=i.comparator(h.GROUPBY)),v&&(g=g.sort(v)),O._values=g.map(function(e){return e[h.GROUPBY]})):(g=g[0],O._values=i.isValid(g)?[g[h.MIN],g[h.MAX]]:[])}return O._values}function A(e){if(!e||!e.signal)return e;var t,n=e.signal;return this.dependency(u.SIGNALS,(t=i.field(n))[0]),this._graph.signalRef(t)}e.exports=d;var w=[{enum:["width","height","shapes","category10","category20","category20b","category20c"]},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}];d.schema={refs:{data:{type:"object",properties:{data:{oneOf:[{type:"string"},{type:"object",properties:{fields:{type:"array",items:{$ref:"#/refs/data"}}},required:["fields"]}]},field:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}},{type:"object",properties:{parent:{type:"string"}},required:["parent"]},{type:"array",items:{type:"object",properties:{parent:{type:"string"}},required:["parent"]}}]},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{field:{type:"string"},op:{enum:n("3Y21").VALID_OPS}}}]}},additionalProperties:!1}},defs:{scale:{title:"Scale function",type:"object",allOf:[{properties:{name:{type:"string"},type:{enum:[f.LINEAR,f.ORDINAL,f.TIME,f.TIME_UTC,f.LOG,f.POWER,f.SQRT,f.QUANTILE,f.QUANTIZE,f.THRESHOLD],default:f.LINEAR},domain:{oneOf:[{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/data"},{type:"object",properties:{fields:{type:"array",items:{$ref:"#/refs/data"}}},required:["fields"]}]},domainMin:{oneOf:[{type:"number"},{$ref:"#/refs/data"},{$ref:"#/refs/signal"}]},domainMax:{oneOf:[{type:"number"},{$ref:"#/refs/data"},{$ref:"#/refs/signal"}]},rangeMin:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]},rangeMax:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]},reverse:{oneOf:[{type:"boolean"},{$ref:"#/refs/data"}]},round:{type:"boolean"}},required:["name"]},{oneOf:[{properties:{type:{enum:[f.ORDINAL]},range:{oneOf:w.concat({$ref:"#/refs/data"})},points:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},padding:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},outerPadding:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},bandSize:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},required:["type"]},{properties:{type:{enum:[f.TIME,f.TIME_UTC]},range:{oneOf:w},clamp:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{oneOf:[{enum:["second","minute","hour","day","week","month","year"]},{$ref:"#/refs/signal"}]}},required:["type"]},{anyOf:[{properties:{type:{enum:[f.LINEAR,f.LOG,f.POWER,f.SQRT,f.QUANTILE,f.QUANTIZE,f.THRESHOLD],default:f.LINEAR},range:{oneOf:w},clamp:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},zero:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}}},{properties:{type:{enum:[f.POWER]},exponent:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},required:["type"]}]}]}]}}}},NdEd:function(e,t){e.exports={name:"datalib",version:"1.8.0",description:"JavaScript utilites for loading, summarizing and working with data.",keywords:["data","table","statistics","parse","csv","tsv","json","utility"],repository:{type:"git",url:"http://github.com/vega/datalib.git"},author:{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},contributors:[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],license:"BSD-3-Clause",dependencies:{"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",topojson:"^1.6.19",request:"^2.67.0","sync-request":"^2.1.0"},devDependencies:{browserify:"^12.0.1",chai:"^3.4.1",istanbul:"latest",jshint:"^2.9.1-rc1",mocha:"^2.3.4","uglify-js":"^2.6.1"},main:"src/index.js",scripts:{deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",build:"browserify src/index.js -d -s dl -o datalib.js",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js"},browser:{buffer:!1,fs:!1,http:!1,request:!1,"sync-request":!1,url:!1}}},NobO:function(e,t,n){var r=n("7rLc").dispatch,i=Math.PI/180,a=64,o=2048;function s(e){return e.text}function u(){return"serif"}function l(){return"normal"}function c(e){return Math.sqrt(e.value)}function f(){return 30*(~~(6*Math.random())-3)}function h(){return 1}function d(e,t,n,r){if(!t.sprite){var s=e.context,u=e.ratio;s.clearRect(0,0,(a<<5)/u,o/u);var l=0,c=0,f=0,h=n.length;for(--r;++r<h;){t=n[r],s.save(),s.font=t.style+" "+t.weight+" "+~~((t.size+1)/u)+"px "+t.font;var d=s.measureText(t.text+"m").width*u,p=t.size<<1;if(t.rotate){var g=Math.sin(t.rotate*i),m=Math.cos(t.rotate*i),v=d*m,y=d*g,_=p*m,x=p*g;d=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5,p=~~Math.max(Math.abs(y+_),Math.abs(y-_))}else d=d+31>>5<<5;if(p>f&&(f=p),l+d>=a<<5&&(l=0,c+=f,f=0),c+p>=o)break;s.translate((l+(d>>1))/u,(c+(p>>1))/u),t.rotate&&s.rotate(t.rotate*i),s.fillText(t.text,0,0),t.padding&&(s.lineWidth=2*t.padding,s.strokeText(t.text,0,0)),s.restore(),t.width=d,t.height=p,t.xoff=l,t.yoff=c,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=d}for(var b=s.getImageData(0,0,(a<<5)/u,o/u).data,M=[];--r>=0;)if((t=n[r]).hasText){for(var k=(d=t.width)>>5,S=(p=t.y1-t.y0,0);S<p*k;S++)M[S]=0;if(null==(l=t.xoff))return;c=t.yoff;for(var E=0,A=-1,w=0;w<p;w++){for(S=0;S<d;S++){var T=k*w+(S>>5),O=b[(c+w)*(a<<5)+(l+S)<<2]?1<<31-S%32:0;M[T]|=O,E|=O}E?A=w:(t.y0++,p--,w--,c++)}t.y1=t.y0+A,t.sprite=M.slice(0,(t.y1-t.y0)*k)}}}function p(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),f=0;f<l;f++){r=0;for(var h=0;h<=a;h++)if((r<<u|(h<a?(r=i[f*a+h])>>>s:0))&t[c+h])return!0;c+=n}return!1}function g(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function m(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function v(){return document.createElement("canvas")}function y(e){return"function"==typeof e?e:function(){return e}}e.exports=function(){var e=[256,256],t=s,n=u,i=c,x=l,b=l,M=f,k=h,S=m,E=[],A=1/0,w=r("word","end"),T=null,O=Math.random,N={},L=v;function C(t,n,r){e[0],e[1];for(var i,a,o,s,u,l=n.x,c=n.y,f=Math.sqrt(e[0]*e[0]+e[1]*e[1]),h=S(e),d=O()<.5?1:-1,g=-d;(i=h(g+=d))&&(a=~~i[0],o=~~i[1],!(Math.min(Math.abs(a),Math.abs(o))>=f));)if(n.x=l+a,n.y=c+o,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1]||r&&p(n,t,e[0])||r&&(u=r,!((s=n).x+s.x1>u[0].x&&s.x+s.x0<u[1].x&&s.y+s.y1>u[0].y&&s.y+s.y0<u[1].y)))){for(var m,v=n.sprite,y=n.width>>5,_=e[0]>>5,x=n.x-(y<<4),b=127&x,M=32-b,k=n.y1-n.y0,E=(n.y+n.y0)*_+(x>>5),A=0;A<k;A++){m=0;for(var w=0;w<=y;w++)t[E+w]|=m<<M|(w<y?(m=v[A*y+w])>>>b:0);E+=_}return delete n.sprite,!0}return!1}return N.canvas=function(e){return arguments.length?(L=y(e),N):L},N.start=function(){var r=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(a<<5)/t,e.height=o/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(L()),s=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),u=null,l=E.length,c=-1,f=[],h=E.map(function(e,r){return e.text=t.call(this,e,r),e.font=n.call(this,e,r),e.style=x.call(this,e,r),e.weight=b.call(this,e,r),e.rotate=M.call(this,e,r),e.size=~~i.call(this,e,r),e.padding=k.call(this,e,r),e}).sort(function(e,t){return t.size-e.size});return T&&clearInterval(T),T=setInterval(p,0),p(),N;function p(){for(var t=Date.now();Date.now()-t<A&&++c<l&&T;){var n=h[c];n.x=e[0]*(O()+.5)>>1,n.y=e[1]*(O()+.5)>>1,d(r,n,h,c),n.hasText&&C(s,n,u)&&(f.push(n),w.call("word",N,n),u?g(u,n):u=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}c>=l&&(N.stop(),w.call("end",N,f,u))}},N.stop=function(){return T&&(clearInterval(T),T=null),N},N.timeInterval=function(e){return arguments.length?(A=null==e?1/0:e,N):A},N.words=function(e){return arguments.length?(E=e,N):E},N.size=function(t){return arguments.length?(e=[+t[0],+t[1]],N):e},N.font=function(e){return arguments.length?(n=y(e),N):n},N.fontStyle=function(e){return arguments.length?(x=y(e),N):x},N.fontWeight=function(e){return arguments.length?(b=y(e),N):b},N.rotate=function(e){return arguments.length?(M=y(e),N):M},N.text=function(e){return arguments.length?(t=y(e),N):t},N.spiral=function(e){return arguments.length?(S=_[e]||e,N):S},N.fontSize=function(e){return arguments.length?(i=y(e),N):i},N.padding=function(e){return arguments.length?(k=y(e),N):k},N.random=function(e){return arguments.length?(O=e,N):O},N.on=function(){var e=w.on.apply(w,arguments);return e===w?N:e},N};var _={archimedean:m,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}}},O3lN:function(e,t,n){var r=n("zicW");function i(e){return null==e?"auto":r.isObject(e)?e:r.isNumber(e)?{top:e,left:e,right:e,bottom:e}:"strict"===e?e:"auto"}e.exports=i,i.schema={defs:{padding:{oneOf:[{enum:["strict","auto"]},{type:"number"},{type:"object",properties:{top:{type:"number"},bottom:{type:"number"},left:{type:"number"},right:{type:"number"}},additionalProperties:!1}]}}}},OTIj:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("DUWk"),o=n("r7he");function s(e,t,n){var a=e.config(),o=0;function u(e,t){i.error("PARSE DATA FAILED: "+t.name+" "+e),o=-1,n(e)}return(t||[]).forEach(function(t){var i;t.url&&(o+=1,r.load(r.extend({url:t.url},a.load),(i=t,function(t,a){if(t)u(t,i);else if(o>0)try{e.data(i.name).values(r.read(a,i.format)),0==--o&&n()}catch(e){u(e,i)}})));try{s.datasource(e,t)}catch(e){u(e,t)}}),0===o&&setTimeout(n,1),t}s.datasource=function(e,t){var n=(t.transform||[]).map(function(t){return a(e,t)}),i=(t.modify||[]).map(function(n){return o(e,n,t)}),s=e.data(t.name,i.concat(n));return t.values?s.values(r.read(t.values,t.format)):t.source&&(s.source(t.source).addListener(s),e.removeListener(s.pipeline()[0])),s},e.exports=s;var u={oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{enum:["number","boolean","date","string"]}}]};s.schema={defs:{data:{title:"Input data set definition",type:"object",allOf:[{properties:{name:{type:"string"},transform:{$ref:"#/defs/transform"},modify:{$ref:"#/defs/modify"},format:{type:"object",oneOf:[{properties:{type:{enum:["json"]},parse:u,property:{type:"string"}},additionalProperties:!1},{properties:{type:{enum:["csv","tsv"]},parse:u},additionalProperties:!1},{oneOf:[{properties:{type:{enum:["topojson"]},feature:{type:"string"}},additionalProperties:!1},{properties:{type:{enum:["topojson"]},mesh:{type:"string"}},additionalProperties:!1}]},{properties:{type:{enum:["treejson"]},children:{type:"string"},parse:u},additionalProperties:!1}]}},required:["name"]},{anyOf:[{required:["name","modify"]},{oneOf:[{properties:{source:{type:"string"}},required:["source"]},{properties:{values:{type:"array"}},required:["values"]},{properties:{url:{type:"string"}},required:["url"]}]}]}]}}}},"P/aK":function(e,t,n){"use strict";var r,i=n("ZAUf");(r=t.Channel||(t.Channel={}))[r.X="x"]="X",r[r.Y="y"]="Y",r[r.X2="x2"]="X2",r[r.Y2="y2"]="Y2",r[r.ROW="row"]="ROW",r[r.COLUMN="column"]="COLUMN",r[r.SHAPE="shape"]="SHAPE",r[r.SIZE="size"]="SIZE",r[r.COLOR="color"]="COLOR",r[r.TEXT="text"]="TEXT",r[r.DETAIL="detail"]="DETAIL",r[r.LABEL="label"]="LABEL",r[r.PATH="path"]="PATH",r[r.ORDER="order"]="ORDER",r[r.OPACITY="opacity"]="OPACITY";var a=t.Channel;function o(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.DETAIL:case t.ORDER:case t.OPACITY:case t.ROW:case t.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,line:!0,area:!0,text:!0};case t.X2:case t.Y2:return{rule:!0,bar:!0,area:!0};case t.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0};case t.SHAPE:return{point:!0};case t.TEXT:return{text:!0};case t.PATH:return{line:!0}}return{}}t.X=a.X,t.Y=a.Y,t.X2=a.X2,t.Y2=a.Y2,t.ROW=a.ROW,t.COLUMN=a.COLUMN,t.SHAPE=a.SHAPE,t.SIZE=a.SIZE,t.COLOR=a.COLOR,t.TEXT=a.TEXT,t.DETAIL=a.DETAIL,t.LABEL=a.LABEL,t.PATH=a.PATH,t.ORDER=a.ORDER,t.OPACITY=a.OPACITY,t.CHANNELS=[t.X,t.Y,t.X2,t.Y2,t.ROW,t.COLUMN,t.SIZE,t.SHAPE,t.COLOR,t.PATH,t.ORDER,t.OPACITY,t.TEXT,t.DETAIL,t.LABEL],t.UNIT_CHANNELS=i.without(t.CHANNELS,[t.ROW,t.COLUMN]),t.UNIT_SCALE_CHANNELS=i.without(t.UNIT_CHANNELS,[t.PATH,t.ORDER,t.DETAIL,t.TEXT,t.LABEL,t.X2,t.Y2]),t.NONSPATIAL_CHANNELS=i.without(t.UNIT_CHANNELS,[t.X,t.Y,t.X2,t.Y2]),t.NONSPATIAL_SCALE_CHANNELS=i.without(t.UNIT_SCALE_CHANNELS,[t.X,t.Y,t.X2,t.Y2]),t.STACK_GROUP_CHANNELS=[t.COLOR,t.DETAIL,t.ORDER,t.OPACITY,t.SIZE],t.supportMark=function(e,t){return!!o(e)[t]},t.getSupportedMark=o,t.getSupportedRole=function(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.OPACITY:case t.LABEL:case t.DETAIL:return{measure:!0,dimension:!0};case t.ROW:case t.COLUMN:case t.SHAPE:return{measure:!1,dimension:!0};case t.X2:case t.Y2:case t.SIZE:case t.TEXT:return{measure:!0,dimension:!1};case t.PATH:return{measure:!1,dimension:!0}}throw new Error("Invalid encoding channel"+e)},t.hasScale=function(e){return!i.contains([t.DETAIL,t.PATH,t.TEXT,t.LABEL,t.ORDER],e)}},P7vC:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("Hqva").Tuple,o=n("4JPs"),s=n("acp7");function u(e){return s.prototype.init.call(this,e),o.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value",default:"value"},value:{type:"value",default:0}}),this.router(!0).produces(!0)}var l=u.prototype=Object.create(s.prototype);function c(e,t,n,r){var i,o={_imputed:!0};for(i=0;i<t.length;++i)o[e[i]]=t[i];for(i=0;i<r.length;++i)o[n[i]]=r[i];return a.ingest(o)}l.constructor=u,l.batchTransform=function(e,t){i.debug(e,["imputing"]);var n,a,o,s,u,l,f=this.param("groupby"),h=this.param("orderby"),d=this.param("method"),p=this.param("value"),g=this.param("field"),m=g.accessor,v=g.field,y=this._imputed||[],_=[],x=function(e,t,n){var i,a,o,s,u,l,c,f=[],h=function(e){return e(o)},d=function(e){return o=e,n.map(h)};for(u=f.domain=r.unique(e,d),c=u.length,l=u.reduce(function(e,t,n){return e[t]={value:t,index:n},e},{}),i={},a=0;a<e.length;++a)o=e[a],s=null==t?[]:t.map(h),(i[s]||(f.push(i[s]=Array(c)),i[s].values=s,i[s]))[l[d(o)].index]=o;return f}(t,f.accessor,h.accessor),b=x.domain;function M(e){return null==e?null:m(e)}for(o=0,u=x.length;o<u;++o)for(n=x[o],"value"!==d&&(p=r[d](n,M)),a=0,s=n.length;a<s;++a)null==n[a]&&((l=c(f.field,n.values,h.field,b[a]))[v]=p,_.push(l));for(a=0,s=_.length;a<s;++a)e.add.push(_[a]);for(a=0,s=y.length;a<s;++a)e.rem.push(y[a]);return this._imputed=_,e},e.exports=u,u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Impute transform",description:"Performs imputation of missing values.",type:"object",properties:{type:{enum:["impute"]},method:{description:"The imputation method to use.",oneOf:[{enum:["value","mean","median","min","max"]},{$ref:"#/refs/signal"}],default:"value"},value:{description:"The value to use for missing data if the method is 'value'.",oneOf:[{type:"number"},{type:"string"},{type:"boolean"},{type:"null"},{$ref:"#/refs/signal"}],default:0},field:{description:"The data field to impute.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},groupby:{description:"A list of fields to group the data into series.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},orderby:{description:"A list of fields to determine ordering within series.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","groupby","orderby","field"]}},PwiD:function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=i.ChangeSet,o=i.Graph.prototype,s=i.Node,u=n("BB2X"),l=n("Qpkz"),c=n("TrdW"),f=n("8NMF");function h(e){this._defs={},this._predicates={},this._scene=null,this._groups=null,this._node=null,this._builder=null,this._reset={axes:!1,legends:!1},this.config(e),this.expr=c(this),o.init.call(this)}var d=h.prototype=Object.create(o);d.constructor=h,d.defs=function(e){return arguments.length?(this._defs=e,this):this._defs},d.config=function(e){if(!arguments.length)return this._config;this._config=Object.create(f);for(var t in e){var n=e[t],i=this._config[t];r.isObject(n)&&r.isObject(i)?this._config[t]=r.extend({},i,n):this._config[t]=n}return this},d.width=function(e){return this._defs&&(this._defs.width=e),this._defs&&this._defs.marks&&(this._defs.marks.width=e),this._scene&&(this._scene.items[0].width=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},d.height=function(e){return this._defs&&(this._defs.height=e),this._defs&&this._defs.marks&&(this._defs.marks.height=e),this._scene&&(this._scene.items[0].height=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},d.node=function(){return this._node||(this._node=new s(this))},d.data=function(){var e=o.data.apply(this,arguments);return arguments.length>1&&this.node().addListener(e.pipeline()[0]),e},d.predicate=function(e,t){return 1===arguments.length?function(e){var t=this,n={};return r.isArray(e)?(e.forEach(function(e){n[e]=t._predicates[e]}),n):this._predicates[e]}.call(this,e):this._predicates[e]=t},d.predicates=function(){return this._predicates},d.scene=function(e){if(!arguments.length)return this._scene;this._builder&&(this.node().removeListener(this._builder),this._builder._groupBuilder.disconnect());var t=this,n=this._builder=new s(this);return n.evaluate=function(r){if(n._groupBuilder)return r;var i=n._groupBuilder=new u(t,t._defs.marks,t._scene={}),a=i.pipeline();return t._groups={},this.addListener(i.connect()),a[a.length-1].addListener(e),r},this.addListener(n),this},d.group=function(e,t){var n=this._groups;return 1===arguments.length?n[e]:(n[e]=t,this)},d.reset=function(){return this._scene&&this._reset.axes&&(l(this._scene,function(e){e.axes&&e.axes.forEach(function(e){e.reset()})}),this._reset.axes=!1),this._scene&&this._reset.legends&&(l(this._scene,function(e){e.legends&&e.legends.forEach(function(e){e.reset()})}),this._reset.legends=!1),this},d.addListener=function(e){this.node().addListener(e)},d.removeListener=function(e){this.node().removeListener(e)},d.fire=function(e){e||(e=a.create()),this.propagate(e,this.node())},e.exports=h},Py5Z:function(e,t,n){"use strict";var r=n("Fw/k"),i=n("cihr"),a=n("ZE31");t.defaultCellConfig={width:200,height:200},t.defaultFacetCellConfig={stroke:"#ccc",strokeWidth:1};var o;t.defaultFacetConfig={scale:r.defaultFacetScaleConfig,axis:i.defaultFacetAxisConfig,grid:{color:"#000000",opacity:.4,offset:0},cell:t.defaultFacetCellConfig},(o=t.FontWeight||(t.FontWeight={}))[o.NORMAL="normal"]="NORMAL",o[o.BOLD="bold"]="BOLD";var s;t.FontWeight;(s=t.Shape||(t.Shape={}))[s.CIRCLE="circle"]="CIRCLE",s[s.SQUARE="square"]="SQUARE",s[s.CROSS="cross"]="CROSS",s[s.DIAMOND="diamond"]="DIAMOND",s[s.TRIANGLEUP="triangle-up"]="TRIANGLEUP",s[s.TRIANGLEDOWN="triangle-down"]="TRIANGLEDOWN";var u,l=t.Shape;(u=t.HorizontalAlign||(t.HorizontalAlign={}))[u.LEFT="left"]="LEFT",u[u.RIGHT="right"]="RIGHT",u[u.CENTER="center"]="CENTER";var c;t.HorizontalAlign;(c=t.VerticalAlign||(t.VerticalAlign={}))[c.TOP="top"]="TOP",c[c.MIDDLE="middle"]="MIDDLE",c[c.BOTTOM="bottom"]="BOTTOM";var f,h=t.VerticalAlign;(f=t.FontStyle||(t.FontStyle={}))[f.NORMAL="normal"]="NORMAL",f[f.ITALIC="italic"]="ITALIC";var d;t.FontStyle;(d=t.Interpolate||(t.Interpolate={}))[d.LINEAR="linear"]="LINEAR",d[d.LINEAR_CLOSED="linear-closed"]="LINEAR_CLOSED",d[d.STEP="step"]="STEP",d[d.STEP_BEFORE="step-before"]="STEP_BEFORE",d[d.STEP_AFTER="step-after"]="STEP_AFTER",d[d.BASIS="basis"]="BASIS",d[d.BASIS_OPEN="basis-open"]="BASIS_OPEN",d[d.BASIS_CLOSED="basis-closed"]="BASIS_CLOSED",d[d.CARDINAL="cardinal"]="CARDINAL",d[d.CARDINAL_OPEN="cardinal-open"]="CARDINAL_OPEN",d[d.CARDINAL_CLOSED="cardinal-closed"]="CARDINAL_CLOSED",d[d.BUNDLE="bundle"]="BUNDLE",d[d.MONOTONE="monotone"]="MONOTONE";var p;t.Interpolate;(p=t.AreaOverlay||(t.AreaOverlay={}))[p.LINE="line"]="LINE",p[p.LINEPOINT="linepoint"]="LINEPOINT",p[p.NONE="none"]="NONE";t.AreaOverlay;t.defaultOverlayConfig={line:!1,pointStyle:{filled:!0},lineStyle:{}},t.defaultMarkConfig={color:"#4682b4",shape:l.CIRCLE,strokeWidth:2,size:30,barThinSize:2,ruleSize:1,tickThickness:1,fontSize:10,baseline:h.MIDDLE,text:"Abc",shortTimeLabels:!1,applyColorToBackground:!1},t.defaultConfig={numberFormat:"s",timeFormat:"%Y-%m-%d",countTitle:"Number of Records",cell:t.defaultCellConfig,mark:t.defaultMarkConfig,overlay:t.defaultOverlayConfig,scale:r.defaultScaleConfig,axis:i.defaultAxisConfig,legend:a.defaultLegendConfig,facet:t.defaultFacetConfig}},QNWf:function(e,t,n){"use strict";var r=n("h/tW"),i=n("x6Fv"),a=n("o+e1"),o=n("ZAUf");!function(e){function t(e,t){return t.bin?(e[a.field(t,{binSuffix:"_start"})]=!0,e[a.field(t,{binSuffix:"_mid"})]=!0,e[a.field(t,{binSuffix:"_end"})]=!0,e[a.field(t,{binSuffix:"_range"})]=!0):e[a.field(t)]=!0,e}e.parseUnit=function(e){var n={},a={};return e.forEach(function(e,i){e.aggregate?e.aggregate===r.AggregateOp.COUNT?(a["*"]=a["*"]||{},a["*"].count=!0):(a[e.field]=a[e.field]||{},a[e.field][e.aggregate]=!0):t(n,e)}),[{name:e.dataName(i.SUMMARY),dimensions:n,measures:a}]},e.parseFacet=function(e){var n=e.child().component.data;if(!n.source&&n.summary){var r=n.summary.map(function(n){n.dimensions=e.reduce(t,n.dimensions);var r=n.name.substr(e.child().name("").length);return e.child().renameData(n.name,r),n.name=r,n});return delete n.summary,r}return[]},e.parseLayer=function(e){var t={};return e.children().forEach(function(n){var r=n.component.data;!r.source&&r.summary&&r.summary.forEach(function(a){var s=o.hash(a.dimensions);s in t?function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&(n in e?e[n][i]=!0:e[n]={op:!0})}}(t[s].measures,a.measures):(a.name=e.dataName(i.SUMMARY)+"_"+o.keys(t).length,t[s]=a),n.renameData(n.dataName(i.SUMMARY),t[s].name),delete r.summary})}),o.vals(t)},e.assemble=function(e,t){return e.summary?e.summary.reduce(function(e,n){var r=n.dimensions,a=n.measures,s=o.keys(r),u=o.reduce(a,function(e,t,n){return e[n]=o.keys(t),e},{});return o.keys(a).length>0&&e.push({name:n.name,source:t.dataName(i.SOURCE),transform:[{type:"aggregate",groupby:s,summarize:u}]}),e},[]):[]}}(t.summary||(t.summary={}))},QSMf:function(e,t,n){"use strict";var r=n("P/aK"),i=n("ZAUf");function a(e,t){var n=e&&e[t];return n&&(void 0!==n.field||i.isArray(n)&&n.length>0)}function o(e,t,n,r){var o=0;e.forEach(function(e){a(t,e)&&(i.isArray(t[e])?t[e].forEach(function(t){n.call(r,t,e,o++)}):n.call(r,t[e],e,o++))})}function s(e,t,n,r){var o=[];return e.forEach(function(e){a(t,e)&&(i.isArray(t[e])?t[e].forEach(function(t){o.push(n.call(r,t,e))}):o.push(n.call(r,t[e],e)))}),o}function u(e,t,n,o,s){var u=o;return r.CHANNELS.forEach(function(e){a(t,e)&&(i.isArray(t[e])?t[e].forEach(function(t){u=n.call(s,u,t,e)}):u=n.call(s,u,t[e],e))}),u}t.countRetinal=function(e){var t=0;return e.color&&t++,e.opacity&&t++,e.size&&t++,e.shape&&t++,t},t.channels=function(e){return r.CHANNELS.filter(function(t){return a(e,t)})},t.has=a,t.isAggregate=function(e){return i.some(r.CHANNELS,function(t){return!(!a(e,t)||!e[t].aggregate)})},t.isRanged=function(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)},t.fieldDefs=function(e){var t=[];return r.CHANNELS.forEach(function(n){a(e,n)&&(i.isArray(e[n])?e[n].forEach(function(e){t.push(e)}):t.push(e[n]))}),t},t.forEach=function(e,t,n){o(r.CHANNELS,e,t,n)},t.channelMappingForEach=o,t.map=function(e,t,n){return s(r.CHANNELS,e,t,n)},t.channelMappingMap=s,t.reduce=function(e,t,n,i){return u(r.CHANNELS,e,t,n,i)},t.channelMappingReduce=u},Qpkz:function(e,t){e.exports=function e(t,n){var r,i,a,o,s;if(n(t))return!0;var u=["items","axisItems","legendItems"];for(a=0,o=u.length;a<o;++a)if(s=t[u[a]])for(r=0,i=s.length;r<i;++r)if(e(s[r],n))return!0}},QvNu:function(e,t,n){var r=n("zicW").Aggregator,i=r.prototype,a=n("Hqva"),o=a.Tuple,s=n("J731"),u=0;function l(){r.call(this),this._facet=null,this._facetID=++u}var c=l.prototype=Object.create(i);function f(e){s.debug({},["disconnecting cell",this.tuple._id]);var t=this.ds.pipeline();e.removeListener(t[0]),e._graph.removeListener(t[0]),e._graph.disconnect(t)}c.constructor=l,c.facet=function(e){return arguments.length?(this._facet=e,this):this._facet},c._ingest=function(e){return o.ingest(e,null)},c._assign=o.set,c._newcell=function(e,t){var n=i._newcell.call(this,e,t),r=this._facet;if(r){var a=r._graph,o=n.tuple,s=r.param("transform");n.ds=a.data(o._facetID,s,o),n.disconnect=f,r.addListener(s[0])}return n},c._newtuple=function(e,t){var n=i._newtuple.call(this,e);return this._facet&&(o.set(n,"key",t),o.set(n,"_facetID",this._facetID+"_"+t)),n},c.clear=function(){if(this._facet)for(var e in this._cells)this._cells[e].disconnect(this._facet);return i.clear.call(this)},c._on_add=function(e,t){this._facet&&t.ds._input.add.push(e)},c._on_rem=function(e,t){this._facet&&t.ds._input.rem.push(e)},c._on_mod=function(e,t,n,r){this._facet&&(n===r?n.ds._input.mod.push(e):(n.ds._input.rem.push(e),r.ds._input.add.push(e)))},c._on_drop=function(e){this._facet&&e.disconnect(this._facet)},c._on_keep=function(e){this._facet&&a.ChangeSet.copy(this._input,e.ds._input)},e.exports=l},RA6T:function(e,t){e.exports=function(e,t,n){var r=e.open(t),i=250,a=~~(1e4/i);e.addEventListener("message",function t(n){n.source===r&&(a=0,e.removeEventListener("message",t,!1))},!1),setTimeout(function e(){a<=0||(r.postMessage(n,"*"),setTimeout(e,i),a-=1)},i)}},RdYp:function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){return s.prototype.init.call(this,e),o.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value",default:10},maxbins:{type:"value",default:20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>",default:[5,2]}}),this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"},this.mutates(!0)}var l=u.prototype=Object.create(s.prototype);l.constructor=u,l.extent=function(e){var t,n=[this.param("min"),this.param("max")];return null!=n[0]&&null!=n[1]||(t=r.extent(e,this.param("field").accessor),null==n[0]&&(n[0]=t[0]),null==n[1]&&(n[1]=t[1])),n},l.batchTransform=function(e,t){a.debug(e,["binning"]);var n=this.extent(t),o=this._output,s=this.param("step"),u=this.param("steps"),l=this.param("minstep"),c=this.param("field").accessor,f={min:n[0],max:n[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};s&&(f.step=s),u&&(f.steps=u),l&&(f.minstep=l);var h=r.bins(f),d=h.step;function p(e){var t=c(e);t=null==t?null:h.start+d*~~((t-h.start)/d),i.set(e,o.start,t),i.set(e,o.end,t+d),i.set(e,o.mid,t+d/2)}return e.add.forEach(p),e.mod.forEach(p),e.rem.forEach(p),e.fields[o.start]=1,e.fields[o.end]=1,e.fields[o.mid]=1,e},e.exports=u,u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Bin transform",description:"Bins values into quantitative bins (e.g., for a histogram).",type:"object",properties:{type:{enum:["bin"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"The name of the field to bin values from."},min:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The minimum bin value to consider."},max:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum bin value to consider."},base:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The number base to use for automatic bin determination.",default:10},maxbins:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum number of allowable bins.",default:20},step:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"An exact step size to use between bins. If provided, options such as maxbins will be ignored."},steps:{description:"An array of allowable step sizes to choose from.",oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/signal"}]},minstep:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"A minimum allowable step size (particularly useful for integer values)."},div:{description:"An array of scale factors indicating allowable subdivisions.",oneOf:[{type:"array",items:{type:"number"},default:[5,2]},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"bin_start"},end:{type:"string",default:"bin_end"},mid:{type:"string",default:"bin_mid"}},additionalProperties:!1}},additionalProperties:!1,required:["type","field"]}},"S/OH":function(e,t,n){var r=n("zicW"),i=n("TrdW"),a=n("Hqva").Dependencies.SIGNALS,o=["datum","event","signals","width","height","padding"].concat(r.keys(i.codegen.functions));function s(e,t){return(t||[]).forEach(function(t){if(-1!==o.indexOf(t.name))throw Error('Signal name "'+t.name+'" is a reserved keyword ('+o.join(", ")+").");var n=e.signal(t.name,t.init).verbose(t.verbose);t.init&&t.init.expr&&(t.init.expr=e.expr(t.init.expr),n.value(u(e,t.init))),t.expr&&(t.expr=e.expr(t.expr),n.evaluate=function(r){var i=u(e,t),a=r.signals;return(i!==n.value()||n.verbose())&&(n.value(i),a[t.name]=1),a[t.name]?r:e.doNotPropagate},n.dependency(a,t.expr.globals),t.expr.globals.forEach(function(t){e.signal(t).addListener(n)}))}),t}function u(e,t){var n=t.expr.fn();return t.scale?s.scale(e,t,n):n}s.scale=function(e,t,n,a,o){var s=t.scale,u=s.name||s.signal||s,l=s.scope;return l&&(l.signal?l=e.signalRef(l.signal):r.isString(l)&&(l=(s._expr=s._expr||e.expr(l)).fn(a,o))),i.scale(e,s.invert,u,n,l)},e.exports=s,s.schema={refs:{signal:{title:"SignalRef",type:"object",properties:{signal:{type:"string"}},required:["signal"]},scopedScale:{oneOf:[{type:"string"},{type:"object",properties:{name:{oneOf:[{$ref:"#/refs/signal"},{type:"string"}]},scope:{oneOf:[{$ref:"#/refs/signal"},{type:"string"}]},invert:{type:"boolean",default:!1}},additionalProperties:!1,required:["name"]}]}},defs:{signal:{type:"object",properties:{name:{type:"string",not:{enum:o}},init:{},verbose:{type:"boolean",default:!1},expr:{type:"string"},scale:{$ref:"#/refs/scopedScale"},streams:{$ref:"#/defs/streams"}},additionalProperties:!1,required:["name"]}}}},SAbC:function(e,t,n){(function(e){"use strict";function t(e){return new r(e)}function n(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function r(e){var t=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(t){return t.map(a).join(e)}function a(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}this.parse=function(e,t){var r,i,a=this.parseRows(e,function(e,a){if(r)return r(e,a-1);var o,s,u;i=e,r=t?(s=t,u=n(o=e),function(e,t){return s(u(e),t,o)}):n(e)});return a.columns=i,a},this.parseRows=function(e,t){var n,i,a={},o={},s=[],u=e.length,l=0,c=0;function f(){if(l>=u)return o;if(i)return i=!1,a;var t,n=l;if(34===e.charCodeAt(n)){for(var s=n;s++<u;)if(34===e.charCodeAt(s)){if(34!==e.charCodeAt(s+1))break;++s}return l=s+2,13===(t=e.charCodeAt(s+1))?(i=!0,10===e.charCodeAt(s+2)&&++l):10===t&&(i=!0),e.slice(n+1,s).replace(/""/g,'"')}for(;l<u;){var c=1;if(10===(t=e.charCodeAt(l++)))i=!0;else if(13===t)i=!0,10===e.charCodeAt(l)&&(++l,++c);else if(t!==r)continue;return e.slice(n,l-c)}return e.slice(n)}for(;(n=f())!==o;){for(var h=[];n!==a&&n!==o;)h.push(n),n=f();t&&null==(h=t(h,c++))||s.push(h)}return s},this.format=function(t,n){var r,i,o;return null==n&&(r=t,i=Object.create(null),o=[],r.forEach(function(e){for(var t in e)t in i||o.push(i[t]=t)}),n=o),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")},this.formatRows=function(e){return e.map(i).join("\n")}}t.prototype=r.prototype;var i=t(","),a=t("\t");e.version="0.1.14",e.dsv=t,e.csv=i,e.tsv=a})(t)},SIx5:function(e,t,n){"use strict";var r=n("P/aK"),i=n("o+e1"),a=n("MtYt");!function(e){function t(e,t){var n=e.fieldDef(r.SIZE);if(n&&void 0!==n.value)return n.value;var i=e.config().mark;return i.barSize?i.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?i.barThinSize:e.config().scale.bandSize-1}e.markType=function(){return"rect"},e.properties=function(e){var n={},o=e.config().mark.orient,s=e.stack(),u=e.encoding().x,l=e.encoding().x2,c=i.isMeasure(u)||i.isMeasure(l);s&&r.X===s.fieldChannel?(n.x={scale:e.scaleName(r.X),field:e.field(r.X,{suffix:"_start"})},n.x2={scale:e.scaleName(r.X),field:e.field(r.X,{suffix:"_end"})}):c?"horizontal"===o?(e.has(r.X)?n.x={scale:e.scaleName(r.X),field:e.field(r.X)}:n.x={scale:e.scaleName(r.X),value:0},e.has(r.X2)?n.x2={scale:e.scaleName(r.X),field:e.field(r.X2)}:n.x2={scale:e.scaleName(r.X),value:0}):(n.xc={scale:e.scaleName(r.X),field:e.field(r.X)},n.width={value:t(e,r.X)}):e.fieldDef(r.X).bin?e.has(r.SIZE)&&"horizontal"!==o?(n.xc={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_mid"})},n.width={scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}):(n.x={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_start"}),offset:1},n.x2={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_end"})}):(e.has(r.X)?n.xc={scale:e.scaleName(r.X),field:e.field(r.X)}:n.x={value:0,offset:2},n.width=e.has(r.SIZE)&&"horizontal"!==o?{scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}:{value:t(e,r.X)});var f=e.encoding().y,h=e.encoding().y2,d=i.isMeasure(f)||i.isMeasure(h);return s&&r.Y===s.fieldChannel?(n.y={scale:e.scaleName(r.Y),field:e.field(r.Y,{suffix:"_start"})},n.y2={scale:e.scaleName(r.Y),field:e.field(r.Y,{suffix:"_end"})}):d?"horizontal"!==o?(e.has(r.Y)?n.y={scale:e.scaleName(r.Y),field:e.field(r.Y)}:n.y={scale:e.scaleName(r.Y),value:0},e.has(r.Y2)?n.y2={scale:e.scaleName(r.Y),field:e.field(r.Y2)}:n.y2={scale:e.scaleName(r.Y),value:0}):(n.yc={scale:e.scaleName(r.Y),field:e.field(r.Y)},n.height={value:t(e,r.Y)}):e.fieldDef(r.Y).bin?e.has(r.SIZE)&&"horizontal"===o?(n.yc={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_mid"})},n.height={scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}):(n.y={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_start"})},n.y2={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_end"}),offset:1}):(e.has(r.Y)?n.yc={scale:e.scaleName(r.Y),field:e.field(r.Y)}:n.y2={field:{group:"height"},offset:-1},n.height=e.has(r.SIZE)&&"horizontal"===o?{scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}:{value:t(e,r.Y)}),a.applyColorAndOpacity(n,e),n},e.labels=function(e){}}(t.bar||(t.bar={}))},SbOu:function(e,t,n){var r=n("zicW"),i=n("h36N");function a(e,t,n){var o=t.properties||n&&(t.properties={}),s=o.enter||n&&(o.enter={}),u=t.marks,l=e.config().marks||{};if(n){"symbol"===t.type&&!s.size&&l.symbolSize&&(s.size={value:l.symbolSize});var c={arc:"fill",area:"fill",rect:"fill",symbol:"fill",text:"fill",line:"stroke",path:"stroke",rule:"stroke"}[t.type];!s[c]&&l.color&&(s[c]={value:l.color})}return r.keys(o).forEach(function(n){o[n]=i(e,t.type,o[n])}),t.delay&&(t.delay=i(e,t.type,{delay:t.delay})),u&&(t.marks=u.map(function(t){return a(e,t,!0)})),t}e.exports=a,a.schema={defs:{mark:{type:"object",properties:{name:{type:"string"},key:{type:"string"},type:{enum:["rect","symbol","path","arc","area","line","rule","image","text","group"]},from:{type:"object",properties:{data:{type:"string"},mark:{type:"string"},transform:{$ref:"#/defs/transform"}},additionalProperties:!1},delay:{$ref:"#/refs/numberValue"},ease:{enum:["linear","quad","cubic","sin","exp","circle","bounce"].reduce(function(e,t){return["in","out","in-out","out-in"].forEach(function(n){e.push(t+"-"+n)}),e},[])},interactive:{type:"boolean"},properties:{type:"object",properties:{enter:{$ref:"#/defs/propset"},update:{$ref:"#/defs/propset"},exit:{$ref:"#/defs/propset"},hover:{$ref:"#/defs/propset"}},additionalProperties:!1,anyOf:[{required:["enter"]},{required:["update"]}]}},required:["type"]}}}},Sgrz:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva").Tuple,o=n("J731"),s=n("4JPs"),u=n("acp7");function l(e){return u.prototype.init.call(this,e),s.addParameters(this,{sort:{type:"array<field>",default:null},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"value",default:null},mode:{type:"value",default:"tidy"},size:{type:"array<value>",default:n("MRce").size},nodesize:{type:"array<value>",default:null},orient:{type:"value",default:"cartesian"}}),this._mode=null,this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var c={cartesian:function(e,t){return e.parent===t.parent?1:2},radial:function(e,t){return(e.parent===t.parent?1:2)/e.depth}},f=l.prototype=Object.create(u.prototype);f.constructor=l,f.batchTransform=function(e,t){o.debug(e,["hierarchy layout"]);var n=this._layout,s=this._output,u=this.param("mode"),l=this.param("sort"),f=this.param("nodesize"),h=this.param("parent").accessor,d=t.filter(function(e){return null===h(e)})[0];return u!==this._mode&&(this._mode=u,"tidy"===u&&(u="tree"),n=this._layout=r.layout[u]()),e.fields[s.x]=1,e.fields[s.y]=1,e.fields[s.depth]=1,"partition"===u?(e.fields[s.width]=1,e.fields[s.height]=1,n.value(this.param("field").accessor)):n.separation(c[this.param("orient")]),f.length&&"partition"!==u?n.nodeSize(f):n.size(this.param("size")),n.sort(l.field.length?i.comparator(l.field):null).children(this.param("children").accessor).nodes(d),t.forEach(function(e){a.set(e,s.x,e.x),a.set(e,s.y,e.y),a.set(e,s.depth,e.depth),"partition"===u&&(a.set(e,s.width,e.dx),a.set(e,s.height,e.dy))}),e},e.exports=l,l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Hierarchy transform",type:"object",properties:{type:{enum:["hierarchy"]},sort:{description:"A list of fields to use as sort criteria for sibling nodes.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},children:{description:"The data field for the children node array",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"children"},parent:{description:"The data field for the parent node",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"parent"},field:{description:"The value for the area of each leaf-level node for partition layouts.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},mode:{description:"The layout algorithm mode to use.",oneOf:[{enum:["tidy","cluster","partition"]},{$ref:"#/refs/signal"}],default:"tidy"},orient:{description:"The layout orientation to use.",oneOf:[{enum:["cartesian","radial"]},{$ref:"#/refs/signal"}],default:"cartesian"},size:{description:"The dimensions of the tree layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[500,500]},nodesize:{description:"Sets a fixed x,y size for each node (overrides the size parameter)",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:null},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},width:{type:"string",default:"layout_width"},height:{type:"string",default:"layout_height"},depth:{type:"string",default:"layout_depth"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},TLMq:function(e,t,n){"use strict";var r=n("h/tW"),i=n("P/aK"),a=n("x6Fv"),o=n("o+e1"),s=n("j8cM"),u=n("Fw/k"),l=n("f2i1"),c=n("z5TJ"),f=n("WJ2w"),h=n("ZAUf"),d=n("wKIX");function p(e,t,n){var o=t.fieldDef(n);if(e.domain)return e.domain;if(o.type===f.TEMPORAL)return d.rawDomain(o.timeUnit,n)?{data:o.timeUnit,field:"date"}:{data:t.dataTable(),field:t.field(n),sort:{field:t.field(n),op:"min"}};var s=t.stack();if(s&&n===s.fieldChannel)return s.offset===l.StackOffset.NORMALIZE?[0,1]:{data:t.dataName(a.STACKED_SCALE),field:t.field(n,{prefn:"sum_"})};var c,p,m,v=(c=e,p=n,m=t.fieldDef(p),c.useRawDomain&&m.aggregate&&r.SHARED_DOMAIN_OPS.indexOf(m.aggregate)>=0&&(m.type===f.QUANTITATIVE&&!m.bin||m.type===f.TEMPORAL&&h.contains([u.ScaleType.TIME,u.ScaleType.UTC],c.type))),y=g(t,n,e.type);return v?{data:a.SOURCE,field:t.field(n,{noAggregate:!0})}:o.bin?e.type===u.ScaleType.ORDINAL?{data:t.dataTable(),field:t.field(n,{binSuffix:"_range"}),sort:{field:t.field(n,{binSuffix:"_start"}),op:"min"}}:n===i.COLOR?{data:t.dataTable(),field:t.field(n,{binSuffix:"_start"})}:{data:t.dataTable(),field:[t.field(n,{binSuffix:"_start"}),t.field(n,{binSuffix:"_end"})]}:y?{data:y.op?a.SOURCE:t.dataTable(),field:o.type===f.ORDINAL&&n===i.COLOR?t.field(n,{prefn:"rank_"}):t.field(n),sort:y}:{data:t.dataTable(),field:o.type===f.ORDINAL&&n===i.COLOR?t.field(n,{prefn:"rank_"}):t.field(n)}}function g(e,t,n){if(n===u.ScaleType.ORDINAL){var r=e.sort(t);return!!h.contains(["ascending","descending",void 0],r)||("string"!=typeof r?{op:r.op,field:r.field}:void 0)}}function m(e,t,n){var r=t.fieldDef(n),a=t.config().scale;if(e.type===u.ScaleType.ORDINAL&&e.bandSize&&h.contains([i.X,i.Y],n))return{bandSize:e.bandSize};if(e.range&&!h.contains([i.X,i.Y,i.ROW,i.COLUMN],n))return{range:e.range};switch(n){case i.ROW:return{range:"height"};case i.COLUMN:return{range:"width"}}var l=t;switch(n){case i.X:return{rangeMin:0,rangeMax:l.config().cell.width};case i.Y:return{rangeMin:l.config().cell.height,rangeMax:0};case i.SIZE:if(l.mark()===s.BAR){if(void 0!==a.barSizeRange)return{range:a.barSizeRange};var c="horizontal"===t.config().mark.orient?i.Y:i.X;return{range:[t.config().mark.barThinSize,t.scale(c).bandSize]}}if(l.mark()===s.TEXT)return{range:a.fontSizeRange};if(l.mark()===s.RULE)return{range:a.ruleSizeRange};if(l.mark()===s.TICK)return{range:a.tickSizeRange};if(void 0!==a.pointSizeRange)return{range:a.pointSizeRange};var d=function(e){var t=e.config().scale,n=e.has(i.X),r=e.has(i.Y),a=o.isMeasure(e.encoding().x),s=o.isMeasure(e.encoding().y);if(n&&r)return a!==s?e.scale(a?i.Y:i.X).bandSize:Math.min(e.scale(i.X).bandSize||t.bandSize,e.scale(i.Y).bandSize||t.bandSize);if(r)return s?e.config().scale.bandSize:e.scale(i.Y).bandSize;if(n)return a?e.config().scale.bandSize:e.scale(i.X).bandSize;return e.config().scale.bandSize}(l);return{range:[9,(d-2)*(d-2)]};case i.SHAPE:return{range:a.shapeRange};case i.COLOR:return r.type===f.NOMINAL?{range:a.nominalColorRange}:{range:a.sequentialColorRange};case i.OPACITY:return{range:a.opacity}}return{}}t.COLOR_LEGEND="color_legend",t.COLOR_LEGEND_LABEL="color_legend_label",t.parseScaleComponent=function(e){return e.channels().reduce(function(n,r){if(e.scale(r)){var a=e.fieldDef(r),s={main:(l=e,c=a,d=r,g=l.scale(d),v=l.sort(d),y={name:l.scaleName(d),type:g.type},d===i.X&&l.has(i.X2)?l.has(i.X)?y.domain={fields:[p(g,l,i.X),p(g,l,i.X2)]}:y.domain=p(g,l,i.X2):d===i.Y&&l.has(i.Y2)?l.has(i.Y)?y.domain={fields:[p(g,l,i.Y),p(g,l,i.Y2)]}:y.domain=p(g,l,i.Y2):y.domain=p(g,l,d),h.extend(y,m(g,l,d)),v&&"descending"===("string"==typeof v?v:v.order)&&(y.reverse=!0),["round","clamp","nice","exponent","zero","padding","points"].forEach(function(e){var n=t[e](g,d,c,l);void 0!==n&&(y[e]=n)}),y)};r===i.COLOR&&e.legend(i.COLOR)&&(a.type===f.ORDINAL||a.bin||a.timeUnit)&&(s.colorLegend=(M=a,{name:(b=e).scaleName(t.COLOR_LEGEND),type:u.ScaleType.ORDINAL,domain:{data:b.dataTable(),field:b.field(i.COLOR,M.bin||M.timeUnit?{}:{prefn:"rank_"}),sort:!0},range:{data:b.dataTable(),field:b.field(i.COLOR),sort:!0}}),a.bin&&(s.binColorLegend=(x=a,{name:(_=e).scaleName(t.COLOR_LEGEND_LABEL),type:u.ScaleType.ORDINAL,domain:{data:_.dataTable(),field:_.field(i.COLOR),sort:!0},range:{data:_.dataTable(),field:o.field(x,{binSuffix:"_range"}),sort:{field:_.field(i.COLOR,{binSuffix:"_start"}),op:"min"}}}))),n[r]=s}var l,c,d,g,v,y,_,x,b,M;return n},{})},t.scaleType=function(e,t,n,r){if(!i.hasScale(n))return null;if(h.contains([i.ROW,i.COLUMN,i.SHAPE],n))return u.ScaleType.ORDINAL;if(void 0!==e.type)return e.type;switch(t.type){case f.NOMINAL:return u.ScaleType.ORDINAL;case f.ORDINAL:return n===i.COLOR?u.ScaleType.LINEAR:u.ScaleType.ORDINAL;case f.TEMPORAL:if(n===i.COLOR)return u.ScaleType.TIME;if(t.timeUnit)switch(t.timeUnit){case c.TimeUnit.HOURS:case c.TimeUnit.DAY:case c.TimeUnit.MONTH:case c.TimeUnit.QUARTER:return u.ScaleType.ORDINAL;default:return u.ScaleType.TIME}return u.ScaleType.TIME;case f.QUANTITATIVE:return t.bin?h.contains([i.X,i.Y,i.COLOR],n)?u.ScaleType.LINEAR:u.ScaleType.ORDINAL:u.ScaleType.LINEAR}return null},t.domain=p,t.domainSort=g,t.rangeMixins=m,t.clamp=function(e){if(h.contains([u.ScaleType.LINEAR,u.ScaleType.POW,u.ScaleType.SQRT,u.ScaleType.LOG,u.ScaleType.TIME,u.ScaleType.UTC],e.type))return e.clamp},t.exponent=function(e){if(e.type===u.ScaleType.POW)return e.exponent},t.nice=function(e,t,n){if(h.contains([u.ScaleType.LINEAR,u.ScaleType.POW,u.ScaleType.SQRT,u.ScaleType.LOG,u.ScaleType.TIME,u.ScaleType.UTC,u.ScaleType.QUANTIZE],e.type))return void 0!==e.nice?e.nice:h.contains([u.ScaleType.TIME,u.ScaleType.UTC],e.type)?d.smallestUnit(n.timeUnit):h.contains([i.X,i.Y],t)},t.padding=function(e,t){if(e.type===u.ScaleType.ORDINAL&&h.contains([i.X,i.Y],t))return e.padding},t.points=function(e,t,n,r){if(e.type===u.ScaleType.ORDINAL&&h.contains([i.X,i.Y],t))return!0},t.round=function(e,t){if(h.contains([i.X,i.Y,i.ROW,i.COLUMN,i.SIZE],t)&&void 0!==e.round)return e.round},t.zero=function(e,t,n){if(!h.contains([u.ScaleType.TIME,u.ScaleType.UTC,u.ScaleType.ORDINAL],e.type))return void 0!==e.zero?e.zero:!n.bin&&h.contains([i.X,i.Y],t)}},TXaq:function(e,t,n){var r=n("Hqva").Tuple,i=n("J731"),a=n("4JPs");function o(e){return a.prototype.init.call(this,e),a.addParameters(this,{field:{type:"value"},expr:{type:"expr"}}),this.mutates(!0)}var s=o.prototype=Object.create(a.prototype);s.constructor=o,s.transform=function(e){i.debug(e,["formulating"]);var t=this.param("field"),n=this.param("expr"),a=!1;function o(e){r.set(e,t,n(e)),a=!0}return e.add.forEach(o),this.reevaluate(e)&&e.mod.forEach(o),a&&(e.fields[t]=1),e},e.exports=o,o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Formula transform",description:"Extends data elements with new values according to a calculation formula.",type:"object",properties:{type:{enum:["formula"]},field:{type:"string",description:"The property name in which to store the computed formula value."},expr:{type:"string",description:"A string containing an expression (in JavaScript syntax) for the formula."}},required:["type","field","expr"]}},TrdW:function(e,t,n){var r=n("zicW"),i=r.template,a=n("jNWb"),o=["datum","parent","event","signals"],s=a.compiler(o,{idWhiteList:o,fieldVar:o[0],globalVar:function(e){return"this.sig["+r.str(e)+"]._value"},functions:function(e){var t,n=a.functions(e);return n.eventItem="event.vg.getItem",n.eventGroup="event.vg.getGroup",n.eventX="event.vg.getX",n.eventY="event.vg.getY",n.open=(t=e,function(e){var n=(e=e.map(t)).length;if(n<1||n>2)throw Error("open takes exactly 1 or 2 arguments.");return"this.defs.open(this.model, "+e[0]+(n>1?","+e[1]:"")+")"}),n.scale=l(e,!1),n.iscale=l(e,!0),n.inrange="this.defs.inrange",n.indata=h(e),n.format="this.defs.format",n.timeFormat="this.defs.timeFormat",n.utcFormat="this.defs.utcFormat",n},functionDefs:function(){return{scale:c,inrange:f,indata:d,format:p,timeFormat:g,utcFormat:m,open:u}}});function u(e,t,n){if("undefined"==typeof window||!window||!window.open)throw Error("Open function can only be invoked in a browser.");var i=r.extend({type:"open",url:t,name:n},e.config().load),a=r.load.sanitizeUrl(i);if(!a)throw Error("Invalid URL: "+i.url);window.open(a,n)}function l(e,t){return function(n){var r=(n=n.map(e)).length;if(r<2||r>3)throw Error("scale takes exactly 2 or 3 arguments.");return"this.defs.scale(this.model, "+t+", "+n[0]+","+n[1]+(r>2?","+n[2]:"")+")"}}function c(e,t,n,r,i){if(i&&i.scale||(i=i&&i.mark?i.mark.group:e.scene().items[0]),e.group(i._id)!==i)throw Error('Scope for scale "'+n+'" is not a valid group item.');var a=i.scale(n);return a?t?a.invert(r):a(r):r}function f(e,t,n,r){var i=t,a=n;return t>n&&(i=n,a=t),r?i<e&&a>e:i<=e&&a>=e}function h(e){return function(t,n,r,i){var a;if(3!==t.length)throw Error("indata takes 3 arguments.");if("Literal"!==t[0].type)throw Error("Data source name must be a literal for indata.");return i[a=t[0].value]=1,"Literal"===t[2].type&&h.model.requestIndex(a,t[2].value),"this.defs.indata(this.model,"+(t=t.map(e))[0]+","+t[1]+","+t[2]+")"}}function d(e,t,n,r){return e.data(t).getIndex(r)[n]>0}function p(e,t){return i.format(e,"number")(t)}function g(e,t){return i.format(e,"time")(t)}function m(e,t){return i.format(e,"utc")(t)}function v(e){return function(t){h.model=e;var n=s(t);return n.model=e,n.sig=e?e._signals:{},n}}v.scale=c,v.codegen=s.codegen,e.exports=v},UaGl:function(e,t,n){e.exports={axes:n("W+IH"),background:n("fxxq"),data:n("OTIj"),events:n("XSKZ"),expr:n("TrdW"),legends:n("v4pi"),mark:n("SbOu"),marks:n("92+E"),modify:n("r7he"),padding:n("O3lN"),predicates:n("yaQe"),properties:n("h36N"),signals:n("S/OH"),spec:n("ybCx"),streams:n("6gf1"),transforms:n("DUWk")}},Uikm:function(e,t,n){var r=n("4JPs"),i=n("3Y21");function a(e){return r.addParameters(this,{transform:{type:"custom",set:function(e){return this._transform._pipeline=e,this._transform},get:function(){var e=n("DUWk"),t=this._transform;return t._pipeline.map(function(n){return e(t._graph,n)})}}}),this._pipeline=[],i.call(this,e)}var o=a.prototype=Object.create(i.prototype);o.constructor=a,o.aggr=function(){return i.prototype.aggr.call(this).facet(this)},o.transform=function(e,t){var n=i.prototype.transform.call(this,e,t);return e.add.length&&this.listeners()[0].rerank(),n},e.exports=a;var s=n("zicW");a.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Facet transform",description:'A special aggregate transform that organizes a data set into groups or "facets".',type:"object",properties:s.extend({},i.schema.properties,{type:{enum:["facet"]},transform:{$ref:"#/defs/transform"}}),additionalProperties:!1,required:["type"]}},"Utn/":function(e,t,n){"use strict";var r=n("ZAUf"),i=n("j8cM");t.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},t.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:r.toMap(["row","column","x","y","size","color","detail"]),line:r.toMap(["row","column","x","y","color","detail"]),area:r.toMap(["row","column","x","y","color","detail"]),tick:r.toMap(["row","column","x","y","color","detail"]),circle:r.toMap(["row","column","x","y","color","size","detail"]),square:r.toMap(["row","column","x","y","color","size","detail"]),point:r.toMap(["row","column","x","y","color","size","detail","shape"]),text:r.toMap(["row","column","size","color","text"])},t.getEncodingMappingError=function(e,n,r){void 0===n&&(n=t.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===r&&(r=t.DEFAULT_SUPPORTED_CHANNEL_TYPE);var a=e.mark,o=e.encoding,s=n[a],u=r[a];for(var l in s)if(!(s[l]in o))return'Missing encoding channel "'+s[l]+'" for mark "'+a+'"';for(var c in o)if(!u[c])return'Encoding channel "'+c+'" is not supported by mark type "'+a+'"';return a!==i.BAR||o.x||o.y?null:"Missing both x and y for bar"}},V22v:function(e,t,n){"use strict";var r=n("ZAUf"),i=n("jMte"),a=n("hBex"),o=n("t3C9"),s=n("1PdY"),u=n("nOes"),l=n("pAWG"),c=n("yixx"),f=n("QNWf"),h=n("kowr"),d=n("736r"),p=n("k66X"),g=n("vY52");t.parseUnitData=function(e){return{formatParse:a.formatParse.parseUnit(e),nullFilter:o.nullFilter.parseUnit(e),filter:s.filter.parseUnit(e),nonPositiveFilter:c.nonPositiveFilter.parseUnit(e),source:i.source.parseUnit(e),bin:u.bin.parseUnit(e),calculate:l.formula.parseUnit(e),timeUnit:d.timeUnit.parseUnit(e),timeUnitDomain:p.timeUnitDomain.parseUnit(e),summary:f.summary.parseUnit(e),stackScale:h.stackScale.parseUnit(e),colorRank:g.colorRank.parseUnit(e)}},t.parseFacetData=function(e){return{formatParse:a.formatParse.parseFacet(e),nullFilter:o.nullFilter.parseFacet(e),filter:s.filter.parseFacet(e),nonPositiveFilter:c.nonPositiveFilter.parseFacet(e),source:i.source.parseFacet(e),bin:u.bin.parseFacet(e),calculate:l.formula.parseFacet(e),timeUnit:d.timeUnit.parseFacet(e),timeUnitDomain:p.timeUnitDomain.parseFacet(e),summary:f.summary.parseFacet(e),stackScale:h.stackScale.parseFacet(e),colorRank:g.colorRank.parseFacet(e)}},t.parseLayerData=function(e){return{filter:s.filter.parseLayer(e),formatParse:a.formatParse.parseLayer(e),nullFilter:o.nullFilter.parseLayer(e),nonPositiveFilter:c.nonPositiveFilter.parseLayer(e),source:i.source.parseLayer(e),bin:u.bin.parseLayer(e),calculate:l.formula.parseLayer(e),timeUnit:d.timeUnit.parseLayer(e),timeUnitDomain:p.timeUnitDomain.parseLayer(e),summary:f.summary.parseLayer(e),stackScale:h.stackScale.parseLayer(e),colorRank:g.colorRank.parseLayer(e)}},t.assembleData=function(e,t){var n=e.component.data,a=i.source.assemble(e,n);if(a&&t.push(a),f.summary.assemble(n,e).forEach(function(e){t.push(e)}),t.length>0){var o=t[t.length-1],s=g.colorRank.assemble(n);s.length>0&&(o.transform=(o.transform||[]).concat(s));var u=c.nonPositiveFilter.assemble(n);u.length>0&&(o.transform=(o.transform||[]).concat(u))}else{if(r.keys(n.colorRank).length>0)throw new Error("Invalid colorRank not merged");if(r.keys(n.nonPositiveFilter).length>0)throw new Error("Invalid nonPositiveFilter not merged")}var l=h.stackScale.assemble(n);return l&&t.push(l),p.timeUnitDomain.assemble(n).forEach(function(e){t.push(e)}),t}},VeBo:function(e,t){function n(){this._active=null,this._handlers={}}var r=n.prototype;r.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.padding(t)},r.element=function(){return this._el},r.padding=function(e){return this._padding=e||{top:0,left:0,bottom:0,right:0},this},r.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},r.on=function(){},r.off=function(){},r.handlers=function(){var e,t=this._handlers,n=[];for(e in t)n.push.apply(n,t[e]);return n},r.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},e.exports=n},Vp7n:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("LHV8").Item,o=n("Hqva"),s=o.Node,u=o.Dependencies,l=o.Tuple,c=o.ChangeSet,f={},h=n("XVii"),d=n("rnWk"),p=n("OTIj");function g(){return arguments.length?this.init.apply(this,arguments):this}var m=g.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"},v=g.prototype=new s;function y(){var e=l.ingest(new a(this._mark));return this._def.width&&l.set(e,"width",this._def.width),this._def.height&&l.set(e,"height",this._def.height),e}function _(e,t,n,i,a){var o,s,u,c,f,h,d,p=function(e){if(null==e)return null;var t=r.array(e).map(r.accessor);return function(e){for(var n="",r=0,i=t.length;r<i;++r)r>0&&(n+="|"),n+=String(t[r](e));return n}}(this._def.key||(i?"_id":null)),g=this._mark.items||[],v=i?e.rem:g,_=l.idMap(!i||a?n:e.mod),x=[];for(o=0,u=v.length;o<u;++o)(c=v[o]===g[o]?g[o]:p?this._map[p(v[o])]:v[o]).status=m.EXIT;for(o=0,u=n.length;o<u;++o)f=n[o],h=!(c=p?this._map[s=p(f)]:g[o])&&(c=y.call(this),!0),c.status=h?m.ENTER:m.UPDATE,d=!h&&c.datum!==f,c.datum=f,p&&(l.set(c,"key",s),this._map[s]=c),h?t.add.push(c):(d||_[f._id])&&t.mod.push(c),x.push(c);for(o=0,u=v.length;o<u;++o)(c=v[o]===g[o]?g[o]:p?this._map[s=p(v[o])]:v[o]).status===m.EXIT&&(c._dirty=!0,e.dirty.push(c),x.push(c),t.rem.push(c),p&&(this._map[s]=null));return this._mark.items=x,t}v.init=function(e,t,n,i,a,o){return s.prototype.init.call(this,e).router(!0).collector(!0),this._def=t,this._mark=n,this._from=(t.from?t.from.data:null)||o,this._ds=r.isString(this._from)?e.data(this._from):null,this._map={},this._status=null,n.def=t,n.marktype=t.type,n.interactive=!1!==t.interactive,n.items=[],r.isValid(t.name)&&(n.name=t.name),this._parent=i,this._parent_id=a,t.from&&(t.from.mark||t.from.transform||t.from.modify)&&function(){var e,t,n,r,i,a,o,u=this._def.from,l=u.mark;if(l)r=this.sibling(l),e=r._isSuper?r:r._bounder,t=["vg",this._parent_id,l,e.listeners(!0).length].join("_"),n={name:t,transform:u.transform,modify:u.modify};else{if(!(e=this._graph.data(this._from)))throw Error('Data source "'+this._from+'" is not defined.');t=["vg",this._from,this._def.type,e.listeners(!0).length].join("_"),n={name:t,source:this._from,transform:u.transform,modify:u.modify}}this._from=t,this._ds=p.datasource(this._graph,n),l?((o=new s(this._graph).addListener(this._ds.listener())).evaluate=function(e){var t=c.create(e),n=r._output;return t.add=n.add,t.mod=n.mod,t.rem=n.rem,t},e.addListener(o)):(i=this._ds.source().last(),(a=c.create(i)).add=i.add,a.mod=i.mod,a.rem=i.rem,a.stamp=null,this._graph.propagate(a,this._ds.listener(),i.stamp))}.call(this),this._isSuper="group"!==this._def.type,this._encoder=new h(this._graph,this._mark,this),this._bounder=new d(this._graph,this._mark),this._output=null,this._ds&&this._encoder.dependency(u.DATA,this._from),this.dependency(u.DATA,this._encoder.dependency(u.DATA)),this.dependency(u.SCALES,this._encoder.dependency(u.SCALES)),this.dependency(u.SIGNALS,this._encoder.dependency(u.SIGNALS)),this},v.ds=function(){return this._ds},v.parent=function(){return this._parent},v.encoder=function(){return this._encoder},v.pipeline=function(){return[this]},v.connect=function(){var e=this;return this._graph.connect(this.pipeline()),this._encoder._scales.forEach(function(t){(t=e._parent.scale(t))&&t.addListener(e)}),this._parent&&(this._isSuper?this.addListener(this._parent._collector):this._bounder.addListener(this._parent._collector)),this._status=1,this},v.disconnect=function(){var e=this;if(!this._listeners.length)return this;function t(t){for(var n,r=0,i=t.length;r<i;++r)(n=e._parent.scale(t[r]))&&n.removeListener(e)}return s.prototype.disconnect.call(this),this._graph.disconnect(this.pipeline()),t(this._encoder._scales),t(r.keys(this._mark._scaleRefs)),this._status=2,this},v.sibling=function(e){return this._parent.child(e,this._parent_id)},v.evaluate=function(e){i.debug(e,["building",this._from||this._def.from,this._def.type]);var t,n,a,o,s=this,l=(this._mark.def.properties||{}).update||{},h=c.create(e);if(this._ds){if(a=h.data[o=this._ds.name()],h.data[o]=null,t=this._encoder.reevaluate(h),h.data[o]=a,!(n=this._ds.last()))throw Error("Builder evaluated before backing DataSource.");n.stamp>this._stamp?_.call(this,n,h,this._ds.values(),!0,t):t&&(h.mod=this._mark.items.slice())}else a=r.isFunction(this._def.from)?this._def.from():[f],_.call(this,e,h,a);return this._output=h=this._graph.evaluate(h,this._encoder),l.nested&&l.nested.length&&1===this._status&&r.keys(this._mark._scaleRefs).forEach(function(e){var t=s._parent.scale(e);t&&(t.addListener(s),s.dependency(u.SCALES,e),s._encoder.dependency(u.SCALES,e))}),this._isSuper&&(h.mod=h.mod.filter(function(e){return e._dirty}),h=this._graph.evaluate(h,this._bounder)),h},e.exports=g},"W+IH":function(e,t,n){var r=n("zicW"),i=n("lKLM"),a=n("YvtE"),o={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};function s(e,t,n,s){var u,l,c=(u=e.config(),l=u.axis,{x:r.extend(r.duplicate(l),u.axis_x),y:r.extend(r.duplicate(l),u.axis_y)});(t||[]).forEach(function(t,u){n[u]=n[u]||i(e,c[t.type]),function(e,t,n,i,s){var u;void 0!==t.scale&&i.scale(u=s.scale(t.scale));var l=e.grid;r.isObject(l)&&(e.grid=void 0!==l[u.type]?l[u.type]:l.default);i.orient(a(t,e,"orient",o[t.type])),i.offset(a(t,e,"offset",0)),i.layer(a(t,e,"layer","front")),i.grid(a(t,e,"grid",!1)),i.title(t.title||null),i.titleOffset(a(t,e,"titleOffset")),i.tickValues(t.values||null),i.tickFormat(t.format||null),i.tickFormatType(t.formatType||null),i.tickSubdivide(t.subdivide||0),i.tickPadding(a(t,e,"tickPadding",e.padding));var c=a(t,e,"tickSize"),f=[c,c,c];f[0]=a(t,e,"tickSizeMajor",f[0]),f[1]=a(t,e,"tickSizeMinor",f[1]),f[2]=a(t,e,"tickSizeEnd",f[2]),f.length&&i.tickSize.apply(i,f);i.tickCount(a(t,e,"ticks"));var h=t.properties;h&&h.ticks?(i.majorTickProperties(h.majorTicks?r.extend({},h.ticks,h.majorTicks):h.ticks),i.minorTickProperties(h.minorTicks?r.extend({},h.ticks,h.minorTicks):h.ticks)):(i.majorTickProperties(h&&h.majorTicks||{}),i.minorTickProperties(h&&h.minorTicks||{}));i.tickLabelProperties(h&&h.labels||{}),i.titleProperties(h&&h.title||{}),i.gridLineProperties(h&&h.grid||{}),i.domainProperties(h&&h.axis||{})}(c[t.type],t,0,n[u],s)})}e.exports=s,s.schema={defs:{axis:{type:"object",properties:{type:{enum:["x","y"]},scale:{type:"string"},orient:{enum:["top","bottom","left","right"]},title:{type:"string"},titleOffset:{type:"number"},format:{type:"string"},formatType:{enum:["time","utc","string","number"]},ticks:{type:"number"},values:{type:"array",items:{type:["string","number"]}},subdivide:{type:"number"},tickPadding:{type:"number"},tickSize:{type:"number"},tickSizeMajor:{type:"number"},tickSizeMinor:{type:"number"},tickSizeEnd:{type:"number"},offset:{oneOf:[{type:"number"},{type:"object",properties:{scale:{type:"string"},value:{type:["string","number"]}},required:["scale","value"],additionalProperties:!1}]},layer:{enum:["front","back"],default:"front"},grid:{type:"boolean"},properties:{type:"object",properties:{ticks:{$ref:"#/defs/propset"},majorTicks:{$ref:"#/defs/propset"},minorTicks:{$ref:"#/defs/propset"},labels:{$ref:"#/defs/propset"},title:{$ref:"#/defs/propset"},grid:{$ref:"#/defs/propset"},axis:{$ref:"#/defs/propset"}},additionalProperties:!1}},additionalProperties:!1,required:["type","scale"]}}}},WCPv:function(e,t,n){e.exports={canvas:n("oCE4"),svg:n("95dH")}},WFOa:function(e,t,n){function r(e){var t=e.getContext("2d");if(!t.vgLineDash){var n=function(){},r=[];return t.setLineDash?(t.vgLineDash=function(e){this.setLineDash(e||r)},t.vgLineDashOffset=function(e){this.lineDashOffset=e}):void 0!==t.webkitLineDash?(t.vgLineDash=function(e){this.webkitLineDash=e||r},t.vgLineDashOffset=function(e){this.webkitLineDashOffset=e}):void 0!==t.mozDash?(t.vgLineDash=function(e){this.mozDash=e},t.vgLineDashOffset=n):(t.vgLineDash=n,t.vgLineDashOffset=n),e}}e.exports={instance:function(e,t){var i;if(e=e||1,t=t||1,"undefined"!=typeof document&&document.createElement)(i=document.createElement("canvas")).width=e,i.height=t;else{var a=n(7);if(!a.prototype)return null;i=new a(e,t)}return r(i)},resize:function(e,t,n,r,i){var a=this._ctx=e.getContext("2d"),o=1;return e.width=t+r.left+r.right,e.height=n+r.top+r.bottom,i&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&(a.pixelratio=o=function(e){var t=e.getContext("2d"),n=window&&window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=n/r;if(n!==r){var a=e.width,o=e.height;e.width=a*i,e.height=o*i,e.style.width=a+"px",e.style.height=o+"px"}return i}(e)||1),a.setTransform(o,0,0,o,o*r.left,o*r.top),e},lineDash:r}},WJ2w:function(e,t,n){"use strict";var r;(r=t.Type||(t.Type={}))[r.QUANTITATIVE="quantitative"]="QUANTITATIVE",r[r.ORDINAL="ordinal"]="ORDINAL",r[r.TEMPORAL="temporal"]="TEMPORAL",r[r.NOMINAL="nominal"]="NOMINAL";var i=t.Type;t.QUANTITATIVE=i.QUANTITATIVE,t.ORDINAL=i.ORDINAL,t.TEMPORAL=i.TEMPORAL,t.NOMINAL=i.NOMINAL,t.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"},t.TYPE_FROM_SHORT_TYPE={Q:t.QUANTITATIVE,T:t.TEMPORAL,O:t.ORDINAL,N:t.NOMINAL},t.getFullName=function(e){var n=e;return t.TYPE_FROM_SHORT_TYPE[n.toUpperCase()]||n.toLowerCase()}},Wd6V:function(e,t,n){var r=n("lnKO"),i=n("BONk").text,a=n("3Scv"),o=n("gWW/"),s=new r;e.exports={draw:function(e,t,n){if(t.items&&t.items.length)for(var r,i,s,u,l,c,f,h=t.items,d=0,p=h.length;d<p;++d)r=h[d],n&&!n.intersects(r.bounds)||(f=a.value(r.text))&&0!==(i=null==r.opacity?1:r.opacity)&&(e.font=a.font(r),e.textAlign=r.align||"left",s=r.x||0,u=r.y||0,(l=r.radius)&&(c=(r.theta||0)-Math.PI/2,s+=l*Math.cos(c),u+=l*Math.sin(c)),r.angle&&(e.save(),e.translate(s,u),e.rotate(r.angle*Math.PI/180),s=u=0),s+=r.dx||0,u+=(r.dy||0)+a.offset(r),r.fill&&o.fill(e,r,i)&&e.fillText(f,s,u),r.stroke&&o.stroke(e,r,i)&&e.strokeText(f,s,u),r.angle&&e.restore())},pick:o.pick(function(e,t,n,r,a,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var u=i(t,s,!0),l=-t.angle*Math.PI/180,c=Math.cos(l),f=Math.sin(l),h=t.x,d=t.y,p=c*a-f*o+(h-h*c+d*f),g=f*a+c*o+(d-h*f-d*c);return u.contains(p,g)})}},Wwtv:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n("ZAUf"),a=n("Py5Z"),o=n("V22v"),s=n("YBv9"),u=n("jGoH"),l=n("MtYt"),c=n("7YRp"),f=function(e){function t(t,n,r){var i=this;e.call(this,t,n,r),this._config=this._initConfig(t.config,n),this._children=t.layers.map(function(e,t){return l.buildModel(e,i,i.name("layer_"+t))})}return r(t,e),t.prototype._initConfig=function(e,t){return i.mergeDeep(i.duplicate(a.defaultConfig),e,t?t.config():{})},t.prototype.has=function(e){return!1},t.prototype.children=function(){return this._children},t.prototype.isOrdinalScale=function(e){return this._children[0].isOrdinalScale(e)},t.prototype.dataTable=function(){return this._children[0].dataTable()},t.prototype.fieldDef=function(e){return null},t.prototype.stack=function(){return null},t.prototype.parseData=function(){this._children.forEach(function(e){e.parseData()}),this.component.data=o.parseLayerData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this._children.forEach(function(e,t){e.parseLayoutData()}),this.component.layout=s.parseLayerLayout(this)},t.prototype.parseScale=function(){var e=this,t=this.component.scale={};this._children.forEach(function(n){n.parseScale(),i.keys(n.component.scale).forEach(function(r){var a=n.component.scale[r];if(a){var o=t[r];if(o&&o.main){var s=o.main.domain,u=a.main.domain;if(i.isArray(s))i.isArray(a.main.domain)?o.main.domain=s.concat(u):e.addWarning("custom domain scale cannot be unioned with default field-based domain");else{var l=c.isUnionedDomain(s)?s.fields:[s];i.isArray(u)&&e.addWarning("custom domain scale cannot be unioned with default field-based domain");var f=c.isDataRefDomain(u)?l.concat([u]):c.isUnionedDomain(u)?l.concat(u.fields):l;(f=i.unique(f,i.hash)).length>1?o.main.domain={fields:f}:o.main.domain=f[0]}o.colorLegend=o.colorLegend?o.colorLegend:a.colorLegend,o.binColorLegend=o.binColorLegend?o.binColorLegend:a.binColorLegend}else t[r]=a;i.vals(a).forEach(function(t){var r=t.name.substr(n.name("").length),i=e.scaleName(r);n.renameScale(t.name,i),t.name=i}),delete a[r]}})})},t.prototype.parseMark=function(){this._children.forEach(function(e){e.parseMark()})},t.prototype.parseAxis=function(){var e=this.component.axis={};this._children.forEach(function(t){t.parseAxis(),i.keys(t.component.axis).forEach(function(n){e[n]||(e[n]=t.component.axis[n])})})},t.prototype.parseAxisGroup=function(){return null},t.prototype.parseGridGroup=function(){return null},t.prototype.parseLegend=function(){var e=this.component.legend={};this._children.forEach(function(t){t.parseLegend(),i.keys(t.component.legend).forEach(function(n){e[n]||(e[n]=t.component.legend[n])})})},t.prototype.assembleParentGroupProperties=function(){return null},t.prototype.assembleData=function(e){return o.assembleData(this,e),this._children.forEach(function(t){t.assembleData(e)}),e},t.prototype.assembleLayout=function(e){return this._children.forEach(function(t){t.assembleLayout(e)}),s.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return i.flatten(this._children.map(function(e){return e.assembleMarks()}))},t.prototype.channels=function(){return[]},t.prototype.mapping=function(){return null},t.prototype.isLayer=function(){return!0},t.prototype.compatibleSource=function(e){var t=this.data(),n=e.component.data;return!n.source||t&&t.url===n.source.url},t}(u.Model);t.LayerModel=f},XL1Y:function(e,t,n){"use strict";var r=n("P/aK"),i=n("o+e1"),a=n("MtYt");!function(e){function t(e,t,n,r){if(e){if(e.field)return{scale:t,field:e.field};if(void 0!==e.value)return{value:e.value}}return n.mark.tickSize?{value:n.mark.tickSize}:{value:(void 0!==r?r:n.scale.bandSize)/1.5}}e.markType=function(){return"rect"},e.properties=function(e){var n={},o=e.config();return n.xc=function(e,t,n){if(e){if(e.field)return{scale:t,field:i.field(e,{binSuffix:"_mid"})};if(e.value)return{value:e.value}}return{value:n.scale.bandSize/2}}(e.encoding().x,e.scaleName(r.X),o),n.yc=function(e,t,n){if(e){if(e.field)return{scale:t,field:i.field(e,{binSuffix:"_mid"})};if(e.value)return{value:e.value}}return{value:n.scale.bandSize/2}}(e.encoding().y,e.scaleName(r.Y),o),"horizontal"===o.mark.orient?(n.width=t(e.encoding().size,e.scaleName(r.SIZE),o,(e.scale(r.X)||{}).bandSize),n.height={value:o.mark.tickThickness}):(n.width={value:o.mark.tickThickness},n.height=t(e.encoding().size,e.scaleName(r.SIZE),o,(e.scale(r.Y)||{}).bandSize)),a.applyColorAndOpacity(n,e),n},e.labels=function(e){}}(t.tick||(t.tick={}))},XSKZ:function(e,t){e.exports=function(){"use strict";function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},i={},a={start:at},o=at,s=",",u={type:"literal",value:",",description:'","'},l=function(e,t){return[e].concat(t)},c=function(e){return[e]},f="[",h={type:"literal",value:"[",description:'"["'},d="]",p={type:"literal",value:"]",description:'"]"'},g=">",m={type:"literal",value:">",description:'">"'},v=function(e,t,n){return{start:e,middle:n,end:t,str:"["+e.str+", "+t.str+"] > "+n.str}},y=function(e,t){return e.filters=t,e.str+=t.map(function(e){return"["+e+"]"}).join(""),e},_=function(e){return e},x="(",b={type:"literal",value:"(",description:'"("'},M=")",k={type:"literal",value:")",description:'")"'},S=function(e){return{stream:e,str:"("+e.map(function(e){return e.str}).join(", ")+")"}},E="@",A={type:"literal",value:"@",description:'"@"'},w=":",T={type:"literal",value:":",description:'":"'},O=function(e,t){return{event:t,name:e,str:"@"+e+":"+t}},N=function(e,t){return{event:t,mark:e,str:e+":"+t}},L=function(e,t){return{event:t,target:e,str:e+":"+t}},C=function(e){return{event:e,str:e}},R=function(e){return{signal:e,str:e}},I="rect",D={type:"literal",value:"rect",description:'"rect"'},U="symbol",P={type:"literal",value:"symbol",description:'"symbol"'},z="path",F={type:"literal",value:"path",description:'"path"'},j="arc",q={type:"literal",value:"arc",description:'"arc"'},Y="area",$={type:"literal",value:"area",description:'"area"'},H="line",W={type:"literal",value:"line",description:'"line"'},V="rule",X={type:"literal",value:"rule",description:'"rule"'},G="image",Z={type:"literal",value:"image",description:'"image"'},B="text",J={type:"literal",value:"text",description:'"text"'},Q="group",K={type:"literal",value:"group",description:'"group"'},ee="mousedown",te={type:"literal",value:"mousedown",description:'"mousedown"'},ne="mouseup",re={type:"literal",value:"mouseup",description:'"mouseup"'},ie="click",ae={type:"literal",value:"click",description:'"click"'},oe="dblclick",se={type:"literal",value:"dblclick",description:'"dblclick"'},ue="wheel",le={type:"literal",value:"wheel",description:'"wheel"'},ce="keydown",fe={type:"literal",value:"keydown",description:'"keydown"'},he="keypress",de={type:"literal",value:"keypress",description:'"keypress"'},pe="keyup",ge={type:"literal",value:"keyup",description:'"keyup"'},me="mousewheel",ve={type:"literal",value:"mousewheel",description:'"mousewheel"'},ye="mousemove",_e={type:"literal",value:"mousemove",description:'"mousemove"'},xe="mouseout",be={type:"literal",value:"mouseout",description:'"mouseout"'},Me="mouseover",ke={type:"literal",value:"mouseover",description:'"mouseover"'},Se="mouseenter",Ee={type:"literal",value:"mouseenter",description:'"mouseenter"'},Ae="touchstart",we={type:"literal",value:"touchstart",description:'"touchstart"'},Te="touchmove",Oe={type:"literal",value:"touchmove",description:'"touchmove"'},Ne="touchend",Le={type:"literal",value:"touchend",description:'"touchend"'},Ce="dragenter",Re={type:"literal",value:"dragenter",description:'"dragenter"'},Ie="dragover",De={type:"literal",value:"dragover",description:'"dragover"'},Ue="dragleave",Pe={type:"literal",value:"dragleave",description:'"dragleave"'},ze=function(e){return e},Fe=/^[a-zA-Z0-9_\-]/,je={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},qe=function(e){return e.join("")},Ye=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,$e={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},He=function(e){return e.join("")},We=/^['"a-zA-Z0-9_().><=! \t-&|~]/,Ve={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},Xe=function(e){return e.join("")},Ge=/^[ \t\r\n]/,Ze={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},Be=0,Je=[{line:1,column:1,seenCR:!1}],Qe=0,Ke=[],et=0;if("startRule"in r){if(!(r.startRule in a))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=a[r.startRule]}function tt(e){var n,r,i=Je[e];if(i)return i;for(n=e-1;!Je[n];)n--;for(i={line:(i=Je[n]).line,column:i.column,seenCR:i.seenCR};n<e;)"\n"===(r=t.charAt(n))?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return Je[e]=i,i}function nt(e,t){var n=tt(e),r=tt(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function rt(e){Be<Qe||(Be>Qe&&(Qe=Be,Ke=[]),Ke.push(e))}function it(t,n,r,i){return null!==n&&function(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}(t)+'"':"end of input")+" found."}(n,r),n,r,i)}function at(){return ot()}function ot(){var e,n,r,a;return e=Be,(n=st())!==i&&dt()!==i?(44===t.charCodeAt(Be)?(r=s,Be++):(r=i,0===et&&rt(u)),r!==i&&dt()!==i&&(a=ot())!==i?e=n=l(n,a):(Be=e,e=i)):(Be=e,e=i),e===i&&(e=Be,(n=st())!==i&&(n=c(n)),e=n),e}function st(){var e,n,r,a,o,l,c,y;return e=Be,91===t.charCodeAt(Be)?(n=f,Be++):(n=i,0===et&&rt(h)),n!==i&&dt()!==i&&(r=ut())!==i&&dt()!==i?(44===t.charCodeAt(Be)?(a=s,Be++):(a=i,0===et&&rt(u)),a!==i&&dt()!==i&&(o=ut())!==i&&dt()!==i?(93===t.charCodeAt(Be)?(l=d,Be++):(l=i,0===et&&rt(p)),l!==i&&dt()!==i?(62===t.charCodeAt(Be)?(c=g,Be++):(c=i,0===et&&rt(m)),c!==i&&dt()!==i&&(y=st())!==i?e=n=v(r,o,y):(Be=e,e=i)):(Be=e,e=i)):(Be=e,e=i)):(Be=e,e=i),e===i&&(e=ut()),e}function ut(){var e,t,n,r;if(e=Be,(t=lt())!==i){if(n=[],(r=ft())!==i)for(;r!==i;)n.push(r),r=ft();else n=i;n!==i?e=t=y(t,n):(Be=e,e=i)}else Be=e,e=i;return e===i&&(e=Be,(t=lt())!==i&&(t=_(t)),e=t),e}function lt(){var e,n,r,a,o,s;return e=Be,40===t.charCodeAt(Be)?(n=x,Be++):(n=i,0===et&&rt(b)),n!==i&&(r=ot())!==i?(41===t.charCodeAt(Be)?(a=M,Be++):(a=i,0===et&&rt(k)),a!==i?e=n=S(r):(Be=e,e=i)):(Be=e,e=i),e===i&&(e=Be,64===t.charCodeAt(Be)?(n=E,Be++):(n=i,0===et&&rt(A)),n!==i&&(r=ht())!==i?(58===t.charCodeAt(Be)?(a=w,Be++):(a=i,0===et&&rt(T)),a!==i&&(o=ct())!==i?e=n=O(r,o):(Be=e,e=i)):(Be=e,e=i),e===i&&(e=Be,t.substr(Be,4)===I?(s=I,Be+=4):(s=i,0===et&&rt(D)),s===i&&(t.substr(Be,6)===U?(s=U,Be+=6):(s=i,0===et&&rt(P)),s===i&&(t.substr(Be,4)===z?(s=z,Be+=4):(s=i,0===et&&rt(F)),s===i&&(t.substr(Be,3)===j?(s=j,Be+=3):(s=i,0===et&&rt(q)),s===i&&(t.substr(Be,4)===Y?(s=Y,Be+=4):(s=i,0===et&&rt($)),s===i&&(t.substr(Be,4)===H?(s=H,Be+=4):(s=i,0===et&&rt(W)),s===i&&(t.substr(Be,4)===V?(s=V,Be+=4):(s=i,0===et&&rt(X)),s===i&&(t.substr(Be,5)===G?(s=G,Be+=5):(s=i,0===et&&rt(Z)),s===i&&(t.substr(Be,4)===B?(s=B,Be+=4):(s=i,0===et&&rt(J)),s===i&&(t.substr(Be,5)===Q?(s=Q,Be+=5):(s=i,0===et&&rt(K))))))))))),(n=s)!==i?(58===t.charCodeAt(Be)?(r=w,Be++):(r=i,0===et&&rt(T)),r!==i&&(a=ct())!==i?e=n=N(n,a):(Be=e,e=i)):(Be=e,e=i),e===i&&(e=Be,(n=function(){var e,n;if(Be,e=[],Ye.test(t.charAt(Be))?(n=t.charAt(Be),Be++):(n=i,0===et&&rt($e)),n!==i)for(;n!==i;)e.push(n),Ye.test(t.charAt(Be))?(n=t.charAt(Be),Be++):(n=i,0===et&&rt($e));else e=i;return e!==i&&(e=He(e)),e}())!==i?(58===t.charCodeAt(Be)?(r=w,Be++):(r=i,0===et&&rt(T)),r!==i&&(a=ct())!==i?e=n=L(n,a):(Be=e,e=i)):(Be=e,e=i),e===i&&(e=Be,(n=ct())!==i&&(n=C(n)),(e=n)===i&&(e=Be,(n=ht())!==i&&(n=R(n)),e=n))))),e}function ct(){var e;return t.substr(Be,9)===ee?(e=ee,Be+=9):(e=i,0===et&&rt(te)),e===i&&(t.substr(Be,7)===ne?(e=ne,Be+=7):(e=i,0===et&&rt(re)),e===i&&(t.substr(Be,5)===ie?(e=ie,Be+=5):(e=i,0===et&&rt(ae)),e===i&&(t.substr(Be,8)===oe?(e=oe,Be+=8):(e=i,0===et&&rt(se)),e===i&&(t.substr(Be,5)===ue?(e=ue,Be+=5):(e=i,0===et&&rt(le)),e===i&&(t.substr(Be,7)===ce?(e=ce,Be+=7):(e=i,0===et&&rt(fe)),e===i&&(t.substr(Be,8)===he?(e=he,Be+=8):(e=i,0===et&&rt(de)),e===i&&(t.substr(Be,5)===pe?(e=pe,Be+=5):(e=i,0===et&&rt(ge)),e===i&&(t.substr(Be,10)===me?(e=me,Be+=10):(e=i,0===et&&rt(ve)),e===i&&(t.substr(Be,9)===ye?(e=ye,Be+=9):(e=i,0===et&&rt(_e)),e===i&&(t.substr(Be,8)===xe?(e=xe,Be+=8):(e=i,0===et&&rt(be)),e===i&&(t.substr(Be,9)===Me?(e=Me,Be+=9):(e=i,0===et&&rt(ke)),e===i&&(t.substr(Be,10)===Se?(e=Se,Be+=10):(e=i,0===et&&rt(Ee)),e===i&&(t.substr(Be,10)===Ae?(e=Ae,Be+=10):(e=i,0===et&&rt(we)),e===i&&(t.substr(Be,9)===Te?(e=Te,Be+=9):(e=i,0===et&&rt(Oe)),e===i&&(t.substr(Be,8)===Ne?(e=Ne,Be+=8):(e=i,0===et&&rt(Le)),e===i&&(t.substr(Be,9)===Ce?(e=Ce,Be+=9):(e=i,0===et&&rt(Re)),e===i&&(t.substr(Be,8)===Ie?(e=Ie,Be+=8):(e=i,0===et&&rt(De)),e===i&&(t.substr(Be,9)===Ue?(e=Ue,Be+=9):(e=i,0===et&&rt(Pe)))))))))))))))))))),e}function ft(){var e,n,r,a;return e=Be,91===t.charCodeAt(Be)?(n=f,Be++):(n=i,0===et&&rt(h)),n!==i&&(r=function(){var e,n;if(Be,e=[],We.test(t.charAt(Be))?(n=t.charAt(Be),Be++):(n=i,0===et&&rt(Ve)),n!==i)for(;n!==i;)e.push(n),We.test(t.charAt(Be))?(n=t.charAt(Be),Be++):(n=i,0===et&&rt(Ve));else e=i;return e!==i&&(e=Xe(e)),e}())!==i?(93===t.charCodeAt(Be)?(a=d,Be++):(a=i,0===et&&rt(p)),a!==i?e=n=ze(r):(Be=e,e=i)):(Be=e,e=i),e}function ht(){var e,n;if(Be,e=[],Fe.test(t.charAt(Be))?(n=t.charAt(Be),Be++):(n=i,0===et&&rt(je)),n!==i)for(;n!==i;)e.push(n),Fe.test(t.charAt(Be))?(n=t.charAt(Be),Be++):(n=i,0===et&&rt(je));else e=i;return e!==i&&(e=qe(e)),e}function dt(){var e,n;for(e=[],Ge.test(t.charAt(Be))?(n=t.charAt(Be),Be++):(n=i,0===et&&rt(Ze));n!==i;)e.push(n),Ge.test(t.charAt(Be))?(n=t.charAt(Be),Be++):(n=i,0===et&&rt(Ze));return e}if((n=o())!==i&&Be===t.length)return n;throw n!==i&&Be<t.length&&rt({type:"end",description:"end of input"}),it(null,Ke,Qe<t.length?t.charAt(Qe):null,Qe<t.length?nt(Qe,Qe+1):nt(Qe,Qe))}}}()},XVii:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("Hqva"),o=a.Node,s=a.Dependencies,u=n("LHV8").bound,l={};function c(e,t,n){var r=t.def.properties||{},i=r.enter,a=r.update,u=r.exit;o.prototype.init.call(this,e),this._mark=t,this._builder=n;var l=this._scales=[];return i&&l.push.apply(l,i.scales),a&&(this.dependency(s.DATA,a.data),this.dependency(s.SIGNALS,a.signals),this.dependency(s.FIELDS,a.fields),this.dependency(s.SCALES,a.scales),l.push.apply(l,a.scales)),u&&l.push.apply(l,u.scales),this.mutates(!0)}var f=c.prototype=new o;function h(e,t,n,r){var i,a,o,s=n.add.length;return(i=r.enter)&&(a=i[e]).length&&s&&(o=t.values(e,a,o=o||{})),(i=r.exit)&&(a=i[e]).length&&n.rem.length&&(o=t.values(e,a,o=o||{})),(i=r.update)&&(a=i[e]).length&&(s||n.mod.length)&&(o=t.values(e,a,o=o||{})),o||l}function d(e,t,n,r,i,a,o){var s=e.encode,u=t._dirty,l=s.call(s,t,t.mark.group||t,n,r,i,a);t._dirty=l||u,l&&!u&&o.push(t)}f.evaluate=function(e){i.debug(e,["encoding",this._mark.def.type]);var t,r,a,o,u=this._graph,c=this._mark.def.properties||{},f=this._mark.items,p=c.enter,g=c.update,m=c.exit,v=e.dirty,y=u.predicates(),_=e.request,x=this._mark.group,b=x&&(x.mark.axis||x.mark.legend),M=l,k=l;if(_&&!b){if((o=c[_])&&e.mod.length)for(M=o.data?u.values(s.DATA,o.data):null,k=o.signals?u.values(s.SIGNALS,o.signals):null,t=0,r=e.mod.length;t<r;++t)a=e.mod[t],d.call(this,o,a,e.trans,M,k,y,v);return e}for(M=h(s.DATA,u,e,c),k=h(s.SIGNALS,u,e,c),t=0,r=e.rem.length;t<r;++t)a=e.rem[t],m&&d.call(this,m,a,e.trans,M,k,y,v),e.trans&&!m?e.trans.interpolate(a,l):e.trans||f.pop();var S=n("Vp7n").STATUS.UPDATE;for(t=0,r=e.add.length;t<r;++t)a=e.add[t],p&&d.call(this,p,a,e.trans,M,k,y,v),g&&d.call(this,g,a,e.trans,M,k,y,v),a.status=S;if(g)for(t=0,r=e.mod.length;t<r;++t)a=e.mod[t],d.call(this,g,a,e.trans,M,k,y,v);return e},f.reevaluate=function(e){var t=this._mark.def,n=t.properties||{};return r.isFunction(t.from)||t.orient||e.request||o.prototype.reevaluate.call(this,e)||!!n.update&&function(){for(var e,t,n=this._mark.def.properties.update.nested,r=this._builder,i=0,a=0,o=n.length;a<o;++a)if(!(e=n[a]).scale){for(;i<e.level;++i)r=r.parent(),t=r.ds();if((e.group?r.encoder():t.last())._stamp>this._stamp)return!0}return!1}.call(this)},c.update=function(e,t,n,i,a){i=r.array(i);var o,l,c,f,h,p=e.predicates(),g=e.values(s.DATA),m=e.values(s.SIGNALS);for(o=0,l=i.length;o<l;++o)(h=(f=(c=i[o]).mark.def.properties)&&f[n])&&(d.call(null,h,c,t,g,m,p,a),u.item(c))},e.exports=c},YBv9:function(e,t,n){"use strict";var r=n("P/aK"),i=n("x6Fv"),a=n("Fw/k"),o=n("ZAUf"),s=n("j8cM"),u=n("wKIX");function l(e,t){var n=e.config().cell,i=t===r.X?n.width:n.height;return{distinct:h(e,t),formula:[{field:e.channelSizeName(t),expr:function(e,t,n){if(e.scale(t)){if(e.isOrdinalScale(t)){var i=e.scale(t);return"("+d(e,t)+" + "+i.padding+") * "+i.bandSize}return n+""}return e.mark()===s.TEXT&&t===r.X?e.config().scale.textBandWidth+"":e.config().scale.bandSize+""}(e,t,i)}]}}function c(e,t){var n,i,a,s,u=e.child().component.layout,l=t===r.ROW?"height":"width",c=u[l],f=o.extend(h(e,t),c.distinct),p=c.formula.concat([{field:e.channelSizeName(t),expr:(n=e,i=t,a=e.child().channelSizeName(t),s=n.scale(i),n.has(i)?"(datum."+a+" + "+s.padding+") * "+d(n,i):"datum."+a+" + "+n.config().facet.scale.padding)}]);return delete u[l],{distinct:f,formula:p}}function f(e,t){var n=e.children()[0].component.layout,i=t===r.Y?"height":"width",a=n[i],o=a.distinct,s=[{field:e.channelSizeName(t),expr:a.formula[0].expr}];return e.children().forEach(function(e){delete e.component.layout[i]}),{distinct:o,formula:s}}function h(e,t){if(e.has(t)&&e.isOrdinalScale(t)){var n=e.scale(t);if(n.type===a.ScaleType.ORDINAL&&!(n.domain instanceof Array)){var r={};return r[e.field(t)]=!0,r}}return{}}function d(e,t){var n=e.scale(t);if(n.domain instanceof Array)return n.domain.length;var r=e.fieldDef(t).timeUnit,i=r?u.rawDomain(r,t):null;return null!==i?i.length:e.field(t,{datum:!0,prefn:"distinct_"})}t.assembleLayout=function(e,t){var n=e.component.layout;if(!n.width&&!n.height)return t;var r=o.keys(o.extend(n.width.distinct,n.height.distinct)),a=n.width.formula.concat(n.height.formula).map(function(e){return o.extend({type:"formula"},e)});return[r.length>0?{name:e.dataName(i.LAYOUT),source:e.dataTable(),transform:[{type:"aggregate",summarize:r.map(function(e){return{field:e,ops:["distinct"]}})}].concat(a)}:{name:e.dataName(i.LAYOUT),values:[{}],transform:a}]},t.parseUnitLayout=function(e){return{width:l(e,r.X),height:l(e,r.Y)}},t.parseFacetLayout=function(e){return{width:c(e,r.COLUMN),height:c(e,r.ROW)}},t.parseLayerLayout=function(e){return{width:f(e,r.X),height:f(e,r.Y)}}},YGNx:function(e,t,n){var r=n("zF6n"),i=n("ggRp"),a=n("nIY2"),o=n("GXhC").time;function s(e,t){var n=t&&t.type||"json";return e=a[n](e,t),t&&t.parse&&function(e,t){var n,a,s,u,l,c,f=e.length;for(t="auto"===t?i.inferAll(e):r.duplicate(t),n=r.keys(t),a=n.map(function(e){var n=t[e];if(n&&0===n.indexOf("date:")){var r=n.split(/:(.+)?/,2)[1];if(!("'"===r[0]&&"'"===r[r.length-1]||'"'===r[0]&&'"'===r[r.length-1]))throw Error("Format pattern must be quoted: "+r);return r=r.slice(1,-1),r=o(r),function(e){return r.parse(e)}}if(!i.parsers[n])throw Error("Illegal format pattern: "+e+":"+n);return i.parsers[n]}),u=0,c=n.length;u<f;++u)for(s=e[u],l=0;l<c;++l)s[n[l]]=a[l](s[n[l]]);i.annotation(e,t)}(e,t.parse),e}s.formats=a,e.exports=s},YX8j:function(e,t,n){var r=n("Za4h"),i=n("YzNj"),a=n("wWYS"),o=n("rVSZ"),s=n("RA6T"),u={editor_url:"http://vega.github.io/vega-editor/",source_header:"",source_footer:""},l={vega:"vega","vega-lite":"vega-lite"},c={vega:function(e){return e},"vega-lite":function(e){return a.compile(e).spec}};function f(e,t,n,r,a){i.util.load({url:e},function(o,s){var u;o||!s?console.error(o||"No data found at "+e):(t?(u=i.util.extend({},t))[n]="source"===n?s:JSON.parse(s):u=JSON.parse(s),h(r,u,a))})}function h(e,t,n){var a,d,p,g,m=n||function(){},v=[];try{if(i.util.isString(t))return f(t,null,null,e,n);if(t.source)a=t.source,d=JSON.parse(a);else if(t.spec)d=t.spec,a=JSON.stringify(d,null,2);else{if(t.url)return f(t.url,t,"source",e,n);d=t,a=JSON.stringify(d,null,2),t={spec:d,actions:!1}}if(p=l[t.mode]||l.vega,d=c[p](d),i.util.isString(t.config))return f(t.config,t,"config",e,n);t.config&&(g=t.config);var y=r.select(e).classed("vega-embed",!0).html("");if(t.parameters){var _=(t.parameter_el?r.select(t.parameter_el):y).append("div").attr("class","vega-params");v=t.parameters.map(function(e){return o.init(_,e,d)})}}catch(e){m(e)}i.parse.spec(d,g,function(n,i){if(n)m(n);else try{var l=t.renderer||"canvas",c=t.actions||{},f=i({el:e,data:t.data||void 0,renderer:l});if(!1!==t.actions){var g=y.append("div").attr("class","vega-actions");if(!1!==c.export){var _="canvas"===l?"png":"svg";g.append("a").text("Export as "+_.toUpperCase()).attr("href","#").attr("target","_blank").attr("download",(d.name||"vega")+"."+_).on("mousedown",function(){this.href=f.toImageURL(_),r.event.preventDefault()})}!1!==c.source&&g.append("a").text("View Source").attr("href","#").on("click",function(){var e,t,n,i;e=a,t="<html><head>"+u.source_header+'</head><body><pre><code class="json">',n="</code></pre>"+u.source_footer+"</body></html>",(i=window.open("")).document.write(t+e+n),i.document.title="Vega JSON Source",r.event.preventDefault()}),!1!==c.editor&&g.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){s(window,h.config.editor_url,{spec:a,mode:p}),r.event.preventDefault()})}v.forEach(function(e){o.bind(e,f)}),f.update(),m(null,{view:f,spec:d})}catch(e){m(e)}})}h.config=u,e.exports=h},YsQl:function(e,t,n){var r=n("zF6n"),i=e.exports;i.repeat=function(e,t){var n,r=Array(t);for(n=0;n<t;++n)r[n]=e;return r},i.zeros=function(e){return i.repeat(0,e)},i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(n<0)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},i.random={},i.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,r=function(){return e+n*Math.random()};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r>=e&&r<=t?1/n:0},r.cdf=function(r){return r<e?0:r>t?1:(r-e)/n},r.icdf=function(t){return t>=0&&t<=1?e+t*n:NaN},r},i.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,r=function(){return e+Math.floor(n*Math.random())};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r===Math.floor(r)&&r>=e&&r<t?1/n:0},r.cdf=function(r){var i=Math.floor(r);return i<e?0:i>=t?1:(i-e+1)/n},r.icdf=function(t){return t>=0&&t<=1?e-1+Math.floor(t*n):NaN},r},i.random.normal=function(e,t){var n;e=e||0,t=t||1;var r=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do{r=(a=2*Math.random()-1)*a+(o=2*Math.random()-1)*o}while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(n){var r=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*r},r.cdf=function(n){var r,i=(n-e)/t,a=Math.abs(i);if(a>37)r=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(r=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),r/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):r=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-r:r},r.icdf=function(n){if(n<=0||n>=1)return NaN;var r=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,o=Math.log(1-r*r)/i,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+t*Math.SQRT2*s},r},i.random.bootstrap=function(e,t){var n=e.filter(r.isValid),a=n.length,o=t?i.random.normal(0,t):null,s=function(){return n[~~(Math.random()*a)]+(o?o():0)};return s.samples=function(e){return i.zeros(e).map(s)},s}},YvtE:function(e,t){e.exports=function(e,t,n,r){return void 0!==e[n]?e[n]:void 0!==t&&void 0!==t[n]?t[n]:void 0!==r?r:void 0}},YzNj:function(e,t,n){e.exports={version:"__VERSION__",dataflow:n("Hqva"),parse:n("UaGl"),scene:{Bounder:n("rnWk"),Builder:n("Vp7n"),Encoder:n("XVii"),GroupBuilder:n("BB2X"),visit:n("Qpkz")},transforms:n("C8zq"),Transform:n("4JPs"),BatchTransform:n("acp7"),Parameter:n("fRRI"),schema:n("CiyH"),config:n("8NMF"),util:n("v0Fq"),logging:n("J731"),debug:n("J731").debug}},Z8XL:function(e,t,n){var r=n("cwb4"),i=function(e,t){var n=i.topojson;if(null==n)throw Error("TopoJSON library not loaded.");var a,o=r(e,t);if(t&&t.feature){if(a=o.objects[t.feature])return n.feature(o,a).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(a=o.objects[t.mesh])return[n.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};i.topojson=n("nTOs"),e.exports=i},ZAUf:function(e,t,n){"use strict";var r=n("EbtV"),i=n("zF6n");t.keys=i.keys,t.extend=i.extend,t.duplicate=i.duplicate,t.isArray=i.isArray,t.vals=i.vals,t.truncate=i.truncate,t.toMap=i.toMap,t.isObject=i.isObject,t.isString=i.isString,t.isNumber=i.isNumber,t.isBoolean=i.isBoolean;var a=n("zF6n"),o=n("YsQl");t.range=o.range;var s=n("QSMf");t.has=s.has;var u=n("P/aK");t.Channel=u.Channel;var l=n("zF6n");function c(e,t){return e.indexOf(t)>-1}function f(e,t){return e.filter(function(e){return!c(t,e)})}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=d(e,t[r]);return e}function d(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=h(t[n].constructor===Array?[]:{},t[n]):h(e[n],t[n]));return e}t.pick=function(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n},t.omit=function(e,t){var n=a.duplicate(e);return t.forEach(function(e){delete n[e]}),n},t.hash=function(e){return l.isString(e)||l.isNumber(e)||l.isBoolean(e)?String(e):r(e)},t.contains=c,t.without=f,t.union=function(e,t){return e.concat(f(t,e))},t.forEach=function(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)},t.reduce=function(e,t,n,r){if(e.reduce)return e.reduce.call(r,t,n);for(var i in e)e.hasOwnProperty(i)&&(n=t.call(r,n,e[i],i,e));return n},t.map=function(e,t,n){if(e.map)return e.map.call(n,t);var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(t.call(n,e[i],i,e));return r},t.some=function(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1},t.every=function(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0},t.flatten=function(e){return[].concat.apply([],e)},t.mergeDeep=h;var p=n("prMK");t.getbins=function(e,t){return p({min:e.min,max:e.max,maxbins:t})},t.unique=function(e,t){var n,r,i,a=[],o={};for(r=0,i=e.length;r<i;++r)(n=t?t(e[r]):e[r])in o||(o[n]=1,a.push(e[r]));return a},t.warning=function(e){console.warn("[VL Warning]",e)},t.error=function(e){console.error("[VL Error]",e)},t.differ=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1}},ZCPb:function(e,t,n){var r=n("gWW/"),i=[];e.exports={draw:function(e,t,n){if(t.items&&t.items.length){var a,o,s,u,l,c,f,h,d,p,g,m,v,y=t.items;for(p=0,g=y.length;p<g;++p){for(s=(a=y[p]).axisItems||i,o=a.items||i,u=a.legendItems||i,l=a.x||0,c=a.y||0,f=a.width||0,h=a.height||0,(a.stroke||a.fill)&&(d=null==a.opacity?1:a.opacity)>0&&(a.fill&&r.fill(e,a,d)&&e.fillRect(l,c,f,h),a.stroke&&r.stroke(e,a,d)&&e.strokeRect(l,c,f,h)),e.save(),e.translate(l,c),a.clip&&(e.beginPath(),e.rect(0,0,f,h),e.clip()),n&&n.translate(-l,-c),m=0,v=s.length;m<v;++m)"back"===s[m].layer&&this.draw(e,s[m],n);for(m=0,v=o.length;m<v;++m)this.draw(e,o[m],n);for(m=0,v=s.length;m<v;++m)"back"!==s[m].layer&&this.draw(e,s[m],n);for(m=0,v=u.length;m<v;++m)this.draw(e,u[m],n);n&&n.translate(l,c),e.restore()}}},pick:function(e,t,n,r,a,o){if(t.bounds&&!t.bounds.contains(a,o))return null;var s,u,l,c,f,h,d,p,g,m,v,y=t.items||i;for(g=y.length;--g>=0;)if(!(v=(u=y[g]).bounds)||v.contains(a,o)){for(l=u.axisItems||i,c=u.items||i,f=u.legendItems||i,d=u.x||0,p=u.y||0,e.save(),e.translate(d,p),d=a-d,p=o-p,m=f.length;--m>=0;)if(!1!==(s=f[m]).interactive&&(h=this.pick(s,n,r,d,p)))return e.restore(),h;for(m=l.length;--m>=0;)if(!1!==(s=l[m]).interactive&&"back"!==s.layer&&(h=this.pick(s,n,r,d,p)))return e.restore(),h;for(m=c.length;--m>=0;)if(!1!==(s=c[m]).interactive&&(h=this.pick(s,n,r,d,p)))return e.restore(),h;for(m=l.length;--m>=0;)if(!1!==(s=l[m]).interative&&"back"===s.layer&&(h=this.pick(s,n,r,d,p)))return e.restore(),h;if(e.restore(),!1!==t.interactive&&(u.fill||u.stroke)&&d>=0&&d<=u.width&&p>=0&&p<=u.height)return u}return null}}},ZE31:function(e,t,n){"use strict";t.defaultLegendConfig={orient:void 0,shortTimeLabels:!1}},Za4h:function(e,t,n){var r,i;!function(){var a={version:"3.5.17"},o=[].slice,s=function(e){return o.call(e)},u=this.document;function l(e){return e&&(e.ownerDocument||e.document||e).documentElement}function c(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch(e){s=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var f=this.Element.prototype,h=f.setAttribute,d=f.setAttributeNS,p=this.CSSStyleDeclaration.prototype,g=p.setProperty;f.setAttribute=function(e,t){h.call(this,e,t+"")},f.setAttributeNS=function(e,t,n){d.call(this,e,t,n+"")},p.setProperty=function(e,t,n){g.call(this,e,t+"",n)}}function m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function v(e){return null===e?NaN:+e}function y(e){return!isNaN(e)}function _(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}a.ascending=m,a.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},a.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},a.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},a.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},a.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)y(n=+e[a])&&(r+=n);else for(;++a<i;)y(n=+t.call(e,e[a],a))&&(r+=n);return r},a.mean=function(e,t){var n,r=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)y(n=v(e[a]))?r+=n:--o;else for(;++a<i;)y(n=v(t.call(e,e[a],a)))?r+=n:--o;if(o)return r/o},a.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},a.median=function(e,t){var n,r=[],i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)y(n=v(e[o]))&&r.push(n);else for(;++o<i;)y(n=v(t.call(e,e[o],o)))&&r.push(n);if(r.length)return a.quantile(r.sort(m),.5)},a.variance=function(e,t){var n,r,i=e.length,a=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)y(n=v(e[s]))&&(o+=(r=n-a)*(n-(a+=r/++u)));else for(;++s<i;)y(n=v(t.call(e,e[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++u)));if(u>1)return o/(u-1)},a.deviation=function(){var e=a.variance.apply(this,arguments);return e?Math.sqrt(e):e};var x=_(m);function b(e){return e.length}a.bisectLeft=x.left,a.bisect=a.bisectRight=x.right,a.bisector=function(e){return _(1===e.length?function(t,n){return m(e(t),n)}:e)},a.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},a.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},a.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},a.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=a.min(e,b),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=e[o][t];return r},a.zip=function(){return a.transpose(arguments)},a.keys=function(e){var t=[];for(var n in e)t.push(n);return t},a.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},a.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},a.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--o]=r[t];return n};var M=Math.abs;function k(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function S(){this._=Object.create(null)}a.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(e){var t=1;for(;e*t%1;)t*=10;return t}(M(n)),o=-1;if(e*=a,t*=a,(n*=a)<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},a.map=function(e,t){var n=new S;if(e instanceof S)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var E="__proto__",A="\0";function w(e){return(e+="")===E||e[0]===A?A+e:e}function T(e){return(e+="")[0]===A?e.slice(1):e}function O(e){return w(e)in this._}function N(e){return(e=w(e))in this._&&delete this._[e]}function L(){var e=[];for(var t in this._)e.push(T(t));return e}function C(){var e=0;for(var t in this._)++e;return e}function R(){for(var e in this._)return!1;return!0}function I(){this._=Object.create(null)}function D(e){return e}function U(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function P(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=z.length;n<r;++n){var i=z[n]+t;if(i in e)return i}}k(S,{has:O,get:function(e){return this._[w(e)]},set:function(e,t){return this._[w(e)]=t},remove:N,keys:L,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:T(t),value:this._[t]});return e},size:C,empty:R,forEach:function(e){for(var t in this._)e.call(this,T(t),this._[t])}}),a.nest=function(){var e,t,n={},r=[],i=[];function o(i,a,s){if(s>=r.length)return t?t.call(n,a):e?a.sort(e):a;for(var u,l,c,f,h=-1,d=a.length,p=r[s++],g=new S;++h<d;)(f=g.get(u=p(l=a[h])))?f.push(l):g.set(u,[l]);return i?(l=i(),c=function(e,t){l.set(e,o(i,t,s))}):(l={},c=function(e,t){l[e]=o(i,t,s)}),g.forEach(c),l}return n.map=function(e,t){return o(t,e,0)},n.entries=function(e){return function e(t,n){if(n>=r.length)return t;var a=[],o=i[n++];return t.forEach(function(t,r){a.push({key:t,values:e(r,n)})}),o?a.sort(function(e,t){return o(e.key,t.key)}):a}(o(a.map,e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return i[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},a.set=function(e){var t=new I;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},k(I,{has:O,add:function(e){return this._[w(e+="")]=!0,e},remove:N,values:L,size:C,empty:R,forEach:function(e){for(var t in this._)e.call(this,T(t))}}),a.behavior={},a.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=U(e,t,t[n]);return e};var z=["webkit","ms","moz","Moz","o","O"];function F(){}function j(){}function q(e){var t=[],n=new S;function r(){for(var n,r=t,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return e}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,a=t.indexOf(o)).concat(t.slice(a+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function Y(){a.event.preventDefault()}function $(){for(var e,t=a.event;e=t.sourceEvent;)t=e;return t}function H(e){for(var t=new j,n=0,r=arguments.length;++n<r;)t[arguments[n]]=q(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=a.event;i.target=e,a.event=i,t[i.type].apply(n,r)}finally{a.event=o}}},t}a.dispatch=function(){for(var e=new j,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=q(e);return e},j.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},a.event=null,a.requote=function(e){return e.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function X(e){return V(e,J),e}var G=function(e,t){return t.querySelector(e)},Z=function(e,t){return t.querySelectorAll(e)},B=function(e,t){var n=e.matches||e[P(e,"matchesSelector")];return(B=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(G=function(e,t){return Sizzle(e,t)[0]||null},Z=Sizzle,B=Sizzle.matchesSelector),a.selection=function(){return a.select(u.documentElement)};var J=a.selection.prototype=[];function Q(e){return"function"==typeof e?e:function(){return G(e,this)}}function K(e){return"function"==typeof e?e:function(){return Z(e,this)}}J.select=function(e){var t,n,r,i,a=[];e=Q(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(t.push(n=e.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return X(a)},J.selectAll=function(e){var t,n,r=[];e=K(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,l=o.length;++u<l;)(n=o[u])&&(r.push(t=s(e.call(n,n.__data__,u,i))),t.parentNode=n);return X(r)};var ee="http://www.w3.org/1999/xhtml",te={svg:"http://www.w3.org/2000/svg",xhtml:ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ne(e,t){return e=a.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function re(e){return e.trim().replace(/\s+/g," ")}function ie(e){return new RegExp("(?:^|\\s+)"+a.requote(e)+"(?:\\s+|$)","g")}function ae(e){return(e+"").trim().split(/^|\s+/)}function oe(e,t){var n=(e=ae(e).map(se)).length;return"function"==typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function se(e){var t=ie(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",re(i+" "+e))):n.setAttribute("class",re(i.replace(t," ")))}}function ue(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function le(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function ce(e){return"function"==typeof e?e:(e=a.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ee&&t.documentElement.namespaceURI===ee?t.createElement(e):t.createElementNS(n,e)}}function fe(){var e=this.parentNode;e&&e.removeChild(this)}function he(e){return{__data__:e}}function de(e){return function(){return B(this,e)}}function pe(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,n);return e}function ge(e){return V(e,me),e}a.ns={prefix:te,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),te.hasOwnProperty(n)?{space:te[n],local:e}:e}},J.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=a.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))},J.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=ae(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!ie(e[i]).test(t))return!1;return!0}for(t in e)this.each(oe(t,e[t]));return this}return this.each(oe(e,t))},J.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){r<2&&(t="");for(n in e)this.each(ue(n,e[n],t));return this}if(r<2){var i=this.node();return c(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(ue(e,t,n))},J.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(le(t,e[t]));return this}return this.each(le(e,t))},J.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},J.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},J.append=function(e){return e=ce(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},J.insert=function(e,t){return e=ce(e),t=Q(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},J.remove=function(){return this.each(fe)},J.data=function(e,t){var n,r,i=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(e[i]=r.__data__);return e}function o(e,n){var r,i,a,o=e.length,c=n.length,f=Math.min(o,c),h=new Array(c),d=new Array(c),p=new Array(o);if(t){var g,m=new S,v=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(m.has(g=t.call(i,i.__data__,r))?p[r]=i:m.set(g,i),v[r]=g);for(r=-1;++r<c;)(i=m.get(g=t.call(n,a=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=a):d[r]=he(a),m.set(g,!0);for(r=-1;++r<o;)r in v&&!0!==m.get(v[r])&&(p[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],a=n[r],i?(i.__data__=a,h[r]=i):d[r]=he(a);for(;r<c;++r)d[r]=he(n[r]);for(;r<o;++r)p[r]=e[r]}d.update=h,d.parentNode=h.parentNode=p.parentNode=e.parentNode,s.push(d),u.push(h),l.push(p)}var s=ge([]),u=X([]),l=X([]);if("function"==typeof e)for(;++i<a;)o(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<a;)o(n=this[i],e);return u.enter=function(){return s},u.exit=function(){return l},u},J.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},J.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=de(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return X(i)},J.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},J.sort=function(e){e=function(e){arguments.length||(e=m);return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},J.each=function(e){return pe(this,function(t,n,r){e.call(t,t.__data__,n,r)})},J.call=function(e){var t=s(arguments);return e.apply(t[0]=this,t),this},J.empty=function(){return!this.node()},J.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},J.size=function(){var e=0;return pe(this,function(){++e}),e};var me=[];function ve(e,t,n){var r="__on"+e,i=e.indexOf("."),o=_e;i>0&&(e=e.slice(0,i));var u=ye.get(e);function l(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}return u&&(e=u,o=xe),i?t?function(){var i=o(t,s(arguments));l.call(this),this.addEventListener(e,this[r]=i,i.$=n),i._=t}:l:t?F:function(){var t,n=new RegExp("^__on([^.]+)"+a.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}}a.selection.enter=ge,a.selection.enter.prototype=me,me.append=J.append,me.empty=J.empty,me.node=J.node,me.call=J.call,me.size=J.size,me.select=function(e){for(var t,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(t.push(r[l]=n=e.call(i.parentNode,a.__data__,l,s)),n.__data__=a.__data__):t.push(null)}return X(o)},me.insert=function(e,t){var n,r,i;return arguments.length<2&&(n=this,t=function(e,t,a){var o,s=n[a].update,u=s.length;for(a!=i&&(i=a,r=0),t>=r&&(r=t+1);!(o=s[r])&&++r<u;);return o}),J.insert.call(this,e,t)},a.select=function(e){var t;return"string"==typeof e?(t=[G(e,u)]).parentNode=u.documentElement:(t=[e]).parentNode=l(e),X([t])},a.selectAll=function(e){var t;return"string"==typeof e?(t=s(Z(e,u))).parentNode=u.documentElement:(t=s(e)).parentNode=null,X([t])},J.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){r<2&&(t=!1);for(n in e)this.each(ve(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(ve(e,t,n))};var ye=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});function _e(e,t){return function(n){var r=a.event;a.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{a.event=r}}}function xe(e,t){var n=_e(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}u&&ye.forEach(function(e){"on"+e in u&&ye.remove(e)});var be,Me=0;function ke(e){var t=".dragsuppress-"+ ++Me,n="click"+t,r=a.select(c(e)).on("touchmove"+t,Y).on("dragstart"+t,Y).on("selectstart"+t,Y);if(null==be&&(be=!("onselectstart"in e)&&P(e.style,"userSelect")),be){var i=l(e).style,o=i[be];i[be]="none"}return function(e){if(r.on(t,null),be&&(i[be]=o),e){var a=function(){r.on(n,null)};r.on(n,function(){Y(),a()},!0),setTimeout(a,0)}}}a.mouse=function(e){return Ee(e,$())};var Se=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ee(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(Se<0){var i=c(e);if(i.scrollX||i.scrollY){var o=(n=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Se=!(o.f||o.e),n.remove()}}return Se?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function Ae(){return a.event.changedTouches[0].identifier}a.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=$().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return Ee(e,r)},a.behavior.drag=function(){var e=H(i,"drag","dragstart","dragend"),t=null,n=o(F,a.mouse,c,"mousemove","mouseup"),r=o(Ae,a.touch,D,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,i,o,s){return function(){var u,l=a.event.target.correspondingElement||a.event.target,c=this.parentNode,f=e.of(this,arguments),h=0,d=n(),p=".drag"+(null==d?"":"-"+d),g=a.select(i(l)).on(o+p,function(){var e,t,n=r(c,d);if(!n)return;e=n[0]-v[0],t=n[1]-v[1],h|=e|t,v=n,f({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:e,dy:t})}).on(s+p,function(){if(!r(c,d))return;g.on(o+p,null).on(s+p,null),m(h),f({type:"dragend"})}),m=ke(l),v=r(c,d);u=t?[(u=t.apply(this,arguments)).x-v[0],u.y-v[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(t=e,i):t},a.rebind(i,e,"on")},a.touches=function(e,t){return arguments.length<2&&(t=$().touches),t?s(t).map(function(t){var n=Ee(e,t);return n.identifier=t.identifier,n}):[]};var we=1e-6,Te=we*we,Oe=Math.PI,Ne=2*Oe,Le=Ne-we,Ce=Oe/2,Re=Oe/180,Ie=180/Oe;function De(e){return e>0?1:e<0?-1:0}function Ue(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Pe(e){return e>1?0:e<-1?Oe:Math.acos(e)}function ze(e){return e>1?Ce:e<-1?-Ce:Math.asin(e)}function Fe(e){return((e=Math.exp(e))+1/e)/2}function je(e){return(e=Math.sin(e/2))*e}var qe=Math.SQRT2;a.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],u=t[1],l=t[2],c=s-i,f=u-a,h=c*c+f*f;if(h<Te)r=Math.log(l/o)/qe,n=function(e){return[i+e*c,a+e*f,o*Math.exp(qe*e*r)]};else{var d=Math.sqrt(h),p=(l*l-o*o+4*h)/(2*o*2*d),g=(l*l-o*o-4*h)/(2*l*2*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/qe,n=function(e){var t,n,s=e*r,u=Fe(m),l=o/(2*d)*(u*(n=qe*s+m,((n=Math.exp(2*n))-1)/(n+1))-(t=m,((t=Math.exp(t))-1/t)/2));return[i+l*c,a+l*f,o*u/Fe(qe*s+m)]}}return n.duration=1e3*r,n},a.behavior.zoom=function(){var e,t,n,r,i,o,s,l,f,h={x:0,y:0,k:1},d=[960,500],p=He,g=250,m=0,v="mousedown.zoom",y="mousemove.zoom",_="mouseup.zoom",x="touchstart.zoom",b=H(M,"zoomstart","zoom","zoomend");function M(e){e.on(v,L).on($e+".zoom",R).on("dblclick.zoom",I).on(x,C)}function k(e){return[(e[0]-h.x)/h.k,(e[1]-h.y)/h.k]}function S(e){h.k=Math.max(p[0],Math.min(p[1],e))}function E(e,t){var n;t=[(n=t)[0]*h.k+h.x,n[1]*h.k+h.y],h.x+=e[0]-t[0],h.y+=e[1]-t[1]}function A(e,n,r,i){e.__chart__={x:h.x,y:h.y,k:h.k},S(Math.pow(2,i)),E(t=n,r),e=a.select(e),g>0&&(e=e.transition().duration(g)),e.call(M.event)}function w(){s&&s.domain(o.range().map(function(e){return(e-h.x)/h.k}).map(o.invert)),f&&f.domain(l.range().map(function(e){return(e-h.y)/h.k}).map(l.invert))}function T(e){m++||e({type:"zoomstart"})}function O(e){w(),e({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function N(e){--m||(e({type:"zoomend"}),t=null)}function L(){var e=this,t=b.of(e,arguments),n=0,r=a.select(c(e)).on(y,function(){n=1,E(a.mouse(e),i),O(t)}).on(_,function(){r.on(y,null).on(_,null),o(n),N(t)}),i=k(a.mouse(e)),o=ke(e);cs.call(e),T(t)}function C(){var e,t=this,n=b.of(t,arguments),r={},o=0,s=".zoom-"+a.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],f=a.select(t),d=ke(t);function p(){var n=a.touches(t);return e=h.k,n.forEach(function(e){e.identifier in r&&(r[e.identifier]=k(e))}),n}function g(){var e=a.event.target;a.select(e).on(u,m).on(l,y),c.push(e);for(var n=a.event.changedTouches,s=0,f=n.length;s<f;++s)r[n[s].identifier]=null;var d=p(),g=Date.now();if(1===d.length){if(g-i<500){var v=d[0];A(t,v,r[v.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),Y()}i=g}else if(d.length>1){v=d[0];var _=d[1],x=v[0]-_[0],b=v[1]-_[1];o=x*x+b*b}}function m(){var s,u,l,c,f=a.touches(t);cs.call(t);for(var h=0,d=f.length;h<d;++h,c=null)if(l=f[h],c=r[l.identifier]){if(u)break;s=l,u=c}if(c){var p=(p=l[0]-s[0])*p+(p=l[1]-s[1])*p,g=o&&Math.sqrt(p/o);s=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=[(u[0]+c[0])/2,(u[1]+c[1])/2],S(g*e)}i=null,E(s,u),O(n)}function y(){if(a.event.touches.length){for(var e=a.event.changedTouches,t=0,i=e.length;t<i;++t)delete r[e[t].identifier];for(var o in r)return void p()}a.selectAll(c).on(s,null),f.on(v,L).on(x,C),d(),N(n)}g(),T(n),f.on(v,null).on(x,g)}function R(){var i=b.of(this,arguments);r?clearTimeout(r):(cs.call(this),e=k(t=n||a.mouse(this)),T(i)),r=setTimeout(function(){r=null,N(i)},50),Y(),S(Math.pow(2,.002*Ye())*h.k),E(t,e),O(i)}function I(){var e=a.mouse(this),t=Math.log(h.k)/Math.LN2;A(this,e,k(e),a.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return $e||($e="onwheel"in u?(Ye=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(Ye=function(){return a.event.wheelDelta},"mousewheel"):(Ye=function(){return-a.event.detail},"MozMousePixelScroll")),M.event=function(e){e.each(function(){var e=b.of(this,arguments),n=h;ds?a.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},T(e)}).tween("zoom:zoom",function(){var r=d[0],i=d[1],o=t?t[0]:r/2,s=t?t[1]:i/2,u=a.interpolateZoom([(o-h.x)/h.k,(s-h.y)/h.k,r/h.k],[(o-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(t){var n=u(t),i=r/n[2];this.__chart__=h={x:o-n[0]*i,y:s-n[1]*i,k:i},O(e)}}).each("interrupt.zoom",function(){N(e)}).each("end.zoom",function(){N(e)}):(this.__chart__=h,T(e),O(e),N(e))})},M.translate=function(e){return arguments.length?(h={x:+e[0],y:+e[1],k:h.k},w(),M):[h.x,h.y]},M.scale=function(e){return arguments.length?(h={x:h.x,y:h.y,k:null},S(+e),w(),M):h.k},M.scaleExtent=function(e){return arguments.length?(p=null==e?He:[+e[0],+e[1]],M):p},M.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],M):n},M.size=function(e){return arguments.length?(d=e&&[+e[0],+e[1]],M):d},M.duration=function(e){return arguments.length?(g=+e,M):g},M.x=function(e){return arguments.length?(s=e,o=e.copy(),h={x:0,y:0,k:1},M):s},M.y=function(e){return arguments.length?(f=e,l=e.copy(),h={x:0,y:0,k:1},M):f},a.rebind(M,b,"on")};var Ye,$e,He=[0,1/0];function We(){}function Ve(e,t,n){return this instanceof Ve?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Ve?new Ve(e.h,e.s,e.l):pt(""+e,gt,Ve):new Ve(e,t,n)}a.color=We,We.prototype.toString=function(){return this.rgb()+""},a.hsl=Ve;var Xe=Ve.prototype=new We;function Ge(e,t,n){var r,i;function a(e){return Math.round(255*((t=e)>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r));var t}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new lt(a(e+120),a(e),a(e-120))}function Ze(e,t,n){return this instanceof Ze?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Ze?new Ze(e.h,e.c,e.l):at(e instanceof Qe?e.l:(e=mt((e=a.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ze(e,t,n)}Xe.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ve(this.h,this.s,this.l/e)},Xe.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ve(this.h,this.s,e*this.l)},Xe.rgb=function(){return Ge(this.h,this.s,this.l)},a.hcl=Ze;var Be=Ze.prototype=new We;function Je(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Qe(n,Math.cos(e*=Re)*t,Math.sin(e)*t)}function Qe(e,t,n){return this instanceof Qe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Qe?new Qe(e.l,e.a,e.b):e instanceof Ze?Je(e.h,e.c,e.l):mt((e=lt(e)).r,e.g,e.b):new Qe(e,t,n)}Be.brighter=function(e){return new Ze(this.h,this.c,Math.min(100,this.l+Ke*(arguments.length?e:1)))},Be.darker=function(e){return new Ze(this.h,this.c,Math.max(0,this.l-Ke*(arguments.length?e:1)))},Be.rgb=function(){return Je(this.h,this.c,this.l).rgb()},a.lab=Qe;var Ke=18,et=.95047,tt=1,nt=1.08883,rt=Qe.prototype=new We;function it(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return new lt(ut(3.2404542*(i=ot(i)*et)-1.5371385*(r=ot(r)*tt)-.4985314*(a=ot(a)*nt)),ut(-.969266*i+1.8760108*r+.041556*a),ut(.0556434*i-.2040259*r+1.0572252*a))}function at(e,t,n){return e>0?new Ze(Math.atan2(n,t)*Ie,Math.sqrt(t*t+n*n),e):new Ze(NaN,NaN,e)}function ot(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function st(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ut(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function lt(e,t,n){return this instanceof lt?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof lt?new lt(e.r,e.g,e.b):pt(""+e,lt,Ge):new lt(e,t,n)}function ct(e){return new lt(e>>16,e>>8&255,255&e)}function ft(e){return ct(e)+""}rt.brighter=function(e){return new Qe(Math.min(100,this.l+Ke*(arguments.length?e:1)),this.a,this.b)},rt.darker=function(e){return new Qe(Math.max(0,this.l-Ke*(arguments.length?e:1)),this.a,this.b)},rt.rgb=function(){return it(this.l,this.a,this.b)},a.rgb=lt;var ht=lt.prototype=new We;function dt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function pt(e,t,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(yt(i[0]),yt(i[1]),yt(i[2]))}return(a=_t.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,u=15&a,u|=u<<4):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),t(o,s,u))}function gt(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,u=(o+a)/2;return s?(i=u<.5?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new Ve(r,i,u)}function mt(e,t,n){var r=st((.4124564*(e=vt(e))+.3575761*(t=vt(t))+.1804375*(n=vt(n)))/et),i=st((.2126729*e+.7151522*t+.072175*n)/tt);return Qe(116*i-16,500*(r-i),200*(i-st((.0193339*e+.119192*t+.9503041*n)/nt)))}function vt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function yt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}ht.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new lt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new lt(30,30,30)},ht.darker=function(e){return new lt((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},ht.hsl=function(){return gt(this.r,this.g,this.b)},ht.toString=function(){return"#"+dt(this.r)+dt(this.g)+dt(this.b)};var _t=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function xt(e){return"function"==typeof e?e:function(){return e}}function bt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Mt(t,n,e,r)}}function Mt(e,t,n,r){var i,o={},u=a.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,f=null;function h(){var e,t,r,i=c.status;if(!i&&((r=(t=c).responseType)&&"text"!==r?t.response:t.responseText)||i>=200&&i<300||304===i){try{e=n.call(o,c)}catch(e){return void u.error.call(o,e)}u.load.call(o,e)}else u.error.call(o,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(e)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=h:c.onreadystatechange=function(){c.readyState>3&&h()},c.onprogress=function(e){var t=a.event;a.event=e;try{u.progress.call(o,c)}finally{a.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.responseType=function(e){return arguments.length?(f=e,o):f},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(s(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(n,e,!0),null==t||"accept"in l||(l.accept=t+",*/*"),c.setRequestHeader)for(var a in l)c.setRequestHeader(a,l[a]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=f&&(c.responseType=f),null!=i&&o.on("error",i).on("load",function(e){i(null,e)}),u.beforesend.call(o,c),c.send(null==r?null:r),o},o.abort=function(){return c.abort(),o},a.rebind(o,u,"on"),null==r?o:o.get(1===(i=r).length?function(e,t){i(null==e?t:null)}:i)}_t.forEach(function(e,t){_t.set(e,ct(t))}),a.functor=xt,a.xhr=bt(D),a.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=Mt(e,t,null==n?a:o(n),r);return i.row=function(e){return arguments.length?i.response(null==(n=e)?a:o(e)):n},i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})},i.parseRows=function(e,t){var n,i,a={},o={},s=[],u=e.length,l=0,c=0;function f(){if(l>=u)return o;if(i)return i=!1,a;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return l=n+2,13===(s=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++l):10===s&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l<u;){var s,c=1;if(10===(s=e.charCodeAt(l++)))i=!0;else if(13===s)i=!0,10===e.charCodeAt(l)&&(++l,++c);else if(s!==r)continue;return e.slice(t,l-c)}return e.slice(t)}for(;(n=f())!==o;){for(var h=[];n!==a&&n!==o;)h.push(n),n=f();t&&null==(h=t(h,c++))||s.push(h)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new I,r=[];return t.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(u).join(e)].concat(t.map(function(t){return r.map(function(e){return u(t[e])}).join(e)})).join("\n")},i.formatRows=function(e){return e.map(s).join("\n")},i},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("\t","text/tab-separated-values");var kt,St,Et,At,wt=this[P(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Tt(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i={c:e,t:n+t,n:null};return St?St.n=i:kt=i,St=i,Et||(At=clearTimeout(At),Et=1,wt(Ot)),i}function Ot(){var e=Nt(),t=Lt()-e;t>24?(isFinite(t)&&(clearTimeout(At),At=setTimeout(Ot,t)),Et=0):(Et=1,wt(Ot))}function Nt(){for(var e=Date.now(),t=kt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Lt(){for(var e,t=kt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:kt=t.n;return St=e,n}function Ct(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}a.timer=function(){Tt.apply(this,arguments)},a.timer.flush=function(){Nt(),Lt()},a.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Rt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*M(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}});a.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=a.round(e,Ct(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Rt[8+n/3]};var It=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Dt=a.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=a.round(e,Ct(e,t))).toFixed(Math.max(0,Math.min(20,Ct(e*(1+1e-15),t))))}});function Ut(e){return e+""}var Pt=a.time={},zt=Date;function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){jt.setUTCDate.apply(this._,arguments)},setDay:function(){jt.setUTCDay.apply(this._,arguments)},setFullYear:function(){jt.setUTCFullYear.apply(this._,arguments)},setHours:function(){jt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){jt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){jt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){jt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){jt.setUTCSeconds.apply(this._,arguments)},setTime:function(){jt.setTime.apply(this._,arguments)}};var jt=Date.prototype;function qt(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new zt(n-1)),1),n}function a(e,n){return t(e=new zt(+e),n),e}function o(e,r,a){var o=i(e),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;o<r;)s.push(new Date(+o)),t(o,1);return s}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var s=e.utc=Yt(e);return s.floor=s,s.round=Yt(r),s.ceil=Yt(i),s.offset=Yt(a),s.range=function(e,t,n){try{zt=Ft;var r=new Ft;return r._=e,o(r,t,n)}finally{zt=Date}},e}function Yt(e){return function(t,n){try{zt=Ft;var r=new Ft;return r._=t,e(r,n)._}finally{zt=Date}}}Pt.year=qt(function(e){return(e=Pt.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Pt.years=Pt.year.range,Pt.years.utc=Pt.year.utc.range,Pt.day=qt(function(e){var t=new zt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Pt.days=Pt.day.range,Pt.days.utc=Pt.day.utc.range,Pt.dayOfYear=function(e){var t=Pt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Pt[e]=qt(function(e){return(e=Pt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=Pt.year(e).getDay();return Math.floor((Pt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Pt[e+"s"]=n.range,Pt[e+"s"].utc=n.utc.range,Pt[e+"OfYear"]=function(e){var n=Pt.year(e).getDay();return Math.floor((Pt.dayOfYear(e)+(n+t)%7)/7)}}),Pt.week=Pt.sunday,Pt.weeks=Pt.sunday.range,Pt.weeks.utc=Pt.sunday.utc.range,Pt.weekOfYear=Pt.sundayOfYear;var $t={"-":"",_:" ",0:"0"},Ht=/^\s*\d+/,Wt=/^%/;function Vt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Xt(e){return new RegExp("^(?:"+e.map(a.requote).join("|")+")","i")}function Gt(e){for(var t=new S,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Zt(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Bt(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Jt(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Qt(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Kt(e,t,n){Ht.lastIndex=0;var r,i=Ht.exec(t.slice(n,n+2));return i?(e.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function en(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function tn(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function nn(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function rn(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function an(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function on(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function sn(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function un(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ln(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=M(t)/60|0,i=M(t)%60;return n+Vt(r,"0",2)+Vt(i,"0",2)}function cn(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}a.locale=function(e){return{numberFormat:(t=e,n=t.decimal,r=t.thousands,i=t.grouping,o=t.currency,s=i&&r?function(e,t){for(var n=e.length,a=[],o=0,s=i[0],u=0;n>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),a.push(e.substring(n-=s,n+s)),!((u+=s+1)>t));)s=i[o=(o+1)%i.length];return a.reverse().join(r)}:D,function(e){var t=It.exec(e),r=t[1]||" ",i=t[2]||">",u=t[3]||"-",l=t[4]||"",c=t[5],f=+t[6],h=t[7],d=t[8],p=t[9],g=1,m="",v="",y=!1,_=!0;switch(d&&(d=+d.substring(1)),(c||"0"===r&&"="===i)&&(c=r="0",i="="),p){case"n":h=!0,p="g";break;case"%":g=100,v="%",p="f";break;case"p":g=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(m="0"+p.toLowerCase());case"c":_=!1;case"d":y=!0,d=0;break;case"s":g=-1,p="r"}"$"===l&&(m=o[0],v=o[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d)))),p=Dt.get(p)||Ut;var x=c&&h;return function(e){var t=v;if(y&&e%1)return"";var o=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(g<0){var l=a.formatPrefix(e,d);e=l.scale(e),t=l.symbol+v}else e*=g;var b,M,k=(e=p(e,d)).lastIndexOf(".");if(k<0){var S=_?e.lastIndexOf("e"):-1;S<0?(b=e,M=""):(b=e.substring(0,S),M=e.substring(S))}else b=e.substring(0,k),M=n+e.substring(k+1);!c&&h&&(b=s(b,1/0));var E=m.length+b.length+M.length+(x?0:o.length),A=E<f?new Array(E=f-E+1).join(r):"";return x&&(b=s(A+b,A.length?f-M.length:1/0)),o+=m,e=b+M,("<"===i?o+e+A:">"===i?A+o+e:"^"===i?A.substring(0,E>>=1)+o+e+A.substring(E):o+(x?e:A+e))+t}}),timeFormat:function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(e){var t=e.length;function n(n){for(var r,i,a,o=[],s=-1,u=0;++s<t;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=$t[r=e.charAt(++s)])&&(r=e.charAt(++s)),(a=b[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&zt!==Ft,i=new(r?Ft:zt);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return e},n}function f(e,t,n,r){for(var i,a,o,s=0,u=t.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(o=t.charAt(s++),!(a=M[o in $t?t.charAt(s++):o])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var t=c(e);function n(e){try{var n=new(zt=Ft);return n._=e,t(n)}finally{zt=Date}}return n.parse=function(e){try{zt=Ft;var n=t.parse(e);return n&&n._}finally{zt=Date}},n.toString=t.toString,n},c.multi=c.utc.multi=fn;var h=a.map(),d=Xt(o),p=Gt(o),g=Xt(s),m=Gt(s),v=Xt(u),y=Gt(u),_=Xt(l),x=Gt(l);i.forEach(function(e,t){h.set(e.toLowerCase(),t)});var b={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:c(t),d:function(e,t){return Vt(e.getDate(),t,2)},e:function(e,t){return Vt(e.getDate(),t,2)},H:function(e,t){return Vt(e.getHours(),t,2)},I:function(e,t){return Vt(e.getHours()%12||12,t,2)},j:function(e,t){return Vt(1+Pt.dayOfYear(e),t,3)},L:function(e,t){return Vt(e.getMilliseconds(),t,3)},m:function(e,t){return Vt(e.getMonth()+1,t,2)},M:function(e,t){return Vt(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return Vt(e.getSeconds(),t,2)},U:function(e,t){return Vt(Pt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Vt(Pt.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return Vt(e.getFullYear()%100,t,2)},Y:function(e,t){return Vt(e.getFullYear()%1e4,t,4)},Z:ln,"%":function(){return"%"}},M={a:function(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){d.lastIndex=0;var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return f(e,b.c.toString(),t,n)},d:nn,e:nn,H:an,I:an,j:rn,L:un,m:tn,M:on,p:function(e,t,n){var r=h.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:sn,U:Bt,w:Zt,W:Jt,x:function(e,t,n){return f(e,b.x.toString(),t,n)},X:function(e,t,n){return f(e,b.X.toString(),t,n)},y:Kt,Y:Qt,Z:en,"%":cn};return c}(e)};var t,n,r,i,o,s};var hn=a.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dn(){}a.format=hn.numberFormat,a.geo={},dn.prototype={s:0,t:0,add:function(e){gn(e,this.t,pn),gn(pn.s,this.s,this),this.s?this.t+=pn.t:this.s=pn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pn=new dn;function gn(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function mn(e,t){e&&yn.hasOwnProperty(e.type)&&yn[e.type](e,t)}a.geo.stream=function(e,t){e&&vn.hasOwnProperty(e.type)?vn[e.type](e,t):mn(e,t)};var vn={Feature:function(e,t){mn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)mn(n[r].geometry,t)}},yn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){_n(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_n(n[r],t,0)},Polygon:function(e,t){xn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)xn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)mn(n[r],t)}};function _n(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function xn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)_n(e[n],t,1);t.polygonEnd()}a.geo.area=function(e){return bn=0,a.geo.stream(e,In),bn};var bn,Mn,kn,Sn,En,An,wn,Tn,On,Nn,Ln,Cn,Rn=new dn,In={sphere:function(){bn+=4*Oe},point:F,lineStart:F,lineEnd:F,polygonStart:function(){Rn.reset(),In.lineStart=Dn},polygonEnd:function(){var e=2*Rn;bn+=e<0?4*Oe+e:e,In.lineStart=In.lineEnd=In.point=F}};function Dn(){var e,t,n,r,i;function a(e,t){t=t*Re/2+Oe/4;var a=(e*=Re)-n,o=a>=0?1:-1,s=o*a,u=Math.cos(t),l=Math.sin(t),c=i*l,f=r*u+c*Math.cos(s),h=c*o*Math.sin(s);Rn.add(Math.atan2(h,f)),n=e,r=u,i=l}In.point=function(o,s){In.point=a,n=(e=o)*Re,r=Math.cos(s=(t=s)*Re/2+Oe/4),i=Math.sin(s)},In.lineEnd=function(){a(e,t)}}function Un(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Pn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function zn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Fn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function jn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function qn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Yn(e){return[Math.atan2(e[1],e[0]),ze(e[2])]}function $n(e,t){return M(e[0]-t[0])<we&&M(e[1]-t[1])<we}a.geo.bounds=function(){var e,t,n,r,i,o,s,u,l,c,f,h={point:d,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v,h.lineStart=y,h.lineEnd=_,l=0,In.polygonStart()},polygonEnd:function(){In.polygonEnd(),h.point=d,h.lineStart=g,h.lineEnd=m,Rn<0?(e=-(n=180),t=-(r=90)):l>we?r=90:l<-we&&(t=-90),f[0]=e,f[1]=n}};function d(i,a){c.push(f=[e=i,n=i]),a<t&&(t=a),a>r&&(r=a)}function p(a,o){var s=Un([a*Re,o*Re]);if(u){var l=zn(u,s),c=zn([l[1],-l[0],0],l);qn(c),c=Yn(c);var f=a-i,h=f>0?1:-1,p=c[0]*Ie*h,g=M(f)>180;if(g^(h*i<p&&p<h*a))(m=c[1]*Ie)>r&&(r=m);else if(p=(p+360)%360-180,g^(h*i<p&&p<h*a)){var m;(m=-c[1]*Ie)<t&&(t=m)}else o<t&&(t=o),o>r&&(r=o);g?a<i?x(e,a)>x(e,n)&&(n=a):x(a,n)>x(e,n)&&(e=a):n>=e?(a<e&&(e=a),a>n&&(n=a)):a>i?x(e,a)>x(e,n)&&(n=a):x(a,n)>x(e,n)&&(e=a)}else d(a,o);u=s,i=a}function g(){h.point=p}function m(){f[0]=e,f[1]=n,h.point=d,u=null}function v(e,t){if(u){var n=e-i;l+=M(n)>180?n+(n>0?360:-360):n}else o=e,s=t;In.point(e,t),p(e,t)}function y(){In.lineStart()}function _(){v(o,s),In.lineEnd(),M(l)>we&&(e=-(n=180)),f[0]=e,f[1]=n,u=null}function x(e,t){return(t-=e)<0?t+360:t}function b(e,t){return e[0]-t[0]}function k(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){if(r=n=-(e=t=1/0),c=[],a.geo.stream(i,h),l=c.length){c.sort(b);for(var o=1,s=[g=c[0]];o<l;++o)k((d=c[o])[0],g)||k(d[1],g)?(x(g[0],d[1])>x(g[0],g[1])&&(g[1]=d[1]),x(d[0],g[1])>x(g[0],g[1])&&(g[0]=d[0])):s.push(g=d);for(var u,l,d,p=-1/0,g=(o=0,s[l=s.length-1]);o<=l;g=d,++o)d=s[o],(u=x(g[1],d[0]))>p&&(p=u,e=d[0],n=g[1])}return c=f=null,e===1/0||t===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,r]]}}(),a.geo.centroid=function(e){Mn=kn=Sn=En=An=wn=Tn=On=Nn=Ln=Cn=0,a.geo.stream(e,Hn);var t=Nn,n=Ln,r=Cn,i=t*t+n*n+r*r;return i<Te&&(t=wn,n=Tn,r=On,kn<we&&(t=Sn,n=En,r=An),(i=t*t+n*n+r*r)<Te)?[NaN,NaN]:[Math.atan2(n,t)*Ie,ze(r/Math.sqrt(i))*Ie]};var Hn={sphere:F,point:Wn,lineStart:Xn,lineEnd:Gn,polygonStart:function(){Hn.lineStart=Zn},polygonEnd:function(){Hn.lineStart=Xn}};function Wn(e,t){e*=Re;var n=Math.cos(t*=Re);Vn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Vn(e,t,n){Sn+=(e-Sn)/++Mn,En+=(t-En)/Mn,An+=(n-An)/Mn}function Xn(){var e,t,n;function r(r,i){r*=Re;var a=Math.cos(i*=Re),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*o-e*u)*l+(l=e*s-t*o)*l),e*o+t*s+n*u);kn+=l,wn+=l*(e+(e=o)),Tn+=l*(t+(t=s)),On+=l*(n+(n=u)),Vn(e,t,n)}Hn.point=function(i,a){i*=Re;var o=Math.cos(a*=Re);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(a),Hn.point=r,Vn(e,t,n)}}function Gn(){Hn.point=Wn}function Zn(){var e,t,n,r,i;function a(e,t){e*=Re;var a=Math.cos(t*=Re),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(t),l=r*u-i*s,c=i*o-n*u,f=n*s-r*o,h=Math.sqrt(l*l+c*c+f*f),d=n*o+r*s+i*u,p=h&&-Pe(d)/h,g=Math.atan2(h,d);Nn+=p*l,Ln+=p*c,Cn+=p*f,kn+=g,wn+=g*(n+(n=o)),Tn+=g*(r+(r=s)),On+=g*(i+(i=u)),Vn(n,r,i)}Hn.point=function(o,s){e=o,t=s,Hn.point=a,o*=Re;var u=Math.cos(s*=Re);n=u*Math.cos(o),r=u*Math.sin(o),i=Math.sin(s),Vn(n,r,i)},Hn.lineEnd=function(){a(e,t),Hn.lineEnd=Gn,Hn.point=Wn}}function Bn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Jn(){return!0}function Qn(e,t,n,r,i){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if($n(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd()}else{var u=new er(n,e,null,!0),l=new er(n,null,u,!1);u.o=l,a.push(u),o.push(l),l=new er(r,null,u=new er(r,e,null,!1),!0),u.o=l,a.push(u),o.push(l)}}}),o.sort(t),Kn(a),Kn(o),a.length){for(var s=0,u=n,l=o.length;s<l;++s)o[s].e=u=!u;for(var c,f,h=a[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,l=c.length;s<l;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(s=(c=d.p.z).length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}}function Kn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function er(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function tr(e,t,n,r){return function(i,o){var s,u=t(o),l=i.invert(r[0],r[1]),c={point:f,lineStart:d,lineEnd:p,polygonStart:function(){c.point=x,c.lineStart=b,c.lineEnd=M,s=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=d,c.lineEnd=p,s=a.merge(s);var e=function(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Rn.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],c=l.length;if(c)for(var f=l[0],h=f[0],d=f[1]/2+Oe/4,p=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0);var v=(e=l[m])[0],y=e[1]/2+Oe/4,_=Math.sin(y),x=Math.cos(y),b=v-h,M=b>=0?1:-1,k=M*b,S=k>Oe,E=p*_;if(Rn.add(Math.atan2(E*M*Math.sin(k),g*x+E*Math.cos(k))),a+=S?b+M*Ne:b,S^h>=n^v>=n){var A=zn(Un(f),Un(e));qn(A);var w=zn(i,A);qn(w);var T=(S^b>=0?-1:1)*ze(w[2]);(r>T||r===T&&(A[0]||A[1]))&&(o+=S^b>=0?1:-1)}if(!m++)break;h=v,p=_,g=x,f=e}}return(a<-we||a<we&&Rn<-we)^1&o}(l,g);s.length?(_||(o.polygonStart(),_=!0),Qn(s,ir,e,n,o)):e&&(_||(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),s=g=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function h(e,t){var n=i(e,t);u.point(n[0],n[1])}function d(){c.point=h,u.lineStart()}function p(){c.point=f,u.lineEnd()}var g,m,v=rr(),y=t(v),_=!1;function x(e,t){m.push([e,t]);var n=i(e,t);y.point(n[0],n[1])}function b(){y.lineStart(),m=[]}function M(){x(m[0][0],m[0][1]),y.lineEnd();var e,t=y.clean(),n=v.buffer(),r=n.length;if(m.pop(),g.push(m),m=null,r)if(1&t){var i,a=-1;if((r=(e=n[0]).length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart();++a<r;)o.point((i=e[a])[0],i[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(nr))}return c}}function nr(e){return e.length>1}function rr(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:F,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function ir(e,t){return((e=e.x)[0]<0?e[1]-Ce-we:Ce-e[1])-((t=t.x)[0]<0?t[1]-Ce-we:Ce-t[1])}var ar=tr(Jn,function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s,u,l,c,f,h,d,p=a>0?Oe:-Oe,g=M(a-n);M(g-Oe)<we?(e.point(n,r=(r+o)/2>0?Ce:-Ce),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(p,r),e.point(a,r),t=0):i!==p&&g>=Oe&&(M(n-i)<we&&(n-=i*we),M(a-p)<we&&(a-=p*we),s=n,u=r,l=a,c=o,d=Math.sin(s-l),r=M(d)>we?Math.atan((Math.sin(u)*(h=Math.cos(c))*Math.sin(l)-Math.sin(c)*(f=Math.cos(u))*Math.sin(s))/(f*h*d)):(u+c)/2,e.point(i,r),e.lineEnd(),e.lineStart(),e.point(p,r),t=0),e.point(n=a,r=o),i=p},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)i=n*Ce,r.point(-Oe,i),r.point(0,i),r.point(Oe,i),r.point(Oe,0),r.point(Oe,-i),r.point(0,-i),r.point(-Oe,-i),r.point(-Oe,0),r.point(-Oe,i);else if(M(e[0]-t[0])>we){var a=e[0]<t[0]?Oe:-Oe;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])},[-Oe,-Oe/2]);function or(e,t,n,r){return function(i){var a,o=i.a,s=i.b,u=o.x,l=o.y,c=0,f=1,h=s.x-u,d=s.y-l;if(a=e-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=n-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}if(a=t-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>c&&(c=a)}if(a=r-l,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<f&&(f=a)}return c>0&&(i.a={x:u+c*h,y:l+c*d}),f<1&&(i.b={x:u+f*h,y:l+f*d}),i}}}}}}var sr=1e9;function ur(e,t,n,r){return function(u){var l,c,f,h,d,p,g,m,v,y,_,x=u,b=rr(),M=or(e,t,n,r),k={point:A,lineStart:function(){k.point=w,c&&c.push(f=[]);y=!0,v=!1,g=m=NaN},lineEnd:function(){l&&(w(h,d),p&&v&&b.rejoin(),l.push(b.buffer()));k.point=A,v&&u.lineEnd()},polygonStart:function(){u=b,l=[],c=[],_=!0},polygonEnd:function(){u=x,l=a.merge(l);var t=function(e){for(var t=0,n=c.length,r=e[1],i=0;i<n;++i)for(var a,o=1,s=c[i],u=s.length,l=s[0];o<u;++o)a=s[o],l[1]<=r?a[1]>r&&Ue(l,a,e)>0&&++t:a[1]<=r&&Ue(l,a,e)<0&&--t,l=a;return 0!==t}([e,r]),n=_&&t,i=l.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),S(null,null,1,u),u.lineEnd()),i&&Qn(l,o,t,S,u),u.polygonEnd()),l=c=f=null}};function S(a,o,u,l){var c=0,f=0;if(null==a||(c=i(a,u))!==(f=i(o,u))||s(a,o)<0^u>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+u+4)%4)!==f);else l.point(o[0],o[1])}function E(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function A(e,t){E(e,t)&&u.point(e,t)}function w(e,t){var n=E(e=Math.max(-sr,Math.min(sr,e)),t=Math.max(-sr,Math.min(sr,t)));if(c&&f.push([e,t]),y)h=e,d=t,p=n,y=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&v)u.point(e,t);else{var r={a:{x:g,y:m},b:{x:e,y:t}};M(r)?(v||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),_=!1):n&&(u.lineStart(),u.point(e,t),_=!1)}g=e,m=t,v=n}return k};function i(r,i){return M(r[0]-e)<we?i>0?0:3:M(r[0]-n)<we?i>0?2:1:M(r[1]-t)<we?i>0?1:0:i>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function lr(e){var t=0,n=Oe/3,r=Lr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Oe/180,n=e[1]*Oe/180):[t/Oe*180,n/Oe*180]},i}function cr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}return o.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,ze((i-(e*e+n*n)*r*r)/(2*r))]},o}a.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),(i=a(e)).valid=!0,i},extent:function(s){return arguments.length?(a=ur(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(a.geo.conicEqualArea=function(){return lr(cr)}).raw=cr,a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},a.geo.albersUsa=function(){var e,t,n,r,i=a.geo.albers(),o=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};function l(i){var a=i[0],o=i[1];return e=null,t(a,o),e||(n(a,o),e)||r(a,o),e}return l.invert=function(e){var t=i.scale(),n=i.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?o:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:i).invert(e)},l.stream=function(e){var t=i.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(e){return arguments.length?(i.precision(e),o.precision(e),s.precision(e),l):i.precision()},l.scale=function(e){return arguments.length?(i.scale(e),o.scale(.35*e),s.scale(e),l.translate(i.translate())):i.scale()},l.translate=function(e){if(!arguments.length)return i.translate();var a=i.scale(),c=+e[0],f=+e[1];return t=i.translate(e).clipExtent([[c-.455*a,f-.238*a],[c+.455*a,f+.238*a]]).stream(u).point,n=o.translate([c-.307*a,f+.201*a]).clipExtent([[c-.425*a+we,f+.12*a+we],[c-.214*a-we,f+.234*a-we]]).stream(u).point,r=s.translate([c-.205*a,f+.212*a]).clipExtent([[c-.214*a+we,f+.166*a+we],[c-.115*a-we,f+.234*a-we]]).stream(u).point,l},l.scale(1070)};var fr,hr,dr,pr,gr,mr,vr={point:F,lineStart:F,lineEnd:F,polygonStart:function(){hr=0,vr.lineStart=yr},polygonEnd:function(){vr.lineStart=vr.lineEnd=vr.point=F,fr+=M(hr/2)}};function yr(){var e,t,n,r;function i(e,t){hr+=r*e-n*t,n=e,r=t}vr.point=function(a,o){vr.point=i,e=n=a,t=r=o},vr.lineEnd=function(){i(e,t)}}var _r={point:function(e,t){e<dr&&(dr=e);e>gr&&(gr=e);t<pr&&(pr=t);t>mr&&(mr=t)},lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F};function xr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var br,Mr={point:kr,lineStart:Sr,lineEnd:Er,polygonStart:function(){Mr.lineStart=Ar},polygonEnd:function(){Mr.point=kr,Mr.lineStart=Sr,Mr.lineEnd=Er}};function kr(e,t){Sn+=e,En+=t,++An}function Sr(){var e,t;function n(n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a);wn+=o*(e+n)/2,Tn+=o*(t+r)/2,On+=o,kr(e=n,t=r)}Mr.point=function(r,i){Mr.point=n,kr(e=r,t=i)}}function Er(){Mr.point=kr}function Ar(){var e,t,n,r;function i(e,t){var i=e-n,a=t-r,o=Math.sqrt(i*i+a*a);wn+=o*(n+e)/2,Tn+=o*(r+t)/2,On+=o,Nn+=(o=r*e-n*t)*(n+e),Ln+=o*(r+t),Cn+=3*o,kr(n=e,r=t)}Mr.point=function(a,o){Mr.point=i,kr(e=n=a,t=r=o)},Mr.lineEnd=function(){i(e,t)}}function wr(e){var t=.5,n=Math.cos(30*Re),r=16;function i(t){return(r?function(t){var n,i,o,s,u,l,c,f,h,d,p,g,m={point:v,lineStart:y,lineEnd:x,polygonStart:function(){t.polygonStart(),m.lineStart=b},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function v(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){f=NaN,m.point=_,t.lineStart()}function _(n,i){var o=Un([n,i]),s=e(n,i);a(f,h,c,d,p,g,f=s[0],h=s[1],c=n,d=o[0],p=o[1],g=o[2],r,t),t.point(f,h)}function x(){m.point=v,t.lineEnd()}function b(){y(),m.point=M,m.lineEnd=k}function M(e,t){_(n=e,t),i=f,o=h,s=d,u=p,l=g,m.point=_}function k(){a(f,h,c,d,p,g,i,o,n,s,u,l,r,t),m.lineEnd=x,x()}return m}:function(t){return Or(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})})(t)}function a(r,i,o,s,u,l,c,f,h,d,p,g,m,v){var y=c-r,_=f-i,x=y*y+_*_;if(x>4*t&&m--){var b=s+d,k=u+p,S=l+g,E=Math.sqrt(b*b+k*k+S*S),A=Math.asin(S/=E),w=M(M(S)-1)<we||M(o-h)<we?(o+h)/2:Math.atan2(k,b),T=e(w,A),O=T[0],N=T[1],L=O-r,C=N-i,R=_*L-y*C;(R*R/x>t||M((y*L+_*C)/x-.5)>.3||s*d+u*p+l*g<n)&&(a(r,i,o,s,u,l,O,N,w,b/=E,k/=E,S,m,v),v.point(O,N),a(O,N,w,b,k,S,c,f,h,d,p,g,m,v))}}return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function Tr(e){this.stream=e}function Or(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Nr(e){return Lr(function(){return e})()}function Lr(e){var t,n,r,i,o,s,u=wr(function(e,n){return[(e=t(e,n))[0]*l+i,o-e[1]*l]}),l=150,c=480,f=250,h=0,d=0,p=0,g=0,m=0,v=ar,y=D,_=null,x=null;function b(e){return[(e=r(e[0]*Re,e[1]*Re))[0]*l+i,o-e[1]*l]}function k(e){return(e=r.invert((e[0]-i)/l,(o-e[1])/l))&&[e[0]*Ie,e[1]*Ie]}function S(){r=Bn(n=Dr(p,g,m),t);var e=t(h,d);return i=c-e[0]*l,o=f+e[1]*l,E()}function E(){return s&&(s.valid=!1,s=null),b}return b.stream=function(e){return s&&(s.valid=!1),(s=Cr(v(n,u(y(e))))).valid=!0,s},b.clipAngle=function(e){return arguments.length?(v=null==e?(_=e,ar):function(e){var t=Math.cos(e),n=t>0,r=M(t)>we;return tr(i,function(e){var t,s,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var d,p=[f,h],g=i(f,h),m=n?g?0:o(f,h):g?o(f+(f<0?Oe:-Oe),h):0;if(!t&&(l=u=g)&&e.lineStart(),g!==u&&(d=a(t,p),($n(t,d)||$n(p,d))&&(p[0]+=we,p[1]+=we,g=i(p[0],p[1]))),g!==u)c=0,g?(e.lineStart(),d=a(p,t),e.point(d[0],d[1])):(d=a(t,p),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(r&&t&&n^g){var v;m&s||!(v=a(p,t,!0))||(c=0,n?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||t&&$n(t,p)||e.point(p[0],p[1]),t=p,u=g,s=m},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}},Fr(e,6*Re),n?[0,-e]:[-Oe,e-Oe]);function i(e,n){return Math.cos(e)*Math.cos(n)>t}function a(e,n,r){var i=[1,0,0],a=zn(Un(e),Un(n)),o=Pn(a,a),s=a[0],u=o-s*s;if(!u)return!r&&e;var l=t*o/u,c=-t*s/u,f=zn(i,a),h=jn(i,l);Fn(h,jn(a,c));var d=f,p=Pn(h,d),g=Pn(d,d),m=p*p-g*(Pn(h,h)-1);if(!(m<0)){var v=Math.sqrt(m),y=jn(d,(-p-v)/g);if(Fn(y,h),y=Yn(y),!r)return y;var _,x=e[0],b=n[0],k=e[1],S=n[1];b<x&&(_=x,x=b,b=_);var E=b-x,A=M(E-Oe)<we;if(!A&&S<k&&(_=k,k=S,S=_),A||E<we?A?k+S>0^y[1]<(M(y[0]-x)<we?k:S):k<=y[1]&&y[1]<=S:E>Oe^(x<=y[0]&&y[0]<=b)){var w=jn(d,(-p+v)/g);return Fn(w,h),[y,Yn(w)]}}}function o(t,r){var i=n?e:Oe-e,a=0;return t<-i?a|=1:t>i&&(a|=2),r<-i?a|=4:r>i&&(a|=8),a}}((_=+e)*Re),E()):_},b.clipExtent=function(e){return arguments.length?(x=e,y=e?ur(e[0][0],e[0][1],e[1][0],e[1][1]):D,E()):x},b.scale=function(e){return arguments.length?(l=+e,S()):l},b.translate=function(e){return arguments.length?(c=+e[0],f=+e[1],S()):[c,f]},b.center=function(e){return arguments.length?(h=e[0]%360*Re,d=e[1]%360*Re,S()):[h*Ie,d*Ie]},b.rotate=function(e){return arguments.length?(p=e[0]%360*Re,g=e[1]%360*Re,m=e.length>2?e[2]%360*Re:0,S()):[p*Ie,g*Ie,m*Ie]},a.rebind(b,u,"precision"),function(){return t=e.apply(this,arguments),b.invert=t.invert&&k,S()}}function Cr(e){return Or(e,function(t,n){e.point(t*Re,n*Re)})}function Rr(e,t){return[e,t]}function Ir(e,t){return[e>Oe?e-Ne:e<-Oe?e+Ne:e,t]}function Dr(e,t,n){return e?t||n?Bn(Pr(e),zr(t,n)):Pr(e):t||n?zr(t,n):Ir}function Ur(e){return function(t,n){return[(t+=e)>Oe?t-Ne:t<-Oe?t+Ne:t,n]}}function Pr(e){var t=Ur(e);return t.invert=Ur(-e),t}function zr(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),a=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*n+s*r;return[Math.atan2(u*i-c*a,s*n-l*r),ze(c*i+u*a)]}return o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*i-u*a;return[Math.atan2(u*i+l*a,s*n+c*r),ze(c*n-s*r)]},o}function Fr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;null!=i?(i=jr(n,i),a=jr(n,a),(o>0?i<a:i>a)&&(i+=o*Ne)):(i=e+o*Ne,a=e-.5*u);for(var l,c=i;o>0?c>a:c<a;c-=u)s.point((l=Yn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function jr(e,t){var n=Un(t);n[0]-=e,qn(n);var r=Pe(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-we)%(2*Math.PI)}function qr(e,t,n){var r=a.range(e,t-we,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Yr(e,t,n){var r=a.range(e,t-we,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function $r(e){return e.source}function Hr(e){return e.target}a.geo.path=function(){var e,t,n,r,i,o=4.5;function s(e){return e&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=n(r)),a.geo.stream(e,i)),r.result()}function u(){return i=null,s}return s.area=function(e){return fr=0,a.geo.stream(e,n(vr)),fr},s.centroid=function(e){return Sn=En=An=wn=Tn=On=Nn=Ln=Cn=0,a.geo.stream(e,n(Mr)),Cn?[Nn/Cn,Ln/Cn]:On?[wn/On,Tn/On]:An?[Sn/An,En/An]:[NaN,NaN]},s.bounds=function(e){return gr=mr=-(dr=pr=1/0),a.geo.stream(e,n(_r)),[[dr,pr],[gr,mr]]},s.projection=function(t){return arguments.length?(n=(e=t)?t.stream||(r=t,i=wr(function(e,t){return r([e*Ie,t*Ie])}),function(e){return Cr(i(e))}):D,u()):e;var r,i},s.context=function(e){return arguments.length?(r=null==(t=e)?new function(){var e=xr(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=xr(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=a}function a(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}:new function(e){var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:F};function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Ne)}function i(t,r){e.moveTo(t,r),n.point=a}function a(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}(e),"function"!=typeof o&&r.pointRadius(o),u()):t},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(r.pointRadius(+e),+e),s):o},s.projection(a.geo.albersUsa()).context(null)},a.geo.transform=function(e){return{stream:function(t){var n=new Tr(t);for(var r in e)n[r]=e[r];return n}}},Tr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},a.geo.projection=Nr,a.geo.projectionMutator=Lr,(a.geo.equirectangular=function(){return Nr(Rr)}).raw=Rr.invert=Rr,a.geo.rotation=function(e){function t(t){return(t=e(t[0]*Re,t[1]*Re))[0]*=Ie,t[1]*=Ie,t}return e=Dr(e[0]%360*Re,e[1]*Re,e.length>2?e[2]*Re:0),t.invert=function(t){return(t=e.invert(t[0]*Re,t[1]*Re))[0]*=Ie,t[1]*=Ie,t},t},Ir.invert=Rr,a.geo.circle=function(){var e,t,n=[0,0],r=6;function i(){var e="function"==typeof n?n.apply(this,arguments):n,r=Dr(-e[0]*Re,-e[1]*Re,0).invert,i=[];return t(null,null,1,{point:function(e,t){i.push(e=r(e,t)),e[0]*=Ie,e[1]*=Ie}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(e){return arguments.length?(n=e,i):n},i.angle=function(n){return arguments.length?(t=Fr((e=+n)*Re,r*Re),i):e},i.precision=function(n){return arguments.length?(t=Fr(e*Re,(r=+n)*Re),i):r},i.angle(90)},a.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Re,i=e[1]*Re,a=t[1]*Re,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},a.geo.graticule=function(){var e,t,n,r,i,o,s,u,l,c,f,h,d=10,p=d,g=90,m=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:_()}}function _(){return a.range(Math.ceil(r/g)*g,n,g).map(f).concat(a.range(Math.ceil(u/m)*m,s,m).map(h)).concat(a.range(Math.ceil(t/d)*d,e,d).filter(function(e){return M(e%g)>we}).map(l)).concat(a.range(Math.ceil(o/p)*p,i,p).filter(function(e){return M(e%m)>we}).map(c))}return y.lines=function(){return _().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(s).slice(1),f(n).reverse().slice(1),h(u).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),u>s&&(e=u,u=s,s=e),y.precision(v)):[[r,u],[n,s]]},y.minorExtent=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(v)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(g=+e[0],m=+e[1],y):[g,m]},y.minorStep=function(e){return arguments.length?(d=+e[0],p=+e[1],y):[d,p]},y.precision=function(a){return arguments.length?(v=+a,l=qr(o,i,90),c=Yr(t,e,v),f=qr(u,s,90),h=Yr(r,n,v),y):v},y.majorExtent([[-180,-90+we],[180,90-we]]).minorExtent([[-180,-80-we],[180,80+we]])},a.geo.greatArc=function(){var e,t,n=$r,r=Hr;function i(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),t||r.apply(this,arguments)]}}return i.distance=function(){return a.geo.distance(e||n.apply(this,arguments),t||r.apply(this,arguments))},i.source=function(t){return arguments.length?(n=t,e="function"==typeof t?null:t,i):n},i.target=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,i):r},i.precision=function(){return arguments.length?i:0},i},a.geo.interpolate=function(e,t){return n=e[0]*Re,r=e[1]*Re,i=t[0]*Re,a=t[1]*Re,o=Math.cos(r),s=Math.sin(r),u=Math.cos(a),l=Math.sin(a),c=o*Math.cos(n),f=o*Math.sin(n),h=u*Math.cos(i),d=u*Math.sin(i),p=2*Math.asin(Math.sqrt(je(a-r)+o*u*je(i-n))),g=1/Math.sin(p),(m=p?function(e){var t=Math.sin(e*=p)*g,n=Math.sin(p-e)*g,r=n*c+t*h,i=n*f+t*d,a=n*s+t*l;return[Math.atan2(i,r)*Ie,Math.atan2(a,Math.sqrt(r*r+i*i))*Ie]}:function(){return[n*Ie,r*Ie]}).distance=p,m;var n,r,i,a,o,s,u,l,c,f,h,d,p,g,m},a.geo.length=function(e){return br=0,a.geo.stream(e,Wr),br};var Wr={sphere:F,point:F,lineStart:function(){var e,t,n;function r(r,i){var a=Math.sin(i*=Re),o=Math.cos(i),s=M((r*=Re)-e),u=Math.cos(s);br+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-t*o*u)*s),t*a+n*o*u),e=r,t=a,n=o}Wr.point=function(i,a){e=i*Re,t=Math.sin(a*=Re),n=Math.cos(a),Wr.point=r},Wr.lineEnd=function(){Wr.point=Wr.lineEnd=F}},lineEnd:F,polygonStart:F,polygonEnd:F};function Vr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]},n}var Xr=Vr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(a.geo.azimuthalEqualArea=function(){return Nr(Xr)}).raw=Xr;var Gr=Vr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},D);function Zr(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Oe/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),a=n*Math.pow(r(e),i)/i;if(!i)return Qr;function o(e,t){a>0?t<-Ce+we&&(t=-Ce+we):t>Ce-we&&(t=Ce-we);var n=a/Math.pow(r(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}return o.invert=function(e,t){var n=a-t,r=De(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Ce]},o}function Br(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(M(r)<we)return Rr;function a(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}return a.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-De(r)*Math.sqrt(e*e+n*n)]},a}(a.geo.azimuthalEquidistant=function(){return Nr(Gr)}).raw=Gr,(a.geo.conicConformal=function(){return lr(Zr)}).raw=Zr,(a.geo.conicEquidistant=function(){return lr(Br)}).raw=Br;var Jr=Vr(function(e){return 1/e},Math.atan);function Qr(e,t){return[e,Math.log(Math.tan(Oe/4+t/2))]}function Kr(e){var t,n=Nr(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Oe*r(),u=i();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}(a.geo.gnomonic=function(){return Nr(Jr)}).raw=Jr,Qr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ce]},(a.geo.mercator=function(){return Kr(Qr)}).raw=Qr;var ei=Vr(function(){return 1},Math.asin);(a.geo.orthographic=function(){return Nr(ei)}).raw=ei;var ti=Vr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function ni(e,t){return[Math.log(Math.tan(Oe/4+t/2)),-e]}function ri(e){return e[0]}function ii(e){return e[1]}function ai(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&Ue(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function oi(e,t){return e[0]-t[0]||e[1]-t[1]}(a.geo.stereographic=function(){return Nr(ti)}).raw=ti,ni.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ce]},(a.geo.transverseMercator=function(){var e=Kr(ni),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=ni,a.geom={},a.geom.hull=function(e){var t=ri,n=ii;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,i=xt(t),a=xt(n),o=e.length,s=[],u=[];for(r=0;r<o;r++)s.push([+i.call(this,e[r],r),+a.call(this,e[r],r),r]);for(s.sort(oi),r=0;r<o;r++)u.push([s[r][0],-s[r][1]]);var l=ai(s),c=ai(u),f=c[0]===l[0],h=c[c.length-1]===l[l.length-1],d=[];for(r=l.length-1;r>=0;--r)d.push(e[s[l[r]][2]]);for(r=+f;r<c.length-h;++r)d.push(e[s[c[r]][2]]);return d}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},a.geom.polygon=function(e){return V(e,si),e};var si=a.geom.polygon.prototype=[];function ui(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function li(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,h=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+h*o,u+h*c]}function ci(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}si.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},si.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},si.clip=function(e){for(var t,n,r,i,a,o,s=ci(e),u=-1,l=this.length-ci(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,i=this[u],a=t[(r=t.length-s)-1],n=-1;++n<r;)ui(o=t[n],c,i)?(ui(a,c,i)||e.push(li(a,o,c,i)),e.push(o)):ui(a,c,i)&&e.push(li(a,o,c,i)),a=o;s&&e.push(e[0]),c=i}return e};var fi,hi,di,pi,gi,mi=[],vi=[];function yi(e){var t=mi.pop()||new function(){Ii(this),this.edge=this.site=this.circle=null};return t.site=e,t}function _i(e){wi(e),di.remove(e),mi.push(e),Ii(e)}function xi(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];_i(e);for(var u=a;u.circle&&M(n-u.circle.x)<we&&M(r-u.circle.cy)<we;)a=u.P,s.unshift(u),_i(u),u=a;s.unshift(u),wi(u);for(var l=o;l.circle&&M(n-l.circle.x)<we&&M(r-l.circle.cy)<we;)o=l.N,s.push(l),_i(l),l=o;s.push(l),wi(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],Li(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=Ni(u.site,l.site,null,i),Ai(u),Ai(l)}function bi(e){for(var t,n,r,i,a=e.x,o=e.y,s=di._;s;)if((r=Mi(s,o)-a)>we)s=s.L;else{if(!((i=a-ki(s,o))>we)){r>-we?(t=s.P,n=s):i>-we?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=yi(e);if(di.insert(t,u),t||n){if(t===n)return wi(t),n=yi(t.site),di.insert(u,n),u.edge=n.edge=Ni(t.site,u.site),Ai(t),void Ai(n);if(n){wi(t),wi(n);var l=t.site,c=l.x,f=l.y,h=e.x-c,d=e.y-f,p=n.site,g=p.x-c,m=p.y-f,v=2*(h*m-d*g),y=h*h+d*d,_=g*g+m*m,x={x:(m*y-d*_)/v+c,y:(h*_-g*y)/v+f};Li(n.edge,l,p,x),u.edge=Ni(l,e,null,x),n.edge=Ni(e,p,null,x),Ai(t),Ai(n)}else u.edge=Ni(t.site,u.site)}}function Mi(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,l=u-t;if(!l)return s;var c=s-r,f=1/a-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function ki(e,t){var n=e.N;if(n)return Mi(n,t);var r=e.site;return r.y===t?r.x:1/0}function Si(e){this.site=e,this.edges=[]}function Ei(e,t){return t.angle-e.angle}function Ai(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=2*(u*(m=a.y-s)-l*c);if(!(f>=-Te)){var h=u*u+l*l,d=c*c+m*m,p=(m*h-l*d)/f,g=(u*d-c*h)/f,m=g+s,v=vi.pop()||new function(){Ii(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=e,v.site=i,v.x=p+o,v.y=m+Math.sqrt(p*p+g*g),v.cy=m,e.circle=v;for(var y=null,_=gi._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}gi.insert(y,v),y||(pi=v)}}}}function wi(e){var t=e.circle;t&&(t.P||(pi=t.N),gi.remove(t),vi.push(t),Ii(t),e.circle=null)}function Ti(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,f=e.r,h=c.x,d=c.y,p=f.x,g=f.y,m=(h+p)/2,v=(d+g)/2;if(g===d){if(m<o||m>=s)return;if(h>p){if(a){if(a.y>=l)return}else a={x:m,y:u};n={x:m,y:l}}else{if(a){if(a.y<u)return}else a={x:m,y:l};n={x:m,y:u}}}else if(i=v-(r=(h-p)/(g-d))*m,r<-1||r>1)if(h>p){if(a){if(a.y>=l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(d<g){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function Oi(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ni(e,t,n,r){var i=new Oi(e,t);return fi.push(i),n&&Li(i,e,t,n),r&&Li(i,t,e,r),hi[e.i].edges.push(new Ci(i,e,t)),hi[t.i].edges.push(new Ci(i,t,e)),i}function Li(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Ci(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Ri(){this._=null}function Ii(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Di(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ui(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Pi(e){for(;e.L;)e=e.L;return e}function zi(e,t){var n,r,i,a=e.sort(Fi).pop();for(fi=[],hi=new Array(e.length),di=new Ri,gi=new Ri;;)if(i=pi,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(hi[a.i]=new Si(a),bi(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;xi(i.arc)}t&&(function(e){for(var t,n=fi,r=or(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(!Ti(t=n[i],e)||!r(t)||M(t.a.x-t.b.x)<we&&M(t.a.y-t.b.y)<we)&&(t.a=t.b=null,n.splice(i,1))}(t),function(e){for(var t,n,r,i,a,o,s,u,l,c,f=e[0][0],h=e[1][0],d=e[0][1],p=e[1][1],g=hi,m=g.length;m--;)if((a=g[m])&&a.prepare())for(u=(s=a.edges).length,o=0;o<u;)r=(c=s[o].end()).x,i=c.y,t=(l=s[++o%u].start()).x,n=l.y,(M(r-t)>we||M(i-n)>we)&&(s.splice(o,0,new Ci((v=a.site,y=c,_=M(r-f)<we&&p-i>we?{x:f,y:M(t-f)<we?n:p}:M(i-p)<we&&h-r>we?{x:M(n-p)<we?t:h,y:p}:M(r-h)<we&&i-d>we?{x:h,y:M(t-h)<we?n:d}:M(i-d)<we&&r-f>we?{x:M(n-d)<we?t:f,y:d}:null,x=void 0,x=new Oi(v,null),x.a=y,x.b=_,fi.push(x),x),a.site,null)),++u);var v,y,_,x}(t));var o={cells:hi,edges:fi};return di=gi=fi=hi=null,o}function Fi(e,t){return t.y-e.y||t.x-e.x}Si.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ei),t.length},Ci.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ri.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Pi(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Di(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ui(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Ui(this,n),n=(e=n).U),n.C=!1,r.C=!0,Di(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?Pi(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Di(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ui(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Di(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Ui(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Di(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Ui(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},a.geom.voronoi=function(e){var t=ri,n=ii,r=t,i=n,a=ji;if(e)return o(e);function o(e){var t=new Array(e.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];return zi(s(e),a).cells.forEach(function(a,s){var u=a.edges,l=a.site;(t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[]).point=e[s]}),t}function s(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/we)*we,y:Math.round(i(e,t)/we)*we,i:t}})}return o.links=function(e){return zi(s(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(e){var t=[];return zi(s(e)).cells.forEach(function(n,r){for(var i,a,o,s,u=n.site,l=n.edges.sort(Ei),c=-1,f=l.length,h=l[f-1].edge,d=h.l===u?h.r:h.l;++c<f;)h,i=d,d=(h=l[c].edge).l===u?h.r:h.l,r<i.i&&r<d.i&&(o=i,s=d,((a=u).x-s.x)*(o.y-a.y)-(a.x-o.x)*(s.y-a.y)<0)&&t.push([e[r],e[i.i],e[d.i]])}),t},o.x=function(e){return arguments.length?(r=xt(t=e),o):t},o.y=function(e){return arguments.length?(i=xt(n=e),o):n},o.clipExtent=function(e){return arguments.length?(a=null==e?ji:e,o):a===ji?null:a},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):a===ji?null:a&&a[1]},o};var ji=[[-1e6,-1e6],[1e6,1e6]];function qi(e){return e.x}function Yi(e){return e.y}function $i(e,t){e=a.rgb(e),t=a.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,s=t.g-r,u=t.b-i;return function(e){return"#"+dt(Math.round(n+o*e))+dt(Math.round(r+s*e))+dt(Math.round(i+u*e))}}function Hi(e,t){var n,r={},i={};for(n in e)n in t?r[n]=Zi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Wi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Vi(e,t){var n,r,i,a=Xi.lastIndex=Gi.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=Xi.exec(e))&&(r=Gi.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Wi(n,r)})),a=Gi.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}a.geom.delaunay=function(e){return a.geom.voronoi().triangles(e)},a.geom.quadtree=function(e,t,n,r,i){var a,o=ri,s=ii;if(a=arguments.length)return o=qi,s=Yi,3===a&&(i=n,r=t,n=t=0),u(e);function u(e){var u,l,c,f,h,d,p,g,m,v=xt(o),y=xt(s);if(null!=t)d=t,p=n,g=r,m=i;else if(g=m=-(d=p=1/0),l=[],c=[],h=e.length,a)for(f=0;f<h;++f)(u=e[f]).x<d&&(d=u.x),u.y<p&&(p=u.y),u.x>g&&(g=u.x),u.y>m&&(m=u.y),l.push(u.x),c.push(u.y);else for(f=0;f<h;++f){var _=+v(u=e[f],f),x=+y(u,f);_<d&&(d=_),x<p&&(p=x),_>g&&(g=_),x>m&&(m=x),l.push(_),c.push(x)}var b=g-d,k=m-p;function S(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,l=e.y;if(null!=u)if(M(u-n)+M(l-r)<.01)E(e,t,n,r,i,a,o,s);else{var c=e.point;e.x=e.y=e.point=null,E(e,c,u,l,i,a,o,s),E(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else E(e,t,n,r,i,a,o,s)}function E(e,t,n,r,i,a,o,s){var u=.5*(i+o),l=.5*(a+s),c=n>=u,f=r>=l,h=f<<1|c;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),c?i=u:o=u,f?a=l:s=l,S(e,t,n,r,i,a,o,s)}b>k?m=p+b:g=d+k;var A={leaf:!0,nodes:[],point:null,x:null,y:null};if(A.add=function(e){S(A,e,+v(e,++f),+y(e,f),d,p,g,m)},A.visit=function(e){!function e(t,n,r,i,a,o){if(!t(n,r,i,a,o)){var s=.5*(r+a),u=.5*(i+o),l=n.nodes;l[0]&&e(t,l[0],r,i,s,u),l[1]&&e(t,l[1],s,i,a,u),l[2]&&e(t,l[2],r,u,s,o),l[3]&&e(t,l[3],s,u,a,o)}}(e,A,d,p,g,m)},A.find=function(e){return t=A,n=e[0],r=e[1],l=1/0,function e(t,c,f,h,d){if(!(c>o||f>s||h<i||d<a)){if(p=t.point){var p,g=n-t.x,m=r-t.y,v=g*g+m*m;if(v<l){var y=Math.sqrt(l=v);i=n-y,a=r-y,o=n+y,s=r+y,u=p}}for(var _=t.nodes,x=.5*(c+h),b=.5*(f+d),M=(r>=b)<<1|n>=x,k=M+4;M<k;++M)if(t=_[3&M])switch(3&M){case 0:e(t,c,f,x,b);break;case 1:e(t,x,f,h,b);break;case 2:e(t,c,b,x,d);break;case 3:e(t,x,b,h,d)}}}(t,i=d,a=p,o=g,s=m),u;var t,n,r,i,a,o,s,u,l},f=-1,null==t){for(;++f<h;)S(A,e[f],l[f],c[f],d,p,g,m);--f}else e.forEach(A.add);return l=c=e=u=null,A}return u.x=function(e){return arguments.length?(o=e,u):o},u.y=function(e){return arguments.length?(s=e,u):s},u.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),u):null==t?null:[[t,n],[r,i]]},u.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),u):null==t?null:[r-t,i-n]},u},a.interpolateRgb=$i,a.interpolateObject=Hi,a.interpolateNumber=Wi,a.interpolateString=Vi;var Xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gi=new RegExp(Xi.source,"g");function Zi(e,t){for(var n,r=a.interpolators.length;--r>=0&&!(n=a.interpolators[r](e,t)););return n}function Bi(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(Zi(e[n],t[n]));for(;n<a;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}a.interpolate=Zi,a.interpolators=[function(e,t){var n=typeof t;return("string"===n?_t.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?$i:Vi:t instanceof We?$i:Array.isArray(t)?Bi:"object"===n&&isNaN(t)?Hi:Wi)(e,t)}],a.interpolateArray=Bi;var Ji=function(){return D},Qi=a.map({linear:Ji,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return na},cubic:function(){return ra},sin:function(){return aa},exp:function(){return oa},circle:function(){return sa},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/Ne*Math.asin(1/e):(e=1,n=t/4);return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ne/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ua}}),Ki=a.map({in:D,out:ea,"in-out":ta,"out-in":function(e){return ta(ea(e))}});function ea(e){return function(t){return 1-e(1-t)}}function ta(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function na(e){return e*e}function ra(e){return e*e*e}function ia(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function aa(e){return 1-Math.cos(e*Ce)}function oa(e){return Math.pow(2,10*(e-1))}function sa(e){return 1-Math.sqrt(1-e*e)}function ua(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function la(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function ca(e){var t,n,r,i=[e.a,e.b],a=[e.c,e.d],o=ha(i),s=fa(i,a),u=ha(((t=a)[0]+=(r=-s)*(n=i)[0],t[1]+=r*n[1],t))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Ie,this.translate=[e.e,e.f],this.scale=[o,u],this.skew=u?Math.atan2(s,u)*Ie:0}function fa(e,t){return e[0]*t[0]+e[1]*t[1]}function ha(e){var t=Math.sqrt(fa(e,e));return t&&(e[0]/=t,e[1]/=t),t}a.ease=function(e){var t,n=e.indexOf("-"),r=n>=0?e.slice(0,n):e,i=n>=0?e.slice(n+1):"in";return r=Qi.get(r)||Ji,i=Ki.get(i)||D,t=i(r.apply(null,o.call(arguments,1))),function(e){return e<=0?0:e>=1?1:t(e)}},a.interpolateHcl=function(e,t){e=a.hcl(e),t=a.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,s=t.c-r,u=t.l-i;isNaN(s)&&(s=0,r=isNaN(r)?t.c:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Je(n+o*e,r+s*e,i+u*e)+""}},a.interpolateHsl=function(e,t){e=a.hsl(e),t=a.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,s=t.s-r,u=t.l-i;isNaN(s)&&(s=0,r=isNaN(r)?t.s:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Ge(n+o*e,r+s*e,i+u*e)+""}},a.interpolateLab=function(e,t){e=a.lab(e),t=a.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,s=t.a-r,u=t.b-i;return function(e){return it(n+o*e,r+s*e,i+u*e)+""}},a.interpolateRound=la,a.transform=function(e){var t=u.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new ca(n?n.matrix:da)})(e)},ca.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var da={a:1,b:0,c:0,d:1,e:0,f:0};function pa(e){return e.length?e.pop()+",":""}function ga(e,t){var n,r,i,o,s,u,l=[],c=[];return e=a.transform(e),t=a.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Wi(e[0],t[0])},{i:i-2,x:Wi(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,l,c),n=e.rotate,r=t.rotate,i=l,n!==r?(n-r>180?r+=360:r-n>180&&(n+=360),c.push({i:i.push(pa(i)+"rotate(",null,")")-2,x:Wi(n,r)})):r&&i.push(pa(i)+"rotate("+r+")"),o=e.skew,s=t.skew,u=l,o!==s?c.push({i:u.push(pa(u)+"skewX(",null,")")-2,x:Wi(o,s)}):s&&u.push(pa(u)+"skewX("+s+")"),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(pa(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Wi(e[0],t[0])},{i:i-2,x:Wi(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(pa(n)+"scale("+t+")")}(e.scale,t.scale,l,c),e=t=null,function(e){for(var t,n=-1,r=c.length;++n<r;)l[(t=c[n]).i]=t.x(e);return l.join("")}}function ma(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function va(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function ya(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=_a(e),r=_a(t),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function _a(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function xa(e){e.fixed|=2}function ba(e){e.fixed&=-7}function Ma(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ka(e){e.fixed&=-5}a.interpolateTransform=ga,a.layout={},a.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(ya(e[n]));return t}},a.layout.chord=function(){var e,t,n,r,i,o,s,u={},l=0;function c(){var u,c,h,d,p,g={},m=[],v=a.range(r),y=[];for(e=[],t=[],u=0,d=-1;++d<r;){for(c=0,p=-1;++p<r;)c+=n[d][p];m.push(c),y.push(a.range(r)),u+=c}for(i&&v.sort(function(e,t){return i(m[e],m[t])}),o&&y.forEach(function(e,t){e.sort(function(e,r){return o(n[t][e],n[t][r])})}),u=(Ne-l*r)/u,c=0,d=-1;++d<r;){for(h=c,p=-1;++p<r;){var _=v[d],x=y[_][p],b=n[_][x],M=c,k=c+=b*u;g[_+"-"+x]={index:_,subindex:x,startAngle:M,endAngle:k,value:b}}t[_]={index:_,startAngle:h,endAngle:c,value:m[_]},c+=l}for(d=-1;++d<r;)for(p=d-1;++p<r;){var S=g[d+"-"+p],E=g[p+"-"+d];(S.value||E.value)&&e.push(S.value<E.value?{source:E,target:S}:{source:S,target:E})}s&&f()}function f(){e.sort(function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return u.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,e=t=null,u):n},u.padding=function(n){return arguments.length?(l=n,e=t=null,u):l},u.sortGroups=function(n){return arguments.length?(i=n,e=t=null,u):i},u.sortSubgroups=function(t){return arguments.length?(o=t,e=null,u):o},u.sortChords=function(t){return arguments.length?(s=t,e&&f(),u):s},u.chords=function(){return e||c(),e},u.groups=function(){return t||c(),t},u},a.layout.force=function(){var e,t,n,r,i,o,s={},u=a.dispatch("start","tick","end"),l=[1,1],c=.9,f=Sa,h=Ea,d=-30,p=Aa,g=.1,m=.64,v=[],y=[];function _(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(s*s/m<u){if(u<p){var l=t.charge/u;e.px-=a*l,e.py-=o*l}return!0}if(t.point&&u&&u<p){l=t.pointCharge/u;e.px-=a*l,e.py-=o*l}}return!t.charge}}function x(e){e.px=a.event.x,e.py=a.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,u.end({type:"end",alpha:n=0}),!0;var t,s,f,h,p,m,x,b,M,k=v.length,S=y.length;for(s=0;s<S;++s)h=(f=y[s]).source,(m=(b=(p=f.target).x-h.x)*b+(M=p.y-h.y)*M)&&(b*=m=n*i[s]*((m=Math.sqrt(m))-r[s])/m,M*=m,p.x-=b*(x=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=M*x,h.x+=b*(x=1-x),h.y+=M*x);if((x=n*g)&&(b=l[0]/2,M=l[1]/2,s=-1,x))for(;++s<k;)(f=v[s]).x+=(b-f.x)*x,f.y+=(M-f.y)*x;if(d)for(!function e(t,n,r){var i=0,a=0;t.charge=0;if(!t.leaf)for(var o,s=t.nodes,u=s.length,l=-1;++l<u;)null!=(o=s[l])&&(e(o,n,r),t.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=n*r[t.point.index];t.charge+=t.pointCharge=c,i+=c*t.point.x,a+=c*t.point.y}t.cx=i/t.charge;t.cy=a/t.charge}(t=a.geom.quadtree(v),n,o),s=-1;++s<k;)(f=v[s]).fixed||t.visit(_(f));for(s=-1;++s<k;)(f=v[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);u.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(l=e,s):l},s.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.chargeDistance=function(e){return arguments.length?(p=e*e,s):Math.sqrt(p)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,u.end({type:"end",alpha:n=0})):t>0&&(u.start({type:"start",alpha:n=t}),e=Tt(s.tick)),s):n},s.start=function(){var e,t,n,a=v.length,u=y.length,c=l[0],p=l[1];for(e=0;e<a;++e)(n=v[e]).index=e,n.weight=0;for(e=0;e<u;++e)"number"==typeof(n=y[e]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<a;++e)n=v[e],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof f)for(e=0;e<u;++e)r[e]=+f.call(this,y[e],e);else for(e=0;e<u;++e)r[e]=f;if(i=[],"function"==typeof h)for(e=0;e<u;++e)i[e]=+h.call(this,y[e],e);else for(e=0;e<u;++e)i[e]=h;if(o=[],"function"==typeof d)for(e=0;e<a;++e)o[e]=+d.call(this,v[e],e);else for(e=0;e<a;++e)o[e]=d;function g(n,r){if(!t){for(t=new Array(a),l=0;l<a;++l)t[l]=[];for(l=0;l<u;++l){var i=y[l];t[i.source.index].push(i.target),t[i.target.index].push(i.source)}}for(var o,s=t[e],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=a.behavior.drag().origin(D).on("dragstart.force",xa).on("drag.force",x).on("dragend.force",ba)),!arguments.length)return t;this.on("mouseover.force",Ma).on("mouseout.force",ka).call(t)},a.rebind(s,u,"on")};var Sa=20,Ea=1,Aa=1/0;function wa(e,t){return a.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Ra,e}function Ta(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Oa(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function Na(e){return e.children}function La(e){return e.value}function Ca(e,t){return t.value-e.value}function Ra(e){return a.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}a.layout.hierarchy=function(){var e=Ca,t=Na,n=La;function r(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(l=t.call(r,a,a.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=a,c.depth=a.depth+1;n&&(a.value=0),a.children=l}else n&&(a.value=+n.call(r,a,a.depth)||0),delete a.children;return Oa(i,function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)}),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(Ta(e,function(e){e.children&&(e.value=0)}),Oa(e,function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},r},a.layout.partition=function(){var e=a.layout.hierarchy(),t=[1,1];function n(n,r){var i=e.call(this,n,r);return function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(s=a[l],n,u=s.value*r,i),n+=u}}(i[0],0,t[0],t[1]/function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}(i[0])),i}return n.size=function(e){return arguments.length?(t=e,n):t},wa(n,e)},a.layout.pie=function(){var e=Number,t=Ia,n=0,r=Ne,i=0;function o(s){var u,l=s.length,c=s.map(function(t,n){return+e.call(o,t,n)}),f=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof r?r.apply(this,arguments):r)-f,d=Math.min(Math.abs(h)/l,+("function"==typeof i?i.apply(this,arguments):i)),p=d*(h<0?-1:1),g=a.sum(c),m=g?(h-l*p)/g:0,v=a.range(l),y=[];return null!=t&&v.sort(t===Ia?function(e,t){return c[t]-c[e]}:function(e,n){return t(s[e],s[n])}),v.forEach(function(e){y[e]={data:s[e],value:u=c[e],startAngle:f,endAngle:f+=u*m+p,padAngle:d}}),y}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(t=e,o):t},o.startAngle=function(e){return arguments.length?(n=e,o):n},o.endAngle=function(e){return arguments.length?(r=e,o):r},o.padAngle=function(e){return arguments.length?(i=e,o):i},o};var Ia={};function Da(e){return e.x}function Ua(e){return e.y}function Pa(e,t,n){e.y0=t,e.y=n}a.layout.stack=function(){var e=D,t=ja,n=qa,r=Pa,i=Da,o=Ua;function s(u,l){if(!(d=u.length))return u;var c=u.map(function(t,n){return e.call(s,t,n)}),f=c.map(function(e){return e.map(function(e,t){return[i.call(s,e,t),o.call(s,e,t)]})}),h=t.call(s,f,l);c=a.permute(c,h),f=a.permute(f,h);var d,p,g,m,v=n.call(s,f,l),y=c[0].length;for(g=0;g<y;++g)for(r.call(s,c[0][g],m=v[g],f[0][g][1]),p=1;p<d;++p)r.call(s,c[p][g],m+=f[p-1][g][1],f[p][g][1]);return u}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(t="function"==typeof e?e:za.get(e)||ja,s):t},s.offset=function(e){return arguments.length?(n="function"==typeof e?e:Fa.get(e)||qa,s):n},s.x=function(e){return arguments.length?(i=e,s):i},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(r=e,s):r},s};var za=a.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(Ya),o=e.map($a),s=a.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,l=0,c=[],f=[];for(t=0;t<r;++t)n=s[t],u<l?(u+=o[n],c.push(n)):(l+=o[n],f.push(n));return f.reverse().concat(c)},reverse:function(e){return a.range(e.length).reverse()},default:ja}),Fa=a.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,u=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)u[n]=(s-o[n])/2;return u},wiggle:function(e){var t,n,r,i,a,o,s,u,l,c=e.length,f=e[0],h=f.length,d=[];for(d[0]=u=l=0,n=1;n<h;++n){for(t=0,i=0;t<c;++t)i+=e[t][n][1];for(t=0,a=0,s=f[n][0]-f[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}d[n]=u-=i?a/i*s:0,u<l&&(l=u)}for(n=0;n<h;++n)d[n]-=l;return d},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:qa});function ja(e){return a.range(e.length)}function qa(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function Ya(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function $a(e){return e.reduce(Ha,0)}function Ha(e,t){return e+t[1]}function Wa(e,t){return Va(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Va(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function Xa(e){return[a.min(e),a.max(e)]}function Ga(e,t){return e.value-t.value}function Za(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ba(e,t){e._pack_next=t,t._pack_prev=e}function Ja(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Qa(e){if((t=e.children)&&(u=t.length)){var t,n,r,i,a,o,s,u,l=1/0,c=-1/0,f=1/0,h=-1/0;if(t.forEach(Ka),(n=t[0]).x=-n.r,n.y=0,_(n),u>1&&((r=t[1]).x=r.r,r.y=0,_(r),u>2))for(to(n,r,i=t[2]),_(i),Za(n,i),n._pack_prev=i,Za(i,r),r=n._pack_next,a=3;a<u;a++){to(n,r,i=t[a]);var d=0,p=1,g=1;for(o=r._pack_next;o!==r;o=o._pack_next,p++)if(Ja(o,i)){d=1;break}if(1==d)for(s=n._pack_prev;s!==o._pack_prev&&!Ja(s,i);s=s._pack_prev,g++);d?(p<g||p==g&&r.r<n.r?Ba(n,r=o):Ba(n=s,r),a--):(Za(n,i),r=i,_(i))}var m=(l+c)/2,v=(f+h)/2,y=0;for(a=0;a<u;a++)(i=t[a]).x-=m,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=y,t.forEach(eo)}function _(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),f=Math.min(e.y-e.r,f),h=Math.max(e.y+e.r,h)}}function Ka(e){e._pack_next=e._pack_prev=e}function eo(e){delete e._pack_next,delete e._pack_prev}function to(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a,u=.5+((r*=r)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+l*a,n.y=e.y+u*a-l*i}else n.x=e.x+r,n.y=e.y}function no(e,t){return e.parent==t.parent?1:2}function ro(e){var t=e.children;return t.length?t[0]:e.t}function io(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function ao(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function oo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function so(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function uo(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function lo(e){return e.rangeExtent?e.rangeExtent():uo(e.range())}function co(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function fo(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function ho(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:po}a.layout.histogram=function(){var e=!0,t=Number,n=Xa,r=Wa;function i(i,o){for(var s,u,l=[],c=i.map(t,this),f=n.call(this,c,o),h=r.call(this,f,c,o),d=(o=-1,c.length),p=h.length-1,g=e?1:1/d;++o<p;)(s=l[o]=[]).dx=h[o+1]-(s.x=h[o]),s.y=0;if(p>0)for(o=-1;++o<d;)(u=c[o])>=f[0]&&u<=f[1]&&((s=l[a.bisect(h,u,1,p)-1]).y+=g,s.push(i[o]));return l}return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=xt(e),i):n},i.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return Va(t,e)}:xt(e),i):r},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},a.layout.pack=function(){var e,t=a.layout.hierarchy().sort(Ga),n=0,r=[1,1];function i(i,a){var o=t.call(this,i,a),s=o[0],u=r[0],l=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Oa(s,function(e){e.r=+c(e.value)}),Oa(s,Qa),n){var f=n*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;Oa(s,function(e){e.r+=f}),Oa(s,Qa),Oa(s,function(e){e.r-=f})}return function e(t,n,r,i){var a=t.children;t.x=n+=i*t.x;t.y=r+=i*t.y;t.r*=i;if(a)for(var o=-1,s=a.length;++o<s;)e(a[o],n,r,i)}(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),o}return i.size=function(e){return arguments.length?(r=e,i):r},i.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,i):e},i.padding=function(e){return arguments.length?(n=+e,i):n},wa(i,t)},a.layout.tree=function(){var e=a.layout.hierarchy().sort(null).value(null),t=no,n=[1,1],r=null;function i(i,a){var l=e.call(this,i,a),c=l[0],f=function(e){var t,n={A:null,children:[e]},r=[n];for(;null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(c);if(Oa(f,o),f.parent.m=-f.z,Ta(f,s),r)Ta(c,u);else{var h=c,d=c,p=c;Ta(c,function(e){e.x<h.x&&(h=e),e.x>d.x&&(d=e),e.depth>p.depth&&(p=e)});var g=t(h,d)/2-h.x,m=n[0]/(d.x+t(d,h)/2+g),v=n[1]/(p.depth||1);Ta(c,function(e){e.x=(e.x+g)*m,e.y=e.depth*v})}return l}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n.length){!function(e){var t,n=0,r=0,i=e.children,a=i.length;for(;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],l=a.m,c=o.m,f=s.m,h=u.m;s=io(s),a=ro(a),s&&a;)u=ro(u),(o=io(o)).a=e,(i=s.z+f-a.z-l+t(s._,a._))>0&&(ao((p=e,g=r,(d=s).a.parent===p.parent?d.a:g),e,i),l+=i,c+=i),f+=s.m,l+=a.m,h+=u.m,c+=o.m;s&&!io(o)&&(o.t=s,o.m+=f-c),a&&!ro(u)&&(u.t=a,u.m+=l-h,r=e)}var d,p,g;return r}(e,i,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=n[0],e.y=e.depth*n[1]}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e)?u:null,i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null==(n=e)?null:u,i):r?n:null},wa(i,e)},a.layout.cluster=function(){var e=a.layout.hierarchy().sort(null).value(null),t=no,n=[1,1],r=!1;function i(i,o){var s,u=e.call(this,i,o),l=u[0],c=0;Oa(l,function(e){var n,r,i=e.children;i&&i.length?(e.x=(r=i).reduce(function(e,t){return e+t.x},0)/r.length,e.y=(n=i,1+a.max(n,function(e){return e.y}))):(e.x=s?c+=t(e,s):0,e.y=0,s=e)});var f=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(l),h=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(l),d=f.x-t(f,h)/2,p=h.x+t(h,f)/2;return Oa(l,r?function(e){e.x=(e.x-l.x)*n[0],e.y=(l.y-e.y)*n[1]}:function(e){e.x=(e.x-d)/(p-d)*n[0],e.y=(1-(l.y?e.y/l.y:1))*n[1]}),u}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e),i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null!=(n=e),i):r?n:null},wa(i,e)},a.layout.treemap=function(){var e,t=a.layout.hierarchy(),n=Math.round,r=[1,1],i=null,o=oo,s=!1,u="squarify",l=.5*(1+Math.sqrt(5));function c(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function f(e){var t=e.children;if(t&&t.length){var n,r,i,a=o(e),s=[],l=t.slice(),h=1/0,g="slice"===u?a.dx:"dice"===u?a.dy:"slice-dice"===u?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(c(l,a.dx*a.dy/e.value),s.area=0;(i=l.length)>0;)s.push(n=l[i-1]),s.area+=n.area,"squarify"!==u||(r=d(s,g))<=h?(l.pop(),h=r):(s.area-=s.pop().area,p(s,g,a,!1),g=Math.min(a.dx,a.dy),s.length=s.area=0,h=1/0);s.length&&(p(s,g,a,!0),s.length=s.area=0),t.forEach(f)}}function h(e){var t=e.children;if(t&&t.length){var n,r=o(e),i=t.slice(),a=[];for(c(i,r.dx*r.dy/e.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(p(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);t.forEach(h)}}function d(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<a&&(a=n),n>i&&(i=n));return t*=t,(r*=r)?Math.max(t*i*l/r,r/(t*a*l)):1/0}function p(e,t,r,i){var a,o=-1,s=e.length,u=r.x,l=r.y,c=t?n(e.area/t):0;if(t==r.dx){for((i||c>r.dy)&&(c=r.dy);++o<s;)(a=e[o]).x=u,a.y=l,a.dy=c,u+=a.dx=Math.min(r.x+r.dx-u,c?n(a.area/c):0);a.z=!0,a.dx+=r.x+r.dx-u,r.y+=c,r.dy-=c}else{for((i||c>r.dx)&&(c=r.dx);++o<s;)(a=e[o]).x=u,a.y=l,a.dx=c,l+=a.dy=Math.min(r.y+r.dy-l,c?n(a.area/c):0);a.z=!1,a.dy+=r.y+r.dy-l,r.x+=c,r.dx-=c}}function g(n){var i=e||t(n),a=i[0];return a.x=a.y=0,a.value?(a.dx=r[0],a.dy=r[1]):a.dx=a.dy=0,e&&t.revalue(a),c([a],a.dx*a.dy/a.value),(e?h:f)(a),s&&(e=i),i}return g.size=function(e){return arguments.length?(r=e,g):r},g.padding=function(e){if(!arguments.length)return i;function t(t){return so(t,e)}var n;return o=null==(i=e)?oo:"function"==(n=typeof e)?function(t){var n=e.call(g,t,t.depth);return null==n?oo(t):so(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,g},g.round=function(e){return arguments.length?(n=e?Math.round:Number,g):n!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(e){return arguments.length?(l=e,g):l},g.mode=function(e){return arguments.length?(u=e+"",g):u},wa(g,t)},a.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=a.random.normal.apply(a,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=a.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},a.scale={};var po={floor:D,ceil:D};function go(e,t,n,r){var i=[],o=[],s=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=u;)i.push(n(e[s-1],e[s])),o.push(r(t[s-1],t[s]));return function(t){var n=a.bisect(e,t,1,u)-1;return o[n](i[n](t))}}function mo(e,t){return a.rebind(e,t,"range","rangeRound","interpolate","clamp")}function vo(e,t){return fo(e,ho(yo(e,t)[2])),fo(e,ho(yo(e,t)[2])),e}function yo(e,t){null==t&&(t=10);var n=uo(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function _o(e,t){return a.range.apply(a,yo(e,t))}function xo(e,t,n){var r,i,o,s=yo(e,t);if(n){var u=It.exec(n);if(u.shift(),"s"===u[8]){var l=a.formatPrefix(Math.max(M(s[0]),M(s[1])));return u[7]||(u[7]="."+Mo(l.scale(s[2]))),u[8]="f",n=a.format(u.join("")),function(e){return n(l.scale(e))+l.symbol}}u[7]||(u[7]="."+(r=u[8],o=Mo((i=s)[2]),r in bo?Math.abs(o-Mo(Math.max(M(i[0]),M(i[1]))))+ +("e"!==r):o-2*("%"===r))),n=u.join("")}else n=",."+Mo(s[2])+"f";return a.format(n)}a.scale.linear=function(){return function e(t,n,r,i){var a,o;function s(){var e=Math.min(t.length,n.length)>2?go:co,s=i?va:ma;return a=e(t,n,s,r),o=e(n,t,s,Zi),u}function u(e){return a(e)}u.invert=function(e){return o(e)};u.domain=function(e){return arguments.length?(t=e.map(Number),s()):t};u.range=function(e){return arguments.length?(n=e,s()):n};u.rangeRound=function(e){return u.range(e).interpolate(la)};u.clamp=function(e){return arguments.length?(i=e,s()):i};u.interpolate=function(e){return arguments.length?(r=e,s()):r};u.ticks=function(e){return _o(t,e)};u.tickFormat=function(e,n){return xo(t,e,n)};u.nice=function(e){return vo(t,e),s()};u.copy=function(){return e(t,n,r,i)};return s()}([0,1],[0,1],Zi,!1)};var bo={s:1,g:1,p:1,r:1,e:1};function Mo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}a.scale.log=function(){return function e(t,n,r,i){function o(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function s(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function u(e){return t(o(e))}u.invert=function(e){return s(t.invert(e))};u.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((i=e.map(Number)).map(o)),u):i};u.base=function(e){return arguments.length?(n=+e,t.domain(i.map(o)),u):n};u.nice=function(){var e=fo(i.map(o),r?Math:So);return t.domain(e),i=e.map(s),u};u.ticks=function(){var e=uo(i),t=[],a=e[0],u=e[1],l=Math.floor(o(a)),c=Math.ceil(o(u)),f=n%1?2:n;if(isFinite(c-l)){if(r){for(;l<c;l++)for(var h=1;h<f;h++)t.push(s(l)*h);t.push(s(l))}else for(t.push(s(l));l++<c;)for(var h=f-1;h>0;h--)t.push(s(l)*h);for(l=0;t[l]<a;l++);for(c=t.length;t[c-1]>u;c--);t=t.slice(l,c)}return t};u.tickFormat=function(e,t){if(!arguments.length)return ko;arguments.length<2?t=ko:"function"!=typeof t&&(t=a.format(t));var r=Math.max(1,n*e/u.ticks().length);return function(e){var i=e/s(Math.round(o(e)));return i*n<n-.5&&(i*=n),i<=r?t(e):""}};u.copy=function(){return e(t.copy(),n,r,i)};return mo(u,t)}(a.scale.linear().domain([0,1]),10,!0,[1,10])};var ko=a.format(".0e"),So={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Eo(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}a.scale.pow=function(){return function e(t,n,r){var i=Eo(n),a=Eo(1/n);function o(e){return t(i(e))}o.invert=function(e){return a(t.invert(e))};o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(i)),o):r};o.ticks=function(e){return _o(r,e)};o.tickFormat=function(e,t){return xo(r,e,t)};o.nice=function(e){return o.domain(vo(r,e))};o.exponent=function(e){return arguments.length?(i=Eo(n=e),a=Eo(1/n),t.domain(r.map(i)),o):n};o.copy=function(){return e(t.copy(),n,r)};return mo(o,t)}(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return function e(t,n){var r,i,o;function s(e){return i[((r.get(e)||("range"===n.t?r.set(e,t.push(e)):NaN))-1)%i.length]}function u(e,n){return a.range(t.length).map(function(t){return e+n*t})}s.domain=function(e){if(!arguments.length)return t;t=[],r=new S;for(var i,a=-1,o=e.length;++a<o;)r.has(i=e[a])||r.set(i,t.push(i));return s[n.t].apply(s,n.a)};s.range=function(e){return arguments.length?(i=e,o=0,n={t:"range",a:arguments},s):i};s.rangePoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],l=e[1],c=t.length<2?(a=(a+l)/2,0):(l-a)/(t.length-1+r);return i=u(a+c*r/2,c),o=0,n={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],l=e[1],c=t.length<2?(a=l=Math.round((a+l)/2),0):(l-a)/(t.length-1+r)|0;return i=u(a+Math.round(c*r/2+(l-a-(t.length-1+r)*c)/2),c),o=0,n={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var l=e[1]<e[0],c=e[l-0],f=e[1-l],h=(f-c)/(t.length-r+2*a);return i=u(c+h*a,h),l&&i.reverse(),o=h*(1-r),n={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var l=e[1]<e[0],c=e[l-0],f=e[1-l],h=Math.floor((f-c)/(t.length-r+2*a));return i=u(c+Math.round((f-c-(t.length-r)*h)/2),h),l&&i.reverse(),o=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return o};s.rangeExtent=function(){return uo(n.a[0])};s.copy=function(){return e(t,n)};return s.domain(t)}([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range(Ao)},a.scale.category20=function(){return a.scale.ordinal().range(wo)},a.scale.category20b=function(){return a.scale.ordinal().range(To)},a.scale.category20c=function(){return a.scale.ordinal().range(Oo)};var Ao=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft),wo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft),To=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft),Oo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);function No(){return 0}a.scale.quantile=function(){return function e(t,n){var r;function i(){var e=0,i=n.length;for(r=[];++e<i;)r[e-1]=a.quantile(t,e/i);return o}function o(e){if(!isNaN(e=+e))return n[a.bisect(r,e)]}o.domain=function(e){return arguments.length?(t=e.map(v).filter(y).sort(m),i()):t};o.range=function(e){return arguments.length?(n=e,i()):n};o.quantiles=function(){return r};o.invertExtent=function(e){return(e=n.indexOf(e))<0?[NaN,NaN]:[e>0?r[e-1]:t[0],e<r.length?r[e]:t[t.length-1]]};o.copy=function(){return e(t,n)};return i()}([],[])},a.scale.quantize=function(){return function e(t,n,r){var i,a;function o(e){return r[Math.max(0,Math.min(a,Math.floor(i*(e-t))))]}function s(){return i=r.length/(n-t),a=r.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};o.range=function(e){return arguments.length?(r=e,s()):r};o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/i+t,e+1/i]};o.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},a.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[a.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},a.scale.identity=function(){return function e(t){function n(e){return+e}n.invert=n;n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t};n.ticks=function(e){return _o(t,e)};n.tickFormat=function(e,n){return xo(t,e,n)};n.copy=function(){return e(t)};return n}([0,1])},a.svg={},a.svg.arc=function(){var e=Co,t=Ro,n=No,r=Lo,i=Io,a=Do,o=Uo;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),c=i.apply(this,arguments)-Ce,f=a.apply(this,arguments)-Ce,h=Math.abs(f-c),d=c>f?0:1;if(l<s&&(p=l,l=s,s=p),h>=Le)return u(l,d)+(s?u(s,1-d):"")+"Z";var p,g,m,v,y,_,x,b,M,k,S,E,A=0,w=0,T=[];if((v=(+o.apply(this,arguments)||0)/2)&&(m=r===Lo?Math.sqrt(s*s+l*l):+r.apply(this,arguments),d||(w*=-1),l&&(w=ze(m/l*Math.sin(v))),s&&(A=ze(m/s*Math.sin(v)))),l){y=l*Math.cos(c+w),_=l*Math.sin(c+w),x=l*Math.cos(f-w),b=l*Math.sin(f-w);var O=Math.abs(f-c-2*w)<=Oe?0:1;if(w&&Po(y,_,x,b)===d^O){var N=(c+f)/2;y=l*Math.cos(N),_=l*Math.sin(N),x=b=null}}else y=_=0;if(s){M=s*Math.cos(f-A),k=s*Math.sin(f-A),S=s*Math.cos(c+A),E=s*Math.sin(c+A);var L=Math.abs(c-f+2*A)<=Oe?0:1;if(A&&Po(M,k,S,E)===1-d^L){var C=(c+f)/2;M=s*Math.cos(C),k=s*Math.sin(C),S=E=null}}else M=k=0;if(h>we&&(p=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){g=s<l^d?0:1;var R=p,I=p;if(h<Oe){var D=null==S?[M,k]:null==x?[y,_]:li([y,_],[S,E],[x,b],[M,k]),U=y-D[0],P=_-D[1],z=x-D[0],F=b-D[1],j=1/Math.sin(Math.acos((U*z+P*F)/(Math.sqrt(U*U+P*P)*Math.sqrt(z*z+F*F)))/2),q=Math.sqrt(D[0]*D[0]+D[1]*D[1]);I=Math.min(p,(s-q)/(j-1)),R=Math.min(p,(l-q)/(j+1))}if(null!=x){var Y=zo(null==S?[M,k]:[S,E],[y,_],l,R,d),$=zo([x,b],[M,k],l,R,d);p===R?T.push("M",Y[0],"A",R,",",R," 0 0,",g," ",Y[1],"A",l,",",l," 0 ",1-d^Po(Y[1][0],Y[1][1],$[1][0],$[1][1]),",",d," ",$[1],"A",R,",",R," 0 0,",g," ",$[0]):T.push("M",Y[0],"A",R,",",R," 0 1,",g," ",$[0])}else T.push("M",y,",",_);if(null!=S){var H=zo([y,_],[S,E],s,-I,d),W=zo([M,k],null==x?[y,_]:[x,b],s,-I,d);p===I?T.push("L",W[0],"A",I,",",I," 0 0,",g," ",W[1],"A",s,",",s," 0 ",d^Po(W[1][0],W[1][1],H[1][0],H[1][1]),",",1-d," ",H[1],"A",I,",",I," 0 0,",g," ",H[0]):T.push("L",W[0],"A",I,",",I," 0 0,",g," ",H[0])}else T.push("L",M,",",k)}else T.push("M",y,",",_),null!=x&&T.push("A",l,",",l," 0 ",O,",",d," ",x,",",b),T.push("L",M,",",k),null!=S&&T.push("A",s,",",s," 0 ",L,",",1-d," ",S,",",E);return T.push("Z"),T.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=xt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=xt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=xt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==Lo?Lo:xt(e),s):r},s.startAngle=function(e){return arguments.length?(i=xt(e),s):i},s.endAngle=function(e){return arguments.length?(a=xt(e),s):a},s.padAngle=function(e){return arguments.length?(o=xt(e),s):o},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ce;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Lo="auto";function Co(e){return e.innerRadius}function Ro(e){return e.outerRadius}function Io(e){return e.startAngle}function Do(e){return e.endAngle}function Uo(e){return e&&e.padAngle}function Po(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function zo(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=e[0]+u,f=e[1]+l,h=t[0]+u,d=t[1]+l,p=(c+h)/2,g=(f+d)/2,m=h-c,v=d-f,y=m*m+v*v,_=n-r,x=c*d-h*f,b=(v<0?-1:1)*Math.sqrt(Math.max(0,_*_*y-x*x)),M=(x*v-m*b)/y,k=(-x*m-v*b)/y,S=(x*v+m*b)/y,E=(-x*m+v*b)/y,A=M-p,w=k-g,T=S-p,O=E-g;return A*A+w*w>T*T+O*O&&(M=S,k=E),[[M-u,k-l],[M*n/_,k*n/_]]}function Fo(e){var t=ri,n=ii,r=Jn,i=qo,a=i.key,o=.7;function s(a){var s,u=[],l=[],c=-1,f=a.length,h=xt(t),d=xt(n);function p(){u.push("M",i(e(l),o))}for(;++c<f;)r.call(this,s=a[c],c)?l.push([+h.call(this,s,c),+d.call(this,s,c)]):l.length&&(p(),l=[]);return l.length&&p(),u.length?u.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=jo.get(e)||qo).key,s):a},s.tension=function(e){return arguments.length?(o=e,s):o},s}a.svg.line=function(){return Fo(D)};var jo=a.map({linear:qo,"linear-closed":Yo,step:function(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];for(;++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":$o,"step-after":Ho,basis:Xo,"basis-open":function(e){if(e.length<4)return qo(e);var t,n=[],r=-1,i=e.length,a=[0],o=[0];for(;++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);n.push(Go(Jo,a)+","+Go(Jo,o)),--r;for(;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Qo(n,a,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];for(;++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);t=[Go(Jo,o),",",Go(Jo,s)],--r;for(;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Qo(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,u=e[n][1]-o,l=-1;++l<=n;)r=e[l],i=l/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*u);return Xo(e)},cardinal:function(e,t){return e.length<3?qo(e):e[0]+Wo(e,Vo(e,t))},"cardinal-open":function(e,t){return e.length<4?qo(e):e[1]+Wo(e.slice(1,-1),Vo(e,t))},"cardinal-closed":function(e,t){return e.length<3?Yo(e):e[0]+Wo((e.push(e[0]),e),Vo([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?qo(e):e[0]+Wo(e,function(e){var t,n,r,i,a=[],o=function(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=Ko(i,a);for(;++t<n;)r[t]=(o+(o=Ko(i=a,a=e[t+1])))/2;return r[t]=o,r}(e),s=-1,u=e.length-1;for(;++s<u;)t=Ko(e[s],e[s+1]),M(t)<we?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,(i=n*n+r*r)>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));s=-1;for(;++s<=u;)i=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(e))}});function qo(e){return e.length>1?e.join("L"):e+"Z"}function Yo(e){return e.join("L")+"Z"}function $o(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ho(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Wo(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return qo(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],u=2),t.length>1){s=t[1],a=e[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,u++)a=e[u],s=t[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Vo(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,u=e.length;++s<u;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Xo(e){if(e.length<3)return qo(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",Go(Jo,o),",",Go(Jo,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Qo(u,o,s);return e.pop(),u.push("L",r),u.join("")}function Go(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}jo.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Zo=[0,2/3,1/3,0],Bo=[0,1/3,2/3,0],Jo=[0,1/6,2/3,1/6];function Qo(e,t,n){e.push("C",Go(Zo,t),",",Go(Zo,n),",",Go(Bo,t),",",Go(Bo,n),",",Go(Jo,t),",",Go(Jo,n))}function Ko(e,t){return(t[1]-e[1])/(t[0]-e[0])}function es(e){for(var t,n,r,i=-1,a=e.length;++i<a;)n=(t=e[i])[0],r=t[1]-Ce,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ts(e){var t=ri,n=ri,r=0,i=ii,a=Jn,o=qo,s=o.key,u=o,l="L",c=.7;function f(s){var f,h,d,p=[],g=[],m=[],v=-1,y=s.length,_=xt(t),x=xt(r),b=t===n?function(){return h}:xt(n),M=r===i?function(){return d}:xt(i);function k(){p.push("M",o(e(m),c),l,u(e(g.reverse()),c),"Z")}for(;++v<y;)a.call(this,f=s[v],v)?(g.push([h=+_.call(this,f,v),d=+x.call(this,f,v)]),m.push([+b.call(this,f,v),+M.call(this,f,v)])):g.length&&(k(),g=[],m=[]);return g.length&&k(),p.length?p.join(""):null}return f.x=function(e){return arguments.length?(t=n=e,f):n},f.x0=function(e){return arguments.length?(t=e,f):t},f.x1=function(e){return arguments.length?(n=e,f):n},f.y=function(e){return arguments.length?(r=i=e,f):i},f.y0=function(e){return arguments.length?(r=e,f):r},f.y1=function(e){return arguments.length?(i=e,f):i},f.defined=function(e){return arguments.length?(a=e,f):a},f.interpolate=function(e){return arguments.length?(s="function"==typeof e?o=e:(o=jo.get(e)||qo).key,u=o.reverse||o,l=o.closed?"M":"L",f):s},f.tension=function(e){return arguments.length?(c=e,f):c},f}function ns(e){return e.radius}function rs(e){return[e.x,e.y]}function is(){return 64}function as(){return"circle"}function os(e){var t=Math.sqrt(e/Oe);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}a.svg.line.radial=function(){var e=Fo(es);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},$o.reverse=Ho,Ho.reverse=$o,a.svg.area=function(){return ts(D)},a.svg.area.radial=function(){var e=ts(es);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},a.svg.chord=function(){var e=$r,t=Hr,n=ns,r=Io,i=Do;function a(n,r){var i,a,l=o(this,e,n,r),c=o(this,t,n,r);return"M"+l.p0+s(l.r,l.p1,l.a1-l.a0)+(a=c,(i=l).a0==a.a0&&i.a1==a.a1?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z"}function o(e,t,a,o){var s=t.call(e,a,o),u=n.call(e,s,o),l=r.call(e,s,o)-Ce,c=i.call(e,s,o)-Ce;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Oe)+",1 "+t}function u(e,t,n,r){return"Q 0,0 "+r}return a.radius=function(e){return arguments.length?(n=xt(e),a):n},a.source=function(t){return arguments.length?(e=xt(t),a):e},a.target=function(e){return arguments.length?(t=xt(e),a):t},a.startAngle=function(e){return arguments.length?(r=xt(e),a):r},a.endAngle=function(e){return arguments.length?(i=xt(e),a):i},a},a.svg.diagonal=function(){var e=$r,t=Hr,n=rs;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(t){return arguments.length?(e=xt(t),r):e},r.target=function(e){return arguments.length?(t=xt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},a.svg.diagonal.radial=function(){var e=a.svg.diagonal(),t=rs,n=e.projection;return e.projection=function(e){return arguments.length?n((r=t=e,function(){var e=r.apply(this,arguments),t=e[0],n=e[1]-Ce;return[t*Math.cos(n),t*Math.sin(n)]})):t;var r},e},a.svg.symbol=function(){var e=as,t=is;function n(n,r){return(ss.get(e.call(this,n,r))||os)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=xt(t),n):e},n.size=function(e){return arguments.length?(t=xt(e),n):t},n};var ss=a.map({circle:os,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ls)),n=t*ls;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/us),n=t*us/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/us),n=t*us/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});a.svg.symbolTypes=ss.keys();var us=Math.sqrt(3),ls=Math.tan(30*Re);J.transition=function(e){for(var t,n,r=ds||++ms,i=_s(e),a=[],o=ps||{time:Date.now(),ease:ia,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&xs(n,c,i,r,o),t.push(n)}return hs(a,i,r)},J.interrupt=function(e){return this.each(null==e?cs:fs(_s(e)))};var cs=fs(_s());function fs(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function hs(e,t,n){return V(e,gs),e.namespace=t,e.id=n,e}var ds,ps,gs=[],ms=0;function vs(e,t,n,r){var i=e.id,a=e.namespace;return pe(e,"function"==typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function ys(e){return null==e&&(e=""),function(){this.textContent=e}}function _s(e){return null==e?"__transition__":"__transition_"+e+"__"}function xs(e,t,n,r,i){var a,o,s,u,l,c=e[n]||(e[n]={active:0,count:0}),f=c[r];function h(n){var i=c.active,h=c[i];h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[i],h.event&&h.event.interrupt.call(e,e.__data__,h.index));for(var p in c)if(+p<r){var g=c[p];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[p]}o.c=d,Tt(function(){return o.c&&d(n||1)&&(o.c=null,o.t=NaN),1},0,a),c.active=r,f.event&&f.event.start.call(e,e.__data__,t),l=[],f.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&l.push(r)}),u=f.ease,s=f.duration}function d(i){for(var a=i/s,o=u(a),h=l.length;h>0;)l[--h].call(e,o);if(a>=1)return f.event&&f.event.end.call(e,e.__data__,t),--c.count?delete c[r]:delete e[n],1}f||(a=i.time,o=Tt(function(e){var t=f.delay;if(o.t=t+a,t<=e)return h(e-t);o.c=h},0,a),f=c[r]={tween:new S,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++c.count)}gs.call=J.call,gs.empty=J.empty,gs.node=J.node,gs.size=J.size,a.transition=function(e,t){return e&&e.transition?ds?e.transition(t):e:a.selection().transition(e)},a.transition.prototype=gs,gs.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=Q(e);for(var s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),xs(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return hs(o,a,i)},gs.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,u=[];e=K(e);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],h=-1,d=f.length;++h<d;)if(r=f[h]){a=r[s][o],n=e.call(r,r.__data__,h,l),u.push(t=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&xs(i,p,s,o,a),t.push(i)}return hs(u,s,o)},gs.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=de(e));for(var i=0,a=this.length;i<a;i++){r.push(t=[]);for(var o,s=0,u=(o=this[i]).length;s<u;s++)(n=o[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return hs(r,this.namespace,this.id)},gs.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):pe(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},gs.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?ga:Zi,r=a.ns.qualify(e);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}return vs(this,"attr."+e,t,r.local?function(e){return null==e?o:(e+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==e&&(t=n(i,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}:function(e){return null==e?i:(e+="",function(){var t,i=this.getAttribute(r);return i!==e&&(t=n(i,e),function(e){this.setAttribute(r,t(e))})})})},gs.attrTween=function(e,t){var n=a.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},gs.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){r<2&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}return vs(this,"style."+e,t,function(t){return null==t?i:(t+="",function(){var r,i=c(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=Zi(i,t),function(t){this.style.setProperty(e,r(t),n)})})})},gs.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(r,i){var a=t.call(this,r,i,c(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}})},gs.text=function(e){return vs(this,"text",e,ys)},gs.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},gs.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=a.ease.apply(a,arguments)),pe(this,function(r){r[n][t].ease=e}))},gs.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:pe(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},gs.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:pe(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},gs.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=ps,o=ds;try{ds=n,pe(this,function(t,i,a){ps=t[r][n],e.call(t,t.__data__,i,a)})}finally{ps=i,ds=o}}else pe(this,function(i){var o=i[r][n];(o.event||(o.event=a.dispatch("start","end","interrupt"))).on(e,t)});return this},gs.transition=function(){for(var e,t,n,r=this.id,i=++ms,a=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(e=[]);for(var l,c=0,f=(l=this[s]).length;c<f;c++)(t=l[c])&&xs(t,c,a,i,{time:(n=t[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return hs(o,a,i)},a.svg.axis=function(){var e,t=a.scale.linear(),n=bs,r=6,i=6,o=3,u=[10],l=null;function c(s){s.each(function(){var s,c=a.select(this),f=this.__chart__||t,h=this.__chart__=t.copy(),d=null==l?h.ticks?h.ticks.apply(h,u):h.domain():l,p=null==e?h.tickFormat?h.tickFormat.apply(h,u):D:e,g=c.selectAll(".tick").data(d,h),m=g.enter().insert("g",".domain").attr("class","tick").style("opacity",we),v=a.transition(g.exit()).style("opacity",we).remove(),y=a.transition(g.order()).style("opacity",1),_=Math.max(r,0)+o,x=lo(h),b=c.selectAll(".domain").data([0]),M=(b.enter().append("path").attr("class","domain"),a.transition(b));m.append("line"),m.append("text");var k,S,E,A,w=m.select("line"),T=y.select("line"),O=g.select("text").text(p),N=m.select("text"),L=y.select("text"),C="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=ks,k="x",E="y",S="x2",A="y2",O.attr("dy",C<0?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+x[0]+","+C*i+"V0H"+x[1]+"V"+C*i)):(s=Ss,k="y",E="x",S="y2",A="x2",O.attr("dy",".32em").style("text-anchor",C<0?"end":"start"),M.attr("d","M"+C*i+","+x[0]+"H0V"+x[1]+"H"+C*i)),w.attr(A,C*r),N.attr(E,C*_),T.attr(S,0).attr(A,C*r),L.attr(k,0).attr(E,C*_),h.rangeBand){var R=h,I=R.rangeBand()/2;f=h=function(e){return R(e)+I}}else f.rangeBand?f=h:v.call(s,h,f);m.call(s,f,h),y.call(s,h,h)})}return c.scale=function(e){return arguments.length?(t=e,c):t},c.orient=function(e){return arguments.length?(n=e in Ms?e+"":bs,c):n},c.ticks=function(){return arguments.length?(u=s(arguments),c):u},c.tickValues=function(e){return arguments.length?(l=e,c):l},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(e){var t=arguments.length;return t?(r=+e,i=+arguments[t-1],c):r},c.innerTickSize=function(e){return arguments.length?(r=+e,c):r},c.outerTickSize=function(e){return arguments.length?(i=+e,c):i},c.tickPadding=function(e){return arguments.length?(o=+e,c):o},c.tickSubdivide=function(){return arguments.length&&c},c};var bs="bottom",Ms={top:1,right:1,bottom:1,left:1};function ks(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Ss(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}a.svg.brush=function(){var e,t,n=H(h,"brushstart","brush","brushend"),r=null,i=null,o=[0,0],s=[0,0],u=!0,l=!0,f=As[0];function h(e){e.each(function(){var e=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(f,D);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Es[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var o,s=a.transition(e),u=a.transition(t);r&&(o=lo(r),u.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),i&&(o=lo(i),u.attr("y",o[0]).attr("height",o[1]-o[0]),g(s)),d(s)})}function d(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+o[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"})}function p(e){e.select(".extent").attr("x",o[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function g(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function m(){var f,m,v=this,y=a.select(a.event.target),_=n.of(v,arguments),x=a.select(v),b=y.datum(),M=!/^(n|s)$/.test(b)&&r,k=!/^(e|w)$/.test(b)&&i,S=y.classed("extent"),E=ke(v),A=a.mouse(v),w=a.select(c(v)).on("keydown.brush",function(){32==a.event.keyCode&&(S||(f=null,A[0]-=o[1],A[1]-=s[1],S=2),Y())}).on("keyup.brush",function(){32==a.event.keyCode&&2==S&&(A[0]+=o[1],A[1]+=s[1],S=0,Y())});if(a.event.changedTouches?w.on("touchmove.brush",N).on("touchend.brush",C):w.on("mousemove.brush",N).on("mouseup.brush",C),x.interrupt().selectAll("*").interrupt(),S)A[0]=o[0]-A[0],A[1]=s[0]-A[1];else if(b){var T=+/w$/.test(b),O=+/^n/.test(b);m=[o[1-T]-A[0],s[1-O]-A[1]],A[0]=o[T],A[1]=s[O]}else a.event.altKey&&(f=A.slice());function N(){var e=a.mouse(v),t=!1;m&&(e[0]+=m[0],e[1]+=m[1]),S||(a.event.altKey?(f||(f=[(o[0]+o[1])/2,(s[0]+s[1])/2]),A[0]=o[+(e[0]<f[0])],A[1]=s[+(e[1]<f[1])]):f=null),M&&L(e,r,0)&&(p(x),t=!0),k&&L(e,i,1)&&(g(x),t=!0),t&&(d(x),_({type:"brush",mode:S?"move":"resize"}))}function L(n,r,i){var a,c,h=lo(r),d=h[0],p=h[1],g=A[i],m=i?s:o,v=m[1]-m[0];if(S&&(d-=g,p-=v+g),a=(i?l:u)?Math.max(d,Math.min(p,n[i])):n[i],S?c=(a+=g)+v:(f&&(g=Math.max(d,Math.min(p,2*f[i]-a))),g<a?(c=a,a=g):c=g),m[0]!=a||m[1]!=c)return i?t=null:e=null,m[0]=a,m[1]=c,!0}function C(){N(),x.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),a.select("body").style("cursor",null),w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),_({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",y.style("cursor")),_({type:"brushstart"}),N()}return h.event=function(r){r.each(function(){var r=n.of(this,arguments),i={x:o,y:s,i:e,j:t},u=this.__chart__||i;this.__chart__=i,ds?a.select(this).transition().each("start.brush",function(){e=u.i,t=u.j,o=u.x,s=u.y,r({type:"brushstart"})}).tween("brush:brush",function(){var n=Bi(o,i.x),a=Bi(s,i.y);return e=t=null,function(e){o=i.x=n(e),s=i.y=a(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=i.i,t=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},h.x=function(e){return arguments.length?(f=As[!(r=e)<<1|!i],h):r},h.y=function(e){return arguments.length?(f=As[!r<<1|!(i=e)],h):i},h.clamp=function(e){return arguments.length?(r&&i?(u=!!e[0],l=!!e[1]):r?u=!!e:i&&(l=!!e),h):r&&i?[u,l]:r?u:i?l:null},h.extent=function(n){var a,u,l,c,f;return arguments.length?(r&&(a=n[0],u=n[1],i&&(a=a[0],u=u[0]),e=[a,u],r.invert&&(a=r(a),u=r(u)),u<a&&(f=a,a=u,u=f),a==o[0]&&u==o[1]||(o=[a,u])),i&&(l=n[0],c=n[1],r&&(l=l[1],c=c[1]),t=[l,c],i.invert&&(l=i(l),c=i(c)),c<l&&(f=l,l=c,c=f),l==s[0]&&c==s[1]||(s=[l,c])),h):(r&&(e?(a=e[0],u=e[1]):(a=o[0],u=o[1],r.invert&&(a=r.invert(a),u=r.invert(u)),u<a&&(f=a,a=u,u=f))),i&&(t?(l=t[0],c=t[1]):(l=s[0],c=s[1],i.invert&&(l=i.invert(l),c=i.invert(c)),c<l&&(f=l,l=c,c=f))),r&&i?[[a,l],[u,c]]:r?[a,u]:i&&[l,c])},h.clear=function(){return h.empty()||(o=[0,0],s=[0,0],e=t=null),h},h.empty=function(){return!!r&&o[0]==o[1]||!!i&&s[0]==s[1]},a.rebind(h,n,"on")};var Es={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},As=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],ws=Pt.format=hn.timeFormat,Ts=ws.utc,Os=Ts("%Y-%m-%dT%H:%M:%S.%LZ");function Ns(e){return e.toISOString()}function Ls(e,t,n){function r(t){return e(t)}function i(e,n){var r=(e[1]-e[0])/n,i=a.bisect(Rs,r);return i==Rs.length?[t.year,yo(e.map(function(e){return e/31536e6}),n)[2]]:i?t[r/Rs[i-1]<Rs[i]/r?i-1:i]:[Us,yo(e,n)[2]]}return r.invert=function(t){return Cs(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Cs)},r.nice=function(e,t){var n=r.domain(),a=uo(n),o=null==e?i(a,10):"number"==typeof e&&i(a,e);function s(n){return!isNaN(n)&&!e.range(n,Cs(+n+1),t).length}return o&&(e=o[0],t=o[1]),r.domain(fo(n,t>1?{floor:function(t){for(;s(t=e.floor(t));)t=Cs(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=Cs(+t+1);return t}}:e))},r.ticks=function(e,t){var n=uo(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],Cs(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Ls(e.copy(),t,n)},mo(r,e)}function Cs(e){return new Date(e)}ws.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ns:Os,Ns.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ns.toString=Os.toString,Pt.second=qt(function(e){return new zt(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Pt.seconds=Pt.second.range,Pt.seconds.utc=Pt.second.utc.range,Pt.minute=qt(function(e){return new zt(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Pt.minutes=Pt.minute.range,Pt.minutes.utc=Pt.minute.utc.range,Pt.hour=qt(function(e){var t=e.getTimezoneOffset()/60;return new zt(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Pt.hours=Pt.hour.range,Pt.hours.utc=Pt.hour.utc.range,Pt.month=qt(function(e){return(e=Pt.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Pt.months=Pt.month.range,Pt.months.utc=Pt.month.utc.range;var Rs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Is=[[Pt.second,1],[Pt.second,5],[Pt.second,15],[Pt.second,30],[Pt.minute,1],[Pt.minute,5],[Pt.minute,15],[Pt.minute,30],[Pt.hour,1],[Pt.hour,3],[Pt.hour,6],[Pt.hour,12],[Pt.day,1],[Pt.day,2],[Pt.week,1],[Pt.month,1],[Pt.month,3],[Pt.year,1]],Ds=ws.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Jn]]),Us={range:function(e,t,n){return a.range(Math.ceil(e/n)*n,+t,n).map(Cs)},floor:D,ceil:D};Is.year=Pt.year,Pt.scale=function(){return Ls(a.scale.linear(),Is,Ds)};var Ps=Is.map(function(e){return[e[0].utc,e[1]]}),zs=Ts.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Jn]]);function Fs(e){return JSON.parse(e.responseText)}function js(e){var t=u.createRange();return t.selectNode(u.body),t.createContextualFragment(e.responseText)}Ps.year=Pt.year.utc,Pt.scale.utc=function(){return Ls(a.scale.linear(),Ps,zs)},a.text=bt(function(e){return e.responseText}),a.json=function(e,t){return Mt(e,"application/json",Fs,t)},a.html=function(e,t){return Mt(e,"text/html",js,t)},a.xml=bt(function(e){return e.responseXML}),this.d3=a,void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)}()},ZyfV:function(e,t){function n(){this._el=null,this._bgcolor=null}var r=n.prototype;r.initialize=function(e,t,n,r){return this._el=e,this.resize(t,n,r)},r.element=function(){return this._el},r.scene=function(){return this._el&&this._el.firstChild},r.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},r.resize=function(e,t,n){return this._width=e,this._height=t,this._padding=n||{top:0,left:0,bottom:0,right:0},this},r.render=function(){return this},e.exports=n},aZ75:function(e,t,n){(function(e){"use strict";var t=new Date,n=new Date;function r(e,i,a,o){function s(t){return e(t=new Date(+t)),t}return s.floor=s,s.round=function(t){var n=new Date(+t),r=new Date(t-1);return e(n),e(r),i(r,1),t-n<r-t?n:r},s.ceil=function(t){return e(t=new Date(t-1)),i(t,1),t},s.offset=function(e,t){return i(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(t,n,r){var a=[];if(t=new Date(t-1),n=new Date(+n),r=null==r?1:Math.floor(r),!(t<n&&r>0))return a;for(i(t,1),e(t),t<n&&a.push(new Date(+t));i(t,r),e(t),t<n;)a.push(new Date(+t));return a},s.filter=function(t){return r(function(n){for(;e(n),!t(n);)n.setTime(n-1)},function(e,n){for(;--n>=0;)for(;i(e,1),!t(e););})},a&&(s.count=function(r,i){return t.setTime(+r),n.setTime(+i),e(t),e(n),Math.floor(a(t,n))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var i=r(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):i:null};var a=r(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()}),o=r(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),s=r(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),u=r(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1});function l(e){return r(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var c=l(0),f=l(1),h=l(2),d=l(3),p=l(4),g=l(5),m=l(6),v=r(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),y=r(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),_=r(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),x=r(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),b=r(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),M=r(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1});function k(e){return r(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var S=k(0),E=k(1),A=k(2),w=k(3),T=k(4),O=k(5),N=k(6),L=r(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),C=r(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),R=i.range,I=a.range,D=o.range,U=s.range,P=u.range,z=c.range,F=f.range,j=h.range,q=d.range,Y=p.range,$=g.range,H=m.range,W=c.range,V=v.range,X=y.range,G=i,Z=R,B=_.range,J=x.range,Q=b.range,K=M.range,ee=S.range,te=E.range,ne=A.range,re=w.range,ie=T.range,ae=O.range,oe=N.range,se=S.range,ue=L.range,le=C.range;e.version="0.1.1",e.milliseconds=R,e.seconds=I,e.minutes=D,e.hours=U,e.days=P,e.sundays=z,e.mondays=F,e.tuesdays=j,e.wednesdays=q,e.thursdays=Y,e.fridays=$,e.saturdays=H,e.weeks=W,e.months=V,e.years=X,e.utcMillisecond=G,e.utcMilliseconds=Z,e.utcSeconds=B,e.utcMinutes=J,e.utcHours=Q,e.utcDays=K,e.utcSundays=ee,e.utcMondays=te,e.utcTuesdays=ne,e.utcWednesdays=re,e.utcThursdays=ie,e.utcFridays=ae,e.utcSaturdays=oe,e.utcWeeks=se,e.utcMonths=ue,e.utcYears=le,e.millisecond=i,e.second=a,e.minute=o,e.hour=s,e.day=u,e.sunday=c,e.monday=f,e.tuesday=h,e.wednesday=d,e.thursday=p,e.friday=g,e.saturday=m,e.week=c,e.month=v,e.year=y,e.utcSecond=_,e.utcMinute=x,e.utcHour=b,e.utcDay=M,e.utcSunday=S,e.utcMonday=E,e.utcTuesday=A,e.utcWednesday=w,e.utcThursday=T,e.utcFriday=O,e.utcSaturday=N,e.utcWeek=S,e.utcMonth=L,e.utcYear=C,e.interval=r})(t)},acp7:function(e,t,n){var r=n("4JPs").prototype;function i(){this._collector=null}var a=i.prototype=Object.create(r);a.constructor=i,a.init=function(e){return r.init.call(this,e),this.batch(!0)},a.transform=function(e,t){return this.batchTransform(e,this._collector.data(),t)},a.batchTransform=function(){},e.exports=i},"bSC/":function(e,t,n){var r=n("/MHv");function i(e,t,n,i){for(var a=r.segments(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n),o=0;o<a.length;++o){var s=r.bezier(a[o]);e.bezierCurveTo.apply(e,s)}}e.exports=function(e,t,n,r){var a,o,s,u,l,c=null,f=0,h=0,d=0,p=0;null==n&&(n=0),null==r&&(r=0),e.beginPath();for(var g=0,m=t.length;g<m;++g){switch((a=t[g])[0]){case"l":f+=a[1],h+=a[2],e.lineTo(f+n,h+r);break;case"L":f=a[1],h=a[2],e.lineTo(f+n,h+r);break;case"h":f+=a[1],e.lineTo(f+n,h+r);break;case"H":f=a[1],e.lineTo(f+n,h+r);break;case"v":h+=a[1],e.lineTo(f+n,h+r);break;case"V":h=a[1],e.lineTo(f+n,h+r);break;case"m":f+=a[1],h+=a[2],e.moveTo(f+n,h+r);break;case"M":f=a[1],h=a[2],e.moveTo(f+n,h+r);break;case"c":o=f+a[5],s=h+a[6],d=f+a[3],p=h+a[4],e.bezierCurveTo(f+a[1]+n,h+a[2]+r,d+n,p+r,o+n,s+r),f=o,h=s;break;case"C":f=a[5],h=a[6],d=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,d+n,p+r,f+n,h+r);break;case"s":o=f+a[3],s=h+a[4],d=2*f-d,p=2*h-p,e.bezierCurveTo(d+n,p+r,f+a[1]+n,h+a[2]+r,o+n,s+r),d=f+a[1],p=h+a[2],f=o,h=s;break;case"S":o=a[3],s=a[4],d=2*f-d,p=2*h-p,e.bezierCurveTo(d+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"q":o=f+a[3],s=h+a[4],d=f+a[1],p=h+a[2],e.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"Q":o=a[3],s=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"t":o=f+a[1],s=h+a[2],null===c[0].match(/[QqTt]/)?(d=f,p=h):"t"===c[0]?(d=2*f-u,p=2*h-l):"q"===c[0]&&(d=2*f-d,p=2*h-p),u=d,l=p,e.quadraticCurveTo(d+n,p+r,o+n,s+r),h=s,d=(f=o)+a[1],p=h+a[2];break;case"T":o=a[1],s=a[2],d=2*f-d,p=2*h-p,e.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"a":i(e,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+h+r]),f+=a[6],h+=a[7];break;case"A":i(e,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],h=a[7];break;case"z":case"Z":e.closePath()}c=a}}},bZsP:function(e,t,n){(function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){var t=e.dateTime,a=e.date,s=e.time,u=e.periods,l=e.days,c=e.shortDays,f=e.months,re=e.shortMonths,ie=h(u),ae=d(u),oe=h(l),se=d(l),ue=h(c),le=d(c),ce=h(f),fe=d(f),he=h(re),de=d(re),pe={a:function(e){return c[e.getDay()]},A:function(e){return l[e.getDay()]},b:function(e){return re[e.getMonth()]},B:function(e){return f[e.getMonth()]},c:null,d:T,e:T,H:O,I:N,j:L,L:C,m:R,M:I,p:function(e){return u[+(e.getHours()>=12)]},S:D,U,w:P,W:z,x:null,X:null,y:F,Y:j,Z:q,"%":ne},ge={a:function(e){return c[e.getUTCDay()]},A:function(e){return l[e.getUTCDay()]},b:function(e){return re[e.getUTCMonth()]},B:function(e){return f[e.getUTCMonth()]},c:null,d:Y,e:Y,H:$,I:H,j:W,L:V,m:X,M:G,p:function(e){return u[+(e.getUTCHours()>=12)]},S:Z,U:B,w:J,W:Q,x:null,X:null,y:K,Y:ee,Z:te,"%":ne},me={a:function(e,t,n){var r=ue.exec(t.slice(n));return r?(e.w=le[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=oe.exec(t.slice(n));return r?(e.w=se[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=he.exec(t.slice(n));return r?(e.m=de[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=ce.exec(t.slice(n));return r?(e.m=fe[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return _e(e,t,n,r)},d:b,e:b,H:k,I:k,j:M,L:A,m:x,M:S,p:function(e,t,n){var r=ie.exec(t.slice(n));return r?(e.p=ae[r[0].toLowerCase()],n+r[0].length):-1},S:E,U:g,w:p,W:m,x:function(e,t,n){return _e(e,a,t,n)},X:function(e,t,n){return _e(e,s,t,n)},y,Y:v,Z:_,"%":w};function ve(e,t){return function(n){var r,i,a,s=[],u=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(s.push(e.slice(l,u)),null!=(i=o[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),s.push(r),l=u+1);return s.push(e.slice(l,u)),s.join("")}}function ye(e,t){return function(n){var a=i(1900);if(_e(a,e,n+="",0)!=n.length)return null;if("p"in a&&(a.H=a.H%12+12*a.p),"W"in a||"U"in a){"w"in a||(a.w="W"in a?1:0);var o="Z"in a?r(i(a.y)).getUTCDay():t(i(a.y)).getDay();a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7}return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,r(a)):t(a)}}function _e(e,t,n,r){for(var i,a,s=0,u=t.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(i=t.charAt(s++),!(a=me[i in o?t.charAt(s++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return pe.x=ve(a,pe),pe.X=ve(s,pe),pe.c=ve(t,pe),ge.x=ve(a,ge),ge.X=ve(s,ge),ge.c=ve(t,ge),{format:function(e){var t=ve(e+="",pe);return t.parse=ye(e,n),t.toString=function(){return e},t},utcFormat:function(e){var t=ve(e+="",ge);return t.parse=ye(e,r),t.toString=function(){return e},t}}}var o={"-":"",_:" ",0:"0"},s=/^\s*\d+/,u=/^%/,l=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function c(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function f(e){return e.replace(l,"\\$&")}function h(e){return new RegExp("^(?:"+e.map(f).join("|")+")","i")}function d(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function p(e,t,n){var r=s.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function g(e,t,n){var r=s.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function m(e,t,n){var r=s.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function v(e,t,n){var r=s.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function y(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function x(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function M(e,t,n){var r=s.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function k(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function S(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function E(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function A(e,t,n){var r=s.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function w(e,t,n){var r=u.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function T(e,t){return c(e.getDate(),t,2)}function O(e,t){return c(e.getHours(),t,2)}function N(e,t){return c(e.getHours()%12||12,t,2)}function L(e,n){return c(1+t.day.count(t.year(e),e),n,3)}function C(e,t){return c(e.getMilliseconds(),t,3)}function R(e,t){return c(e.getMonth()+1,t,2)}function I(e,t){return c(e.getMinutes(),t,2)}function D(e,t){return c(e.getSeconds(),t,2)}function U(e,n){return c(t.sunday.count(t.year(e),e),n,2)}function P(e){return e.getDay()}function z(e,n){return c(t.monday.count(t.year(e),e),n,2)}function F(e,t){return c(e.getFullYear()%100,t,2)}function j(e,t){return c(e.getFullYear()%1e4,t,4)}function q(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+c(t/60|0,"0",2)+c(t%60,"0",2)}function Y(e,t){return c(e.getUTCDate(),t,2)}function $(e,t){return c(e.getUTCHours(),t,2)}function H(e,t){return c(e.getUTCHours()%12||12,t,2)}function W(e,n){return c(1+t.utcDay.count(t.utcYear(e),e),n,3)}function V(e,t){return c(e.getUTCMilliseconds(),t,3)}function X(e,t){return c(e.getUTCMonth()+1,t,2)}function G(e,t){return c(e.getUTCMinutes(),t,2)}function Z(e,t){return c(e.getUTCSeconds(),t,2)}function B(e,n){return c(t.utcSunday.count(t.utcYear(e),e),n,2)}function J(e){return e.getUTCDay()}function Q(e,n){return c(t.utcMonday.count(t.utcYear(e),e),n,2)}function K(e,t){return c(e.getUTCFullYear()%100,t,2)}function ee(e,t){return c(e.getUTCFullYear()%1e4,t,4)}function te(){return"+0000"}function ne(){return"%"}var re=a({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ie=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),ae=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),oe=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),se=a({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ue=a({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),le=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),ce=a({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),fe=a({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),he=a({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),de=a({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),pe=a({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),ge=a({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),me=a({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),ve=a({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]}),ye=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),_e=a({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),xe=a({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),be=a({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),Me=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),ke=a({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),Se=a({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),Ee="%Y-%m-%dT%H:%M:%S.%LZ";function Ae(e){return e.toISOString()}Ae.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ae.toString=function(){return Ee};var we=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ae:re.utcFormat(Ee),Te=re.format,Oe=re.utcFormat;e.version="0.2.1",e.format=Te,e.utcFormat=Oe,e.locale=a,e.localeCaEs=ie,e.localeDeCh=ae,e.localeDeDe=oe,e.localeEnCa=se,e.localeEnGb=ue,e.localeEnUs=re,e.localeEsEs=le,e.localeFiFi=ce,e.localeFrCa=fe,e.localeFrFr=he,e.localeHeIl=de,e.localeHuHu=pe,e.localeItIt=ge,e.localeJaJp=me,e.localeKoKr=ve,e.localeMkMk=ye,e.localeNlNl=_e,e.localePlPl=xe,e.localePtBr=be,e.localeRuRu=Me,e.localeSvSe=ke,e.localeZhCn=Se,e.isoFormat=we})(t,n("aZ75"))},cihr:function(e,t,n){"use strict";var r;(r=t.AxisOrient||(t.AxisOrient={}))[r.TOP="top"]="TOP",r[r.RIGHT="right"]="RIGHT",r[r.LEFT="left"]="LEFT",r[r.BOTTOM="bottom"]="BOTTOM";t.AxisOrient;t.defaultAxisConfig={offset:void 0,grid:void 0,labels:!0,labelMaxLength:25,tickSize:void 0,characterWidth:6},t.defaultFacetAxisConfig={axisWidth:0,labels:!0,grid:!1,tickSize:0}},ct8e:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva").Tuple,o=n("J731"),s=n("4JPs");function u(e){return s.prototype.init.call(this,e),s.addParameters(this,u.Parameters),s.addParameters(this,{lon:{type:"field"},lat:{type:"field"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}u.Parameters={projection:{type:"value",default:"mercator"},center:{type:"array<value>"},translate:{type:"array<value>",default:n("MRce").center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}},u.d3Projection=function(){var e,t,n,a=this.param("projection"),o=u.Parameters;a!==this._mode&&(this._mode=a,this._projection=r.geo[a]()),e=this._projection;for(t in o)"projection"!==t&&e[t]&&(void 0===(n=this.param(t))||i.isArray(n)&&0===n.length||n!==e[t]()&&e[t](n));return e};var l=u.prototype=Object.create(s.prototype);l.constructor=u,l.transform=function(e){o.debug(e,["geo"]);var t=this._output,n=this.param("lon").accessor,r=this.param("lat").accessor,i=u.d3Projection.call(this);function s(e){var o=[n(e),r(e)],s=i(o)||[null,null];a.set(e,t.x,s[0]),a.set(e,t.y,s[1])}return e.add.forEach(s),this.reevaluate(e)&&(e.mod.forEach(s),e.rem.forEach(s)),e.fields[t.x]=1,e.fields[t.y]=1,e},e.exports=u,u.baseSchema={projection:{description:"The type of cartographic projection to use.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"mercator"},center:{description:"The center of the projection.",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},translate:{description:"The translation of the projection.",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},rotate:{description:"The rotation of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},scale:{description:"The scale of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},precision:{description:"The desired precision of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},clipAngle:{description:"The clip angle of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},clipExtent:{description:"The clip extent of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Geo transform",description:"Performs a cartographic projection. Given longitude and latitude values, sets corresponding x and y properties for a mark.",type:"object",properties:i.extend({type:{enum:["geo"]},lon:{description:"The input longitude values.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},lat:{description:"The input latitude values.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"}},additionalProperties:!1}},u.baseSchema),required:["type","lon","lat"],additionalProperties:!1}},cwb4:function(e,t,n){var r=n("zF6n");e.exports=function(e,t){var n=r.isObject(e)&&!r.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(n=r.accessor(t.property)(n)),n}},eJnU:function(e,t){var n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},r=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];e.exports=function(e){var t,i,a,o,s,u,l,c,f,h,d,p=[];for(c=0,h=(t=e.slice().replace(r[0],"###$1").split(r[1]).slice(1)).length;c<h;++c){for(a=(i=t[c]).slice(1).trim().replace(r[2],"$1###$2").split(r[3]),o=[u=i.charAt(0)],f=0,d=a.length;f<d;++f)(s=+a[f])===s&&o.push(s);if(l=n[u.toLowerCase()],o.length-1>l)for(f=1,d=o.length;f<d;f+=l)p.push([u].concat(o.slice(f,f+l)));else p.push(o)}return p}},eVGq:function(e,t,n){var r=n("gWW/"),i=n("eJnU"),a=n("bSC/"),o=n("zhsD").path.line;function s(e,t){var n=t[0],r=n.pathCache||(n.pathCache=i(o(t)));a(e,r)}var u=r.testPath(s,!1);e.exports={draw:r.drawOne(s),pick:function(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),u(e,o,n,r)?o[0]:null)},nested:!0}},ec8D:function(e,t,n){var r=n("Hqva").Tuple,i=n("J731"),a=n("4JPs");function o(e){return a.prototype.init.call(this,e),a.addParameters(this,{on:{type:"data"},onKey:{type:"field",default:null},as:{type:"array<value>"},keys:{type:"array<field>",default:["data"]},default:{type:"value"}}),this.mutates(!0)}var s=o.prototype=Object.create(a.prototype);s.constructor=o,s.transform=function(e,t){i.debug(e,["lookup"]);var n,a,o=this.param("on"),s=o.source.last(),u=o.source.values(),l=this.param("onKey"),c=l.field,f=this.param("keys"),h=f.accessor,d=this.param("as"),p=this.param("default"),g=this._lut;if(null==g||this._on!==c||c&&s.fields[c]||s.add.length||s.rem.length){if(c)for(l=l.accessor,g={},n=0;n<u.length;++n)g[l(a=u[n])]=a;else g=u;this._lut=g,this._on=c,t=!0}function m(e){for(var t=0;t<h.length;++t){var n=g[h[t](e)]||p;r.set(e,d[t],n)}}return e.add.forEach(m),(f.field.some(function(t){return e.fields[t]})||t)&&(e.mod.forEach(m),e.rem.forEach(m)),d.forEach(function(t){e.fields[t]=1}),e},e.exports=o,o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Lookup transform",description:"Extends a data set by looking up values in another data set.",type:"object",properties:{type:{enum:["lookup"]},on:{type:"string",description:"The name of the secondary data set on which to lookup values."},onKey:{description:"The key field to lookup, or null for index-based lookup.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},keys:{description:"One or more fields in the primary data set to match against the secondary data set.",type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},as:{type:"array",description:"The names of the fields in which to store looked-up values.",items:{type:"string"}},default:{description:"The default value to use if a lookup match fails."}},required:["type","on","as","keys"],additionalProperties:!1}},ei6W:function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){return s.prototype.init.call(this,e),o.addParameters(this,{groupby:{type:"array<field>"}}),this._output={children:"children",parent:"parent"},this.router(!0).produces(!0)}var l=u.prototype=Object.create(s.prototype);l.constructor=u,l.batchTransform=function(e,t){a.debug(e,["treeifying"]);var n,o,s=this.param("groupby").field,u=this._output.children,l=this._output.parent,c=[{name:"*",ops:["values"],as:[u]}],f=s.map(function(e){return r.groupby(e).summarize(c)}),h=this._internal||[],d=[];var p=i.ingest({});for(p[l]=null,d.push(p),function e(t,n,r){var a=f[t].execute(r);n[u]=a,a.forEach(function(r){r[l]=n,d.push(i.ingest(r)),t+1<s.length?e(t+1,r,r[u]):r[u].forEach(function(e){e[l]=r})})}(0,p,t),n=0,o=d.length;n<o;++n)e.add.push(d[n]);for(n=0,o=h.length;n<o;++n)e.rem.push(h[n]);return this._internal=d,e},e.exports=u,u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Treeify transform",type:"object",properties:{type:{enum:["treeify"]},groupby:{description:"An ordered list of fields by which to group tuples into a tree.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{children:{type:"string",default:"children"},parent:{type:"string",default:"parent"}},additionalProperties:!1}},additionalProperties:!1,required:["type","groupby"]}},ekYZ:function(e,t,n){var r=n("D3vM").ALL;function i(e,t){t.stamp=e?e.stamp:0,t.sort=e?e.sort:null,t.facet=e?e.facet:null,t.trans=e?e.trans:null,t.dirty=e?e.dirty:[],t.request=e?e.request:null;for(var n,i=0,a=r.length;i<a;++i)t[n=r[i]]=e?e[n]:{}}e.exports={create:function(e,t){var n={};return i(e,n),n.add=[],n.mod=[],n.rem=[],n.reflow=t,n},copy:i}},evf9:function(e,t,n){var r=n("gWW/"),i=Math.PI/2;function a(e,t){var n=t.x||0,r=t.y||0,a=t.innerRadius||0,o=t.outerRadius||0,s=(t.startAngle||0)-i,u=(t.endAngle||0)-i;e.beginPath(),0===a?e.moveTo(n,r):e.arc(n,r,a,s,u,0),e.arc(n,r,o,u,s,1),e.closePath()}e.exports={draw:r.drawAll(a),pick:r.pickPath(a)}},f2i1:function(e,t,n){"use strict";var r,i=n("P/aK"),a=n("QSMf"),o=n("j8cM"),s=n("ZAUf");(r=t.StackOffset||(t.StackOffset={}))[r.ZERO="zero"]="ZERO",r[r.CENTER="center"]="CENTER",r[r.NORMALIZE="normalize"]="NORMALIZE",r[r.NONE="none"]="NONE";var u=t.StackOffset;t.stack=function(e,t,n){var r=n&&n.mark?n.mark.stacked:void 0;if(s.contains([u.NONE,null,!1],r))return null;if(!s.contains([o.BAR,o.AREA],e))return null;if(!a.isAggregate(t))return null;var l=i.STACK_GROUP_CHANNELS.reduce(function(e,n){return a.has(t,n)&&!t[n].aggregate&&e.push(n),e},[]);if(0===l.length)return null;var c=a.has(t,i.X),f=a.has(t,i.Y),h=c&&!!t.x.aggregate;return h!==(f&&!!t.y.aggregate)?{groupbyChannel:h?f?i.Y:null:c?i.X:null,fieldChannel:h?i.X:i.Y,stackByChannels:l,offset:r||u.ZERO}:null}},fRRI:function(e,t,n){var r=n("zicW"),i=n("Hqva").Dependencies,a=/array/i,o=/data/i,s=/field/i,u=/expr/i,l=/value/i;function c(e,t,n){this._name=e,this._type=t,this._transform=n,this._value=[],this._accessors=[],this._resolution=!1,this._signals=[]}var f=c.prototype;function h(){var e=a.test(this._type),t=o.test(this._type),n=s.test(this._type),i=e?this._value:this._value[0],u=e?this._accessors:this._accessors[0];return!r.isValid(u)&&l.test(this._type)?i:t?{name:i,source:u}:n?{field:i,accessor:u}:i}f.get=function(){var e,t,n,i,a,u=this._transform._graph,l=o.test(this._type),c=s.test(this._type);if(!this._resolution)return h.call(this);if(l)return this._accessors=this._value.map(function(e){return u.data(e)}),h.call(this);for(e=0,t=this._signals.length;e<t;++e)i=(n=this._signals[e]).index,a=n.value(u),c&&(this._accessors[i]=this._value[i]!=a?r.accessor(a):this._accessors[i]),this._value[i]=a;return h.call(this)},f.set=function(e){var t=this,n=t._transform._graph,a=u.test(this._type),l=o.test(this._type),c=s.test(this._type);return t._signals=[],this._value=r.array(e).map(function(e,o){var s;return r.isString(e)?a?(s=n.expr(e),t._transform.dependency(i.FIELDS,s.fields),t._transform.dependency(i.SIGNALS,s.globals),t._transform.dependency(i.DATA,s.dataSources),s.fn):(c?(t._accessors[o]=r.accessor(e),t._transform.dependency(i.FIELDS,r.field(e))):l&&(t._resolution=!0,t._transform.dependency(i.DATA,e)),e):void 0!==e.value?e.value:void 0!==e.field?(t._accessors[o]=r.accessor(e.field),t._transform.dependency(i.FIELDS,r.field(e.field)),e.field):void 0!==e.signal?(t._resolution=!0,t._transform.dependency(i.SIGNALS,r.field(e.signal)[0]),t._signals.push({index:o,value:function(t){return t.signalRef(e.signal)}}),e.signal):void 0!==e.expr?(t._resolution=!0,s=n.expr(e.expr),t._transform.dependency(i.SIGNALS,s.globals),t._signals.push({index:o,value:function(){return s.fn()}}),e.expr):e}),t._transform},e.exports=c,c.schema={type:"object",oneOf:[{properties:{field:{type:"string"}},required:["field"]},{properties:{value:{type:"string"}},required:["value"]}]}},fxxq:function(e,t,n){var r=n("Za4h");function i(e){return null==e?null:r.rgb(e)+""}e.exports=i,i.schema={defs:{background:{type:"string"}}}},"gWW/":function(e,t){function n(e,t,n,r){if(!e(t,r)){var i=null==n.opacity?1:n.opacity;0!==i&&(n.fill&&o(t,n,i)&&t.fill(),n.stroke&&s(t,n,i)&&t.stroke())}}var r=function(){return!0};function i(e){return e||(e=r),function(t,n,r,i,a,o){if(!n.items.length)return null;var s,u,l;for(null!=t.pixelratio&&1!==t.pixelratio&&(r*=t.pixelratio,i*=t.pixelratio),l=n.items.length;--l>=0;)if((!(u=(s=n.items[l]).bounds)||u.contains(a,o))&&u&&e(t,s,r,i,a,o))return s;return null}}function a(e,t){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function o(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=u(e,t,t.fill),!0)}function s(e,t,n){var r,i=null!=(i=t.strokeWidth)?i:1;return!(i<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=u(e,t,t.stroke),e.lineWidth=i,e.lineCap=null!=(r=t.strokeCap)?r:"butt",e.vgLineDash(t.strokeDash||null),e.vgLineDashOffset(t.strokeDashOffset||0),!0))}function u(e,t,n){return n.id?l(e,n,t.bounds):n}function l(e,t,n){var r,i,a=n.width(),o=n.height(),s=n.x1+t.x1*a,u=n.y1+t.y1*o,l=n.x1+t.x2*a,c=n.y1+t.y2*o,f=e.createLinearGradient(s,u,l,c),h=t.stops;for(r=0,i=h.length;r<i;++r)f.addColorStop(h[r].offset,h[r].color);return f}e.exports={drawOne:function(e){return function(t,r,i){r.items.length&&(i&&!i.intersects(r.bounds)||n(e,t,r.items[0],r.items))}},drawAll:function(e){return function(t,r,i){!function(e,t,r,i){var a,o,s;for(a=0,o=r.items.length;a<o;++a)s=r.items[a],i&&!i.intersects(s.bounds)||n(e,t,s,s)}(e,t,r,i)}},pick:i,pickPath:function(e){return i(a(e))},testPath:a,stroke:s,fill:o,color:u,gradient:l}},ggRp:function(e,t,n){var r=n("zF6n"),i="__types__",a={boolean:r.boolean,integer:r.number,number:r.number,date:r.date,string:function(e){return null==e||""===e?null:e+""}},o={boolean:function(e){return"true"===e||"false"===e||r.isBoolean(e)},integer:function(e){return o.number(e)&&(e=+e)==~~e},number:function(e){return!isNaN(+e)&&!r.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};function s(e){return r.keys(e)}function u(e){return"["+e+"]"}function l(e,t){var n,a,o;if(e=r.array(e),t=r.$(t),e[i]&&(n=t(e[i]),r.isString(n)))return n;for(a=0,o=e.length;!r.isValid(n)&&a<o;++a)n=t?t(e[a]):e[a];return r.isDate(n)?"date":r.isNumber(n)?"number":r.isBoolean(n)?"boolean":r.isString(n)?"string":null}function c(e,t,n){var i,a,s;e=r.array(e),t=r.$(t);var u=["boolean","integer","number","date"];for(i=0;i<e.length;++i){for(s=t?t(e[i]):e[i],a=0;a<u.length;++a)n&&n.test(s)||!r.isValid(s)||o[u[a]](s)||(u.splice(a,1),a-=1);if(0===u.length)return"string"}return u[0]}l.annotation=function(e,t){if(!t)return e&&e[i]||null;e[i]=t},l.all=function(e,t){if(e.length){var n=t?r.identity:(t=s(e[0]),u);return t.reduce(function(t,r){return t[r]=l(e,n(r)),t},{})}},l.infer=c,l.inferAll=function(e,t,n){var i=t?r.identity:(t=s(e[0]),u);return t.reduce(function(t,r){return t[r]=c(e,i(r),n),t},{})},l.parsers=a,e.exports=l},gjoU:function(e,t,n){var r=n("zF6n"),i=n("5AQc"),a=n("YGNx");e.exports=r.keys(a.formats).reduce(function(e,t){return e[t]=function(e,n,o){r.isString(e)&&(e={url:e}),2===arguments.length&&r.isFunction(n)&&(o=n,n=void 0),(n=r.extend({parse:"auto"},n)).type=t;var s=i(e,o?function(e,t){if(e)o(e,null);else try{t=a(t,n),o(null,t)}catch(e){o(e,null)}}:void 0);if(!o)return a(s,n)},e},{})},gtuQ:function(e,t){var n=0;function r(e){return(e=e===Object(e)?e:{data:e})._id=++n,e._prev&&(e._prev=null),e}function i(e,t){t=t||{};for(var n=0,r=e.length;n<r;++n)t[e[n]._id]=1;return t}function a(e,t){t=t||{};for(var n in e)"_prev"!==n&&"_id"!==n&&(t[n]=e[n]);return t}e.exports={ingest:r,idMap:i,derive:function(e){return r(a(e))},rederive:function(e,t){return a(e,t)},set:function(e,t,n){return e[t]===n?0:(e[t]=n,1)},prev:function(e){return e._prev||e},prev_init:function(e){e._prev||(e._prev={_id:e._id})},prev_update:function(e){var t,n,r=e._prev;if(r)for(t in e)"_prev"!==t&&"_id"!==t&&(r[t]=(n=e[t])instanceof Object&&n._prev?n._prev:n)},reset:function(){n=0},idFilter:function(e){for(var t={},n=arguments.length;--n>0;)i(arguments[n],t);return e.filter(function(e){return!t[e._id]})}}},"h/tW":function(e,t,n){"use strict";var r;(r=t.AggregateOp||(t.AggregateOp={}))[r.VALUES="values"]="VALUES",r[r.COUNT="count"]="COUNT",r[r.VALID="valid"]="VALID",r[r.MISSING="missing"]="MISSING",r[r.DISTINCT="distinct"]="DISTINCT",r[r.SUM="sum"]="SUM",r[r.MEAN="mean"]="MEAN",r[r.AVERAGE="average"]="AVERAGE",r[r.VARIANCE="variance"]="VARIANCE",r[r.VARIANCEP="variancep"]="VARIANCEP",r[r.STDEV="stdev"]="STDEV",r[r.STDEVP="stdevp"]="STDEVP",r[r.MEDIAN="median"]="MEDIAN",r[r.Q1="q1"]="Q1",r[r.Q3="q3"]="Q3",r[r.MODESKEW="modeskew"]="MODESKEW",r[r.MIN="min"]="MIN",r[r.MAX="max"]="MAX",r[r.ARGMIN="argmin"]="ARGMIN",r[r.ARGMAX="argmax"]="ARGMAX";var i=t.AggregateOp;t.AGGREGATE_OPS=[i.VALUES,i.COUNT,i.VALID,i.MISSING,i.DISTINCT,i.SUM,i.MEAN,i.AVERAGE,i.VARIANCE,i.VARIANCEP,i.STDEV,i.STDEVP,i.MEDIAN,i.Q1,i.Q3,i.MODESKEW,i.MIN,i.MAX,i.ARGMIN,i.ARGMAX],t.SUM_OPS=[i.COUNT,i.SUM,i.DISTINCT],t.SHARED_DOMAIN_OPS=[i.MEAN,i.AVERAGE,i.STDEV,i.STDEVP,i.MEDIAN,i.Q1,i.Q3,i.MIN,i.MAX]},h36N:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("J731"),o=n("Hqva").Tuple,s=["signals","scales","data","fields"];function u(e,t,n){var u,l,d,p,g,m,v=e.config(),y="",_=i.keys(n),x=[],b={},M={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:!1};function k(e){if(null!=p[e]){var t,n,r=i.array(p[e]);for(t=0,n=r.length;t<n;++t)M[e][r[t]]=1}}function S(e){var t=(e.parent?"parent_":"group_")+e.level;M._nRefs[t]=e}for(y+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\ntmpl.datum  = item.datum;\ntmpl.group  = group;\ntmpl.parent = group.datum;\n",function(e,t,n){var r,i,a=n.shape,o=0;if(a&&(r=a.value)){for(t.shape&&t.shape[r]&&(r=t.shape[r]),a="";null!==(i=c.exec(r));)a+=r.substring(o,i.index),a+=e.expr(i[1]).fn(),o=c.lastIndex;n.shape.value=a+r.substring(o)}}(e,v,n),u=0,l=_.length;u<l;++u)p=n[d=_[u]],y+=u>0?"\n  ":"  ",p.rule?y+="\n  "+(p=f(e,d,p.rule,x)).code:i.isArray(p)?y+="\n  "+(p=f(e,d,p,x)).code:(p=h(v,d,p),y+="d += set(o, "+i.str(d)+", "+p.val+");"),b[d]=!0,s.forEach(k),M.reflow=M.reflow||p.reflow,p.nested.length&&p.nested.forEach(S);i.keys(M._nRefs).forEach(function(e){M.nested.push(M._nRefs[e])}),M.nested.sort(function(e,t){return(e=e.level)<(t=t.level)?-1:e>t?1:e>=t?0:NaN}),b.x2&&(b.x?(y+="\n  if (o.x > o.x2) { \n    t = o.x;\n    d += set(o, 'x', o.x2);\n    d += set(o, 'x2', t); \n  };",y+="\n  d += set(o, 'width', (o.x2 - o.x));"):b.width?y+="\n  d += set(o, 'x', (o.x2 - o.width));":y+="\n  d += set(o, 'x', o.x2);"),b.xc&&(b.width?y+="\n  d += set(o, 'x', (o.xc - o.width/2));":y+="\n  d += set(o, 'x', o.xc);"),b.y2&&(b.y?(y+="\n  if (o.y > o.y2) { \n    t = o.y;\n    d += set(o, 'y', o.y2);\n    d += set(o, 'y2', t);\n  };",y+="\n  d += set(o, 'height', (o.y2 - o.y));"):b.height?y+="\n  d += set(o, 'y', (o.y2 - o.height));":y+="\n  d += set(o, 'y', o.y2);"),b.yc&&(b.height?y+="\n  d += set(o, 'y', (o.yc - o.height/2));":y+="\n  d += set(o, 'y', o.yc);"),g=t,((m=b).path||("area"===g||"line"===g)&&(m.x||m.x2||m.width||m.y||m.y2||m.height||m.tension||m.interpolate))&&(y+="\n  d += (item.touch(), 1);"),y+="\n  if (trans) trans.interpolate(item, o);",y+="\n  return d > 0;";try{var E=Function("item","group","trans","db","signals","predicates",y);return E.tpl=o,E.exprs=x,E.util=i,E.d3=r,i.extend(E,i.template.context),{encode:E,signals:i.keys(M.signals),scales:i.keys(M.scales),data:i.keys(M.data),fields:i.keys(M.fields),nested:M.nested,reflow:M.reflow}}catch(e){a.error(e),a.log(y)}}function l(e,t){return i.isObject(e)||(e={reflow:!1,nested:[]},s.forEach(function(t){e[t]=[]})),i.isObject(t)&&(e.reflow=e.reflow||t.reflow,e.nested.push.apply(e.nested,t.nested),s.forEach(function(n){e[n].push.apply(e[n],t[n])})),e}var c=/{{(.*?)}}/g;function f(e,t,n,r){var a=e.config(),o=l(),s=[],u="";return(n||[]).forEach(function(c,f){var d=h(a,t,c);if(l(o,d),c.test){var p=e.expr(c.test);o.signals.push.apply(o.signals,p.globals),o.data.push.apply(o.data,p.dataSources),u+="if (exprs["+r.length+"](item.datum, item.mark.group.datum, null)) {\n    d += set(o, "+i.str(t)+", "+d.val+");",u+=n[f+1]?"\n  } else ":"  }",r.push(p.fn)}else{var g=c.predicate,m=g&&(g.name||g),v=e.predicate(m),y="predicates["+i.str(m)+"]",_=[],x=t+"_arg"+f;i.isObject(g)&&i.keys(g).forEach(function(e){if("name"!==e){var t=h(a,f,g[e],!0);_.push(i.str(e)+": "+t.val),l(o,t)}}),m?(o.signals.push.apply(o.signals,v.signals),o.data.push.apply(o.data,v.data),s.push(x+" = {\n    "+_.join(",\n    ")+"\n  }"),u+="if ("+y+".call("+y+","+x+", db, signals, predicates)) {\n    d += set(o, "+i.str(t)+", "+d.val+");",u+=n[f+1]?"\n  } else ":"  }"):u+="{\n    d += set(o, "+i.str(t)+", "+d.val+");\n  }\n"}}),s.length&&(u="var "+s.join(",\n      ")+";\n  "+u),o.code=u,o}function h(e,t,n,r){if(null==n)return null;if("fill"===t||"stroke"===t){if(n.c)return d(e,"hcl",n.h,n.c,n.l);if(n.h||n.s)return d(e,"hsl",n.h,n.s,n.l);if(n.l||n.a)return d(e,"lab",n.l,n.a,n.b);if(n.r||n.g||n.b)return d(e,"rgb",n.r,n.g,n.b)}var a=null,o=null,s=l(),u=null,c=null,f=null,h={};return void 0!==n.template&&(a=i.template.source(n.template,"tmpl",h),i.keys(h).forEach(function(e){var t=i.field(e),n=t.shift();"parent"===n||"group"===n?s.nested.push({parent:"parent"===n,group:"group"===n,level:1}):"datum"===n?s.fields.push(t[0]):s.signals.push(n)})),void 0!==n.value&&(a=i.str(n.value)),void 0!==n.signal&&(a="signals["+(u=i.field(n.signal)).map(i.str).join("][")+"]",s.signals.push(u.shift())),void 0!==n.field&&(n.field=i.isString(n.field)?{datum:n.field}:n.field,a=(c=p(n.field)).val,l(s,c)),void 0!==n.scale&&(o=(f=function(e){var t=null,n=null,r=l();t=i.isString(e)?i.str(e):e.name?i.isString(e.name)?i.str(e.name):(n=p(e.name)).val:(n=p(e)).val;t="(item.mark._scaleRefs["+t+"] = 1, group.scale("+t+"))",e.invert&&(t+=".invert");n&&n.nested.forEach(function(e){e.scale=!0});return n?(n.val=t,n):(r.val=t,r)}(n.scale)).val,l(s,f),s.scales.push(n.scale.name||n.scale),null!==a||n.band||n.mult||n.offset||!r?a=o+(n.band?".rangeBand()":"("+(null!==a?a:"item.datum.data")+")"):r&&(a=o)),a="("+(n.mult?i.number(n.mult)+" * ":"")+a+")"+(n.offset?" + "+i.number(n.offset):""),s.val=a,s}function d(e,t,n,r,a){var o=n?h(e,"",n):e.color[t][0],s=r?h(e,"",r):e.color[t][1],u=a?h(e,"",a):e.color[t][2],c=l();[o,s,u].forEach(function(e){i.isArray||l(c,e)});var f="(this.d3."+t+"("+[o.val,s.val,u.val].join(",")+') + "")';return c.val=f,c}function p(e){if(i.isString(e))return{val:i.field(e).map(i.str).join("][")};var t=e.level||1,n=(e.group||e.parent)&&t?Array(t).join("group.mark."):"",r=p(e.datum||e.group||e.parent||e.signal),a=r.val,o=l(null,r);return e.datum?(a="item.datum["+a+"]",o.fields.push(e.datum)):e.group?(a=n+"group["+a+"]",o.nested.push({level:t,group:!0})):e.parent?(a=n+"group.datum["+a+"]",o.nested.push({level:t,parent:!0})):e.signal&&(a="signals["+a+"]",o.signals.push(i.field(e.signal)[0]),o.reflow=!0),o.val=a,o}function g(e){var t={type:"object",allOf:[{$ref:"#/refs/"+("number"===(e=i.isArray(e)?{enum:e}:{type:e}).type&&e.type||"string")+"Modifiers"},{oneOf:[{$ref:"#/refs/signal",required:["signal"]},{properties:{value:e},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{band:{type:"boolean"}},required:["band"]}]}]};return"string"===e.type&&t.allOf[1].oneOf.push({properties:{template:{type:"string"}},required:["template"]}),{oneOf:[{type:"object",properties:{rule:{type:"array",items:{allOf:[{$ref:"#/defs/rule"},t]}}},additionalProperties:!1,required:["rule"]},{type:"array",items:{allOf:[{$ref:"#/defs/rule"},t]}},t]}}e.exports=u,u.schema={refs:{field:{title:"FieldRef",oneOf:[{type:"string"},{oneOf:[{$ref:"#/refs/signal"},{type:"object",properties:{datum:{$ref:"#/refs/field"}},required:["datum"],additionalProperties:!1},{type:"object",properties:{group:{$ref:"#/refs/field"},level:{type:"number"}},required:["group"],additionalProperties:!1},{type:"object",properties:{parent:{$ref:"#/refs/field"},level:{type:"number"}},required:["parent"],additionalProperties:!1}]}]},scale:{title:"ScaleRef",oneOf:[{$ref:"#/refs/field"},{type:"object",properties:{name:{$ref:"#/refs/field"},invert:{type:"boolean",default:!1}},required:["name"]}]},stringModifiers:{properties:{scale:{$ref:"#/refs/scale"}}},numberModifiers:{properties:{mult:{type:"number"},offset:{type:"number"},scale:{$ref:"#/refs/scale"}}},value:g({}),numberValue:g("number"),stringValue:g("string"),booleanValue:g("boolean"),arrayValue:g("array"),colorValue:{title:"ColorRef",oneOf:[{$ref:"#/refs/stringValue"},{type:"object",properties:{r:{$ref:"#/refs/numberValue"},g:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["r","g","b"]},{type:"object",properties:{h:{$ref:"#/refs/numberValue"},s:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","s","l"]},{type:"object",properties:{l:{$ref:"#/refs/numberValue"},a:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["l","a","b"]},{type:"object",properties:{h:{$ref:"#/refs/numberValue"},c:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","c","l"]}]}},defs:{rule:{anyOf:[{type:"object",properties:{predicate:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"}},required:["name"]}]}}},{type:"object",properties:{test:{type:"string"}}}]},propset:{title:"Mark property set",type:"object",properties:{x:{$ref:"#/refs/numberValue"},x2:{$ref:"#/refs/numberValue"},xc:{$ref:"#/refs/numberValue"},width:{$ref:"#/refs/numberValue"},y:{$ref:"#/refs/numberValue"},y2:{$ref:"#/refs/numberValue"},yc:{$ref:"#/refs/numberValue"},height:{$ref:"#/refs/numberValue"},opacity:{$ref:"#/refs/numberValue"},fill:{$ref:"#/refs/colorValue"},fillOpacity:{$ref:"#/refs/numberValue"},stroke:{$ref:"#/refs/colorValue"},strokeWidth:{$ref:"#/refs/numberValue"},strokeOpacity:{$ref:"#/refs/numberValue"},strokeDash:{$ref:"#/refs/arrayValue"},strokeDashOffset:{$ref:"#/refs/numberValue"},cursor:{$ref:"#/refs/stringValue"},clip:{$ref:"#/refs/booleanValue"},size:{$ref:"#/refs/numberValue"},shape:{anyOf:[g(["circle","square","cross","diamond","triangle-up","triangle-down"]),{$ref:"#/refs/stringValue"}]},path:{$ref:"#/refs/stringValue"},innerRadius:{$ref:"#/refs/numberValue"},outerRadius:{$ref:"#/refs/numberValue"},startAngle:{$ref:"#/refs/numberValue"},endAngle:{$ref:"#/refs/numberValue"},interpolate:g(["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"]),tension:{$ref:"#/refs/numberValue"},orient:g(["horizontal","vertical"]),url:{$ref:"#/refs/stringValue"},align:g(["left","right","center"]),baseline:g(["top","middle","bottom","alphabetic"]),text:{$ref:"#/refs/stringValue"},dx:{$ref:"#/refs/numberValue"},dy:{$ref:"#/refs/numberValue"},radius:{$ref:"#/refs/numberValue"},theta:{$ref:"#/refs/numberValue"},angle:{$ref:"#/refs/numberValue"},font:{$ref:"#/refs/stringValue"},fontSize:{$ref:"#/refs/numberValue"},fontWeight:{$ref:"#/refs/stringValue"},fontStyle:{$ref:"#/refs/stringValue"}},additionalProperties:!1}}}},hBex:function(e,t,n){"use strict";var r=n("o+e1"),i=n("WJ2w"),a=n("ZAUf");!function(e){function t(e){var t=(e.transform().calculate||[]).reduce(function(e,t){return e[t.field]=!0,e},{}),n={};return e.forEach(function(e){if(e.type===i.TEMPORAL)n[e.field]="date";else if(e.type===i.QUANTITATIVE){if(r.isCount(e)||t[e.field])return;n[e.field]="number"}}),n}e.parseUnit=t,e.parseFacet=function(e){var n=t(e),r=e.child().component.data;return!r.source&&r.formatParse&&(a.extend(n,r.formatParse),delete r.formatParse),n},e.parseLayer=function(e){var n=t(e);return e.children().forEach(function(t){var r=t.component.data;e.compatibleSource(t)&&!a.differ(r.formatParse,n)&&(a.extend(n,r.formatParse),delete r.formatParse)}),n}}(t.formatParse||(t.formatParse={}))},hv1v:function(e,t,n){var r=n("zicW"),i="time",a="utc",o="string",s="ordinal",u="number";e.exports={getTickFormat:function(e,t,n,l){return function(e,t,n,o){var s,l=r.format,c="log"===e.type;switch(n){case u:return s=e.domain(),c?function(e,t,n,r){if(null==n)return r;var i,a=e.base(),o=Math.min(a,e.ticks().length/n),s=t[0]>0?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(e){return n=s((u=e,(t[0]<0?-Math.log(u>0?0:-u):Math.log(u<0?0:u))/Math.log(a)+i)),(t[0]<0?-Math.pow(a,-n):Math.pow(a,n))/e>=o?r(e):"";var n,u}}(e,s,t,l.auto.number(o||null)):l.auto.linear(s,t,o||null);case i:return(o?l:l.auto).time(o);case a:return(o?l:l.auto).utc(o);default:return String}}(e,t,n||function(e){switch(e.type){case i:return i;case a:return a;case s:return o;default:return u}}(e),l)}}},iIpz:function(e,t,n){"use strict"},iMk1:function(e,t){function n(e){this.mark=e}var r=n.prototype;r.hasPropertySet=function(e){var t=this.mark.def.properties;return t&&null!=t[e]},r.cousin=function(e,t){if(0===e)return this;e=e||-1;var n=this.mark,r=n.group,i=null==t?n.items.indexOf(this):t,a=r.items.indexOf(n)+e;return r.items[a].items[i]},r.sibling=function(e){if(0===e)return this;e=e||-1;var t=this.mark,n=t.items.indexOf(this)+e;return t.items[n]},r.remove=function(){var e=this.mark.items,t=e.indexOf(this);return t>=0&&(t===e.length-1?e.pop():e.splice(t,1)),this},r.touch=function(){this.pathCache&&(this.pathCache=null)},e.exports=n},j8cM:function(e,t,n){"use strict";var r;(r=t.Mark||(t.Mark={}))[r.AREA="area"]="AREA",r[r.BAR="bar"]="BAR",r[r.LINE="line"]="LINE",r[r.POINT="point"]="POINT",r[r.TEXT="text"]="TEXT",r[r.TICK="tick"]="TICK",r[r.RULE="rule"]="RULE",r[r.CIRCLE="circle"]="CIRCLE",r[r.SQUARE="square"]="SQUARE",r[r.ERRORBAR="errorBar"]="ERRORBAR";var i=t.Mark;t.AREA=i.AREA,t.BAR=i.BAR,t.LINE=i.LINE,t.POINT=i.POINT,t.TEXT=i.TEXT,t.TICK=i.TICK,t.RULE=i.RULE,t.CIRCLE=i.CIRCLE,t.SQUARE=i.SQUARE,t.ERRORBAR=i.ERRORBAR,t.PRIMITIVE_MARKS=[t.AREA,t.BAR,t.LINE,t.POINT,t.TEXT,t.TICK,t.RULE,t.CIRCLE,t.SQUARE]},jGoH:function(e,t,n){"use strict";var r=n("P/aK"),i=n("QSMf"),a=n("o+e1"),o=n("Fw/k"),s=n("ZAUf"),u=function(){function e(){this._nameMap={}}return e.prototype.rename=function(e,t){this._nameMap[e]=t},e.prototype.get=function(e){for(;this._nameMap[e];)e=this._nameMap[e];return e},e}(),l=function(){function e(e,t,n){this._warnings=[],this._parent=t,this._name=e.name||n,this._dataNameMap=t?t._dataNameMap:new u,this._scaleNameMap=t?t._scaleNameMap:new u,this._sizeNameMap=t?t._sizeNameMap:new u,this._data=e.data,this._description=e.description,this._transform=e.transform,this.component={data:null,layout:null,mark:null,scale:null,axis:null,axisGroup:null,gridGroup:null,legend:null}}return e.prototype.parse=function(){this.parseData(),this.parseSelectionData(),this.parseLayoutData(),this.parseScale(),this.parseAxis(),this.parseLegend(),this.parseAxisGroup(),this.parseGridGroup(),this.parseMark()},e.prototype.assembleScales=function(){return s.flatten(s.vals(this.component.scale).map(function(e){var t=[e.main];return e.colorLegend&&t.push(e.colorLegend),e.binColorLegend&&t.push(e.binColorLegend),t}))},e.prototype.assembleAxes=function(){return s.vals(this.component.axis)},e.prototype.assembleLegends=function(){return s.vals(this.component.legend)},e.prototype.assembleGroup=function(){var e={};e.marks=this.assembleMarks();var t=this.assembleScales();t.length>0&&(e.scales=t);var n=this.assembleAxes();n.length>0&&(e.axes=n);var r=this.assembleLegends();return r.length>0&&(e.legends=r),e},e.prototype.reduce=function(e,t,n){return i.channelMappingReduce(this.channels(),this.mapping(),e,t,n)},e.prototype.forEach=function(e,t){i.channelMappingForEach(this.channels(),this.mapping(),e,t)},e.prototype.parent=function(){return this._parent},e.prototype.name=function(e,t){return void 0===t&&(t="_"),(this._name?this._name+t:"")+e},e.prototype.description=function(){return this._description},e.prototype.data=function(){return this._data},e.prototype.renameData=function(e,t){this._dataNameMap.rename(e,t)},e.prototype.dataName=function(e){return this._dataNameMap.get(this.name(String(e)))},e.prototype.renameSize=function(e,t){this._sizeNameMap.rename(e,t)},e.prototype.channelSizeName=function(e){return this.sizeName(e===r.X||e===r.COLUMN?"width":"height")},e.prototype.sizeName=function(e){return this._sizeNameMap.get(this.name(e,"_"))},e.prototype.transform=function(){return this._transform||{}},e.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n.bin&&(t=s.extend({binSuffix:this.scale(e).type===o.ScaleType.ORDINAL?"_range":"_start"},t)),a.field(n,t)},e.prototype.scale=function(e){return this._scale[e]},e.prototype.isOrdinalScale=function(e){var t=this.scale(e);return t&&t.type===o.ScaleType.ORDINAL},e.prototype.renameScale=function(e,t){this._scaleNameMap.rename(e,t)},e.prototype.scaleName=function(e){return this._scaleNameMap.get(this.name(e+""))},e.prototype.sort=function(e){return(this.mapping()[e]||{}).sort},e.prototype.axis=function(e){return this._axis[e]},e.prototype.legend=function(e){return this._legend[e]},e.prototype.config=function(){return this._config},e.prototype.addWarning=function(e){s.warning(e),this._warnings.push(e)},e.prototype.warnings=function(){return this._warnings},e.prototype.isUnit=function(){return!1},e.prototype.isFacet=function(){return!1},e.prototype.isLayer=function(){return!1},e}();t.Model=l},jMte:function(e,t,n){"use strict";var r=n("x6Fv"),i=n("ZAUf"),a=n("t3C9"),o=n("1PdY"),s=n("nOes"),u=n("pAWG"),l=n("736r");!function(e){function t(e){var t=e.data();if(t){var n={name:e.dataName(r.SOURCE)};if(t.values&&t.values.length>0)n.values=t.values,n.format={type:"json"};else if(t.url){n.url=t.url;var a=/(?:\.([^.]+))?$/.exec(n.url)[1];i.contains(["json","csv","tsv","topojson"],a)||(a="json");var o=t.format||{},s=o.type||t.formatType;n.format=i.extend({type:s||a},o.property?{property:o.property}:{},o.feature?{feature:o.feature}:o.mesh?{mesh:o.mesh}:{})}return n}if(!e.parent())return{name:e.dataName(r.SOURCE)}}e.parseUnit=t,e.parseFacet=function(e){var n=t(e);return e.child().component.data.source||e.child().renameData(e.child().dataName(r.SOURCE),e.dataName(r.SOURCE)),n},e.parseLayer=function(e){var n=t(e);return e.children().forEach(function(t){var n=t.component.data;e.compatibleSource(t)&&(n.filter||n.formatParse||n.nullFilter?n.source={name:t.dataName(r.SOURCE),source:e.dataName(r.SOURCE)}:(t.renameData(t.dataName(r.SOURCE),e.dataName(r.SOURCE)),delete n.source))}),n},e.assemble=function(e,t){if(t.source){var n=t.source;return t.formatParse&&(t.source.format=t.source.format||{},t.source.format.parse=t.formatParse),n.transform=[].concat(a.nullFilter.assemble(t),u.formula.assemble(t),o.filter.assemble(t),s.bin.assemble(t),l.timeUnit.assemble(t)),n}return null}}(t.source||(t.source={}))},jNWb:function(e,t,n){var r=n("H3bJ"),i=n("4XOj"),a=e.exports={parse:function(e,t){return r.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var n=i(t),r=e.length,o=function(t){var i=n(a.parse(t));e[r]='"use strict"; return ('+i.code+");";var o=Function.apply(null,e);return i.fn=e.length>8?function(){return o.apply(i,arguments)}:function(e,t,n,r,a,s,u){return o.call(i,e,t,n,r,a,s,u)},i};return o.codegen=n,o},functions:n("nj7R"),constants:n("MSrK")}},jbgm:function(e,t,n){var r=n("cwb4");e.exports=function(e,t){return function(e,t){var n=t&&t.children||"children",r=t&&t.parent||"parent",i=[];return function e(t,a){t[r]=a,i.push(t);var o=t[n];if(o)for(var s=0;s<o.length;++s)e(o[s],t)}(e,null),i.root=e,i}(r(e,t),t)}},juLC:function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=i.ChangeSet,o=i.Tuple,s=n("J731"),u=n("4JPs"),l=n("acp7");function c(e){return l.prototype.init.call(this,e),u.addParameters(this,{with:{type:"data"},diagonal:{type:"value",default:"true"},filter:{type:"expr"}}),this._output={left:"a",right:"b"},this._lastWith=null,this._cids={},this._cache={},this.router(!0).produces(!0)}var f=c.prototype=Object.create(l.prototype);function h(e,t){var n=this._cache;(n[e._id]||(n[e._id]={c:[],f:!1})).c.push(t)}function d(e,t,n){return e?t._id+"_"+n._id:n._id+"_"+t._id}function p(e,t,n,r,i,a,s){for(var u,l,c=this._output,f=this._cache,p=this._cids,g=e.add,m=!1,v=0,y=n.length,_={};v<y;++v)p[l=d(t,s,u=n[v])]||(s._id!==u._id||r)&&(o.set(_,c.left,t?s:u),o.set(_,c.right,t?u:s),!i||i(_)?(g.push(_=o.ingest(_)),h.call(this,s,_),s._id!==u._id&&h.call(this,u,_),a[_._id]=1,p[l]=!0,_={}):(f[u._id]&&(f[u._id].f=!0),m=!0));f[s._id]&&(f[s._id].f=m)}function g(e,t,n,r,i,a,o,s){var u,l,c,f,h,g=this._output,m=this._cache,v=this._cids,y=m[s._id],_=y&&y.c,x=!y||y.f,b=e.mod,M=e.rem;if(_)for(u=_.length-1;u>=0;--u)if(h=d(f=s===(l=_[u])[g.left],s,c=f?l[g.right]:l[g.left]),m[c._id])if(!i||i(l)){if(a[l._id])continue;b.push(l),a[l._id]=1}else o[l._id]||M.push.apply(M,_.splice(u,1)),o[l._id]=1,v[h]=!1,y.f=!0;else v[h]=!1,_.splice(u,1);i&&x&&p.call(this,e,t,n,r,i,a,s)}function m(e,t,n,r){var i,a,o,s,u=this._output,l=this._cache[r._id],c=this._cids,f=e.rem;if(l){for(i=0,a=l.c.length;i<a;++i)c[d(s=r===(o=l.c[i])[u.left],r,s?o[u.right]:o[u.left])]=!1,n[o._id]||(f.push(o),n[o._id]=1);this._cache[r._id]=null}}f.constructor=c,f.batchTransform=function(e,t,n){s.debug(e,["crossing"]);var i=this.param("with"),o=this.param("diagonal"),u=this._output,l=this.param("filter")||null,c=!i.name,f=c?e:i.source.last(),h=c?t:i.source.values(),d=a.create(e),v={},y={};return n?(function(e,t){var n,i,a,o,s,u,l=this._cache,c=r.keys(l),f=e.rem;for(n=0,i=c.length;n<i;++n)for(a=0,o=(s=l[c[n]]).c.length;a<o;++a)t[(u=s.c[a])._id]||(f.push(u),t[u._id]=1);this._cache={},this._cids={},this._lastWith=null}.call(this,d,y),t.forEach(p.bind(this,d,!0,h,o,l,v)),this._lastWith=f.stamp):(e.rem.forEach(m.bind(this,d,!0,y)),e.add.forEach(p.bind(this,d,!0,h,o,l,v)),f.stamp>this._lastWith&&(f.rem.forEach(m.bind(this,d,!1,y)),f.add.forEach(p.bind(this,d,!1,t,o,l,v)),f.mod.forEach(g.bind(this,d,!1,t,o,l,v,y)),this._lastWith=f.stamp),e.mod.forEach(g.bind(this,d,!0,h,o,l,v,y))),d.fields[u.left]=1,d.fields[u.right]=1,d},e.exports=c,c.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Cross transform",description:"Compute the cross-product of two data sets.",type:"object",properties:{type:{enum:["cross"]},with:{type:"string",description:"The name of the secondary data set to cross with the primary data. If unspecified, the primary data is crossed with itself."},diagonal:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],description:'If false, items along the "diagonal" of the cross-product (those elements with the same index in their respective array) will not be included in the output.',default:!0},filter:{type:"string",description:"A string containing an expression (in JavaScript syntax) to filter the resulting data elements."},output:{type:"object",description:"Rename the output data fields",properties:{left:{type:"string",default:"a"},right:{type:"string",default:"b"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},jxr4:function(e,t,n){"use strict";var r,i=n("P/aK"),a=n("o+e1"),o=n("j8cM"),s=n("WJ2w"),u=n("ZAUf"),l=n("MtYt"),c=n("TLMq");function f(e,t){var n=e.fieldDef(t),a=e.legend(t),o=e.config(),s=function(e,t){switch(t){case i.COLOR:var n=e.fieldDef(i.COLOR),r=e.scaleName(d(n)?c.COLOR_LEGEND:i.COLOR);return e.config().mark.filled?{fill:r}:{stroke:r};case i.SIZE:return{size:e.scaleName(i.SIZE)};case i.SHAPE:return{shape:e.scaleName(i.SHAPE)}}return null}(e,t);s.title=h(a,n,o);var f=l.numberFormat(n,a.format,o);f&&(s.format=f),["offset","orient","values"].forEach(function(e){var t=a[e];void 0!==t&&(s[e]=t)});var p="boolean"!=typeof a&&a.properties||{};return["title","symbols","legend","labels"].forEach(function(i){var a=r[i]?r[i](n,p[i],e,t):p[i];void 0!==a&&u.keys(a).length>0&&(s.properties=s.properties||{},s.properties[i]=a)}),s}function h(e,t,n){return"boolean"!=typeof e&&e.title?e.title:a.title(t,n)}function d(e){return e.type===s.ORDINAL||e.bin||e.timeUnit}t.parseLegendComponent=function(e){return[i.COLOR,i.SIZE,i.SHAPE].reduce(function(t,n){return e.legend(n)&&(t[n]=f(e,n)),t},{})},t.parseLegend=f,t.title=h,t.useColorLegendScale=d,function(e){e.symbols=function(e,t,n,r){var a={},s=n.mark(),c=n.legend(r);switch(s){case o.BAR:case o.TICK:case o.TEXT:a.shape={value:"square"};break;case o.CIRCLE:case o.SQUARE:a.shape={value:s};break;case o.POINT:case o.LINE:case o.AREA:}var f,h=n.config().mark.filled,p=r===i.COLOR?u.without(l.FILL_STROKE_CONFIG,[h?"fill":"stroke","strokeDash","strokeDashOffset"]):u.without(l.FILL_STROKE_CONFIG,["strokeDash","strokeDashOffset"]);return p=u.without(p,["strokeDash","strokeDashOffset"]),l.applyMarkConfig(a,n,p),h&&(a.strokeWidth={value:0}),n.has(i.COLOR)&&r===i.COLOR?d(e)&&(f={scale:n.scaleName(i.COLOR),field:"data"}):n.fieldDef(i.COLOR).value&&(f={value:n.fieldDef(i.COLOR).value}),void 0!==f?h?a.fill=f:a.stroke=f:r!==i.COLOR&&(a[h?"fill":"stroke"]=a[h?"fill":"stroke"]||{value:n.config().mark.color}),void 0!==c.symbolColor&&(a.fill={value:c.symbolColor}),void 0!==c.symbolShape&&(a.shape={value:c.symbolShape}),void 0!==c.symbolSize&&(a.size={value:c.symbolSize}),void 0!==c.symbolStrokeWidth&&(a.strokeWidth={value:c.symbolStrokeWidth}),a=u.extend(a,t||{}),u.keys(a).length>0?a:void 0},e.labels=function(e,t,n,r){var a=n.legend(r),o=n.config(),f={};return r===i.COLOR&&(e.type===s.ORDINAL?t=u.extend({text:{scale:n.scaleName(c.COLOR_LEGEND),field:"data"}},t||{}):e.bin?t=u.extend({text:{scale:n.scaleName(c.COLOR_LEGEND_LABEL),field:"data"}},t||{}):e.type===s.TEMPORAL&&(t=u.extend({text:{template:l.timeTemplate("datum.data",e.timeUnit,a.format,a.shortTimeLabels,o)}},t||{}))),void 0!==a.labelAlign&&(f.align={value:a.labelAlign}),void 0!==a.labelColor&&(f.stroke={value:a.labelColor}),void 0!==a.labelFont&&(f.font={value:a.labelFont}),void 0!==a.labelFontSize&&(f.fontSize={value:a.labelFontSize}),void 0!==a.labelBaseline&&(f.baseline={value:a.labelBaseline}),f=u.extend(f,t||{}),u.keys(f).length>0?f:void 0},e.title=function(e,t,n,r){var i=n.legend(r),a={};return void 0!==i.titleColor&&(a.stroke={value:i.titleColor}),void 0!==i.titleFont&&(a.font={value:i.titleFont}),void 0!==i.titleFontSize&&(a.fontSize={value:i.titleFontSize}),void 0!==i.titleFontWeight&&(a.fontWeight={value:i.titleFontWeight}),a=u.extend(a,t||{}),u.keys(a).length>0?a:void 0}}(r=t.properties||(t.properties={}))},jyAW:function(e,t,n){"use strict";var r={value:function(){}};function i(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new a(r)}function a(e){this._=e}function o(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function s(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=r,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}a.prototype=i.prototype={constructor:a,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),u=-1,l=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++u<l;)if(n=(e=a[u]).type)i[n]=s(i[n],e.name,t);else if(null==t)for(n in i)i[n]=s(i[n],e.name,null);return this}for(;++u<l;)if((n=(e=a[u]).type)&&(n=o(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}},t.a=i},k2D6:function(e,t,n){"use strict";var r=n("P/aK"),i=n("o+e1"),a=n("MtYt");!function(e){function t(e,t,n,a){return a&&r.X===a.fieldChannel?{scale:t,field:i.field(e,{suffix:"_start"})}:i.isMeasure(e)?"horizontal"===n?e&&e.field?{scale:t,field:i.field(e)}:{scale:t,value:0}:{scale:t,field:i.field(e)}:i.isDimension(e)?{scale:t,field:i.field(e,{binSuffix:"_mid"})}:void 0}function n(e,t,n,a,o){if(o&&r.X===o.fieldChannel){if("horizontal"===a)return{scale:n,field:i.field(e,{suffix:"_end"})}}else if(i.isMeasure(t)&&"horizontal"===a)return t&&t.field?{scale:n,field:i.field(t)}:{scale:n,value:0}}function o(e,t,n,a){return a&&r.Y===a.fieldChannel?{scale:t,field:i.field(e,{suffix:"_start"})}:i.isMeasure(e)?"horizontal"!==n?e&&e.field?{scale:t,field:i.field(e)}:{field:{group:"height"}}:{scale:t,field:i.field(e)}:i.isDimension(e)?{scale:t,field:i.field(e,{binSuffix:"_mid"})}:void 0}function s(e,t,n,a,o){if(o&&r.Y===o.fieldChannel){if("horizontal"!==a)return{scale:n,field:i.field(e,{suffix:"_end"})}}else if(i.isMeasure(e)&&"horizontal"!==a)return t&&t.field?{scale:n,field:i.field(t)}:{scale:n,value:0}}e.markType=function(){return"area"},e.properties=function(e){var i={},u=e.config().mark.orient;u&&(i.orient={value:u});var l=e.stack(),c=t(e.encoding().x,e.scaleName(r.X),u,l);c&&(i.x=c);var f=o(e.encoding().y,e.scaleName(r.Y),u,l);f&&(i.y=f);var h=n(e.encoding().x,e.encoding().x2,e.scaleName(r.X),u,l);h&&(i.x2=h);var d=s(e.encoding().y,e.encoding().y2,e.scaleName(r.Y),u,l);return d&&(i.y2=d),a.applyColorAndOpacity(i,e),a.applyMarkConfig(i,e,["interpolate","tension"]),i},e.x=t,e.x2=n,e.y=o,e.y2=s,e.labels=function(e){}}(t.area||(t.area={}))},k66X:function(e,t,n){"use strict";var r=n("ZAUf"),i=n("wKIX");!function(e){function t(e){return e.reduce(function(e,t,n){t.timeUnit&&(i.rawDomain(t.timeUnit,n)&&(e[t.timeUnit]=!0));return e},{})}e.parseUnit=t,e.parseFacet=function(e){return r.extend(t(e),e.child().component.data.timeUnitDomain)},e.parseLayer=function(e){return r.extend(t(e),e.children().forEach(function(e){return e.component.data.timeUnitDomain}))},e.assemble=function(e){return r.keys(e.timeUnitDomain).reduce(function(e,t){var n=t,r=i.rawDomain(n,null);return r&&e.push({name:n,values:r,transform:[{type:"formula",field:"date",expr:i.parseExpression(n,"datum.data",!0)}]}),e},[])}}(t.timeUnitDomain||(t.timeUnitDomain={}))},kC7m:function(e,t,n){e.exports={arc:n("evf9"),area:n("lTFi"),group:n("ZCPb"),image:n("9+55"),line:n("eVGq"),path:n("7Zus"),rect:n("HaGw"),rule:n("qnrb"),symbol:n("zPnY"),text:n("Wd6V")}},kowr:function(e,t,n){"use strict";var r=n("x6Fv"),i=n("o+e1");!function(e){e.parseUnit=function(e){var t=e.stack();if(t){var n=t.groupbyChannel,i=t.fieldChannel;return{name:e.dataName(r.STACKED_SCALE),source:e.dataName(r.SUMMARY),transform:[{type:"aggregate",groupby:[e.field(n)],summarize:[{ops:["sum"],field:e.field(i)}]}]}}return null},e.parseFacet=function(e){var t=e.child(),n=t.component.data;if(!n.source&&n.stackScale){var a=n.stackScale,o=e.dataName(r.STACKED_SCALE);return t.renameData(a.name,o),a.name=o,a.source=e.dataName(r.SUMMARY),a.transform[0].groupby=e.reduce(function(e,t){return e.push(i.field(t)),e},a.transform[0].groupby),delete n.stackScale,a}return null},e.parseLayer=function(e){return null},e.assemble=function(e){return e.stackScale}}(t.stackScale||(t.stackScale={}))},lKLM:function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("SbOu"),o=n("v0Fq"),s=new(n("LHV8").Bounds),u="ordinal";var l={top:1,right:1,bottom:1,left:1};function c(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}var f={bottom:"center",top:"center",left:"right",right:"left"},h={bottom:"top",top:"bottom",left:"middle",right:"middle"};function d(e,t,n,i,a,o,s,l){var c="left"===e||"top"===e?-1:1;if(a=a===1/0?"top"===e||"bottom"===e?{field:{group:"height",level:2},mult:-c,offset:l*-c}:{field:{group:"width",level:2},mult:-c,offset:l*-c}:{value:c*a,offset:l},"between"===s.tickPlacement&&o.type===u){var f=o.range(),h=.5+(o.rangeBand()||(f[1]-f[0])/2);(i=n=r.duplicate(i)).offset=n.offset=h}"top"===e||"bottom"===e?(r.extend(t.properties.enter,{x:n,y:{value:0},y2:a}),r.extend(t.properties.update,{x:i,y:{value:0},y2:a}),r.extend(t.properties.exit,{x:i})):(r.extend(t.properties.enter,{x:{value:0},x2:a,y:n}),r.extend(t.properties.update,{x:{value:0},x2:a,y:i}),r.extend(t.properties.exit,{y:i}))}function p(e,t,n){var a=n?{}:e,o=e.mark.def.offset,s=e.mark.def.orient,u=t.width,l=t.height;if(r.isArray(o)){var c=o[0],f=o[1];switch(s){case"left":i.set(a,"x",-c),i.set(a,"y",f);break;case"right":i.set(a,"x",u+c),i.set(a,"y",f);break;case"bottom":i.set(a,"x",c),i.set(a,"y",l+f);break;case"top":i.set(a,"x",c),i.set(a,"y",-f);break;default:i.set(a,"x",c),i.set(a,"y",f)}}else switch(r.isObject(o)&&(o=-t.scale(o.scale)(o.value)),s){case"left":i.set(a,"x",-o),i.set(a,"y",0);break;case"right":i.set(a,"x",u+o),i.set(a,"y",0);break;case"bottom":i.set(a,"x",0),i.set(a,"y",l+o);break;case"top":i.set(a,"x",0),i.set(a,"y",-o);break;default:i.set(a,"x",0),i.set(a,"y",0)}return n&&n.interpolate(e,a),!0}function g(e){return{type:"rule",interactive:!1,key:"data",properties:{enter:{stroke:{value:e.tickColor},strokeWidth:{value:e.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}e.exports=function(e,t){var n,m=t.orient,v=0,y=t.titleOffset,_={},x="front",b=!1,M=null,k=t.tickSize,S=t.tickSize,E=t.tickSize,A=t.tickPadding||t.padding,w=null,T=null,O=null,N=0,L=t.ticks,C={},R={},I={},D={},U={},P={},z={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}},F={};function j(){_.type=null}function q(e){return{data:e}}function Y(e){var t=w||(n.ticks?n.ticks(L):n.domain()),r=function(e,t,n){var r=[];if(n&&t.length>1){for(var i,a,o=c(e.domain()),s=-1,u=t.length,l=(t[1]-t[0])/++n;++s<u;)for(i=n;--i>0;)(a=+t[s]-i*l)>=o[0]&&r.push(a);for(--s,i=0;++i<n&&(a=+t[s]+i*l)<o[1];)r.push(a)}return r}(n,t,N).map(q);return[t=t.map(function(t){return(t=q(t)).label=e(t.data),t}),r]}return F.def=function(){_.type||function(n){var i,o,s,l,x,b,M,w,T,O,N,L,F,j,q,Y,$,H,W,V,X,G,Z,B,J;n.type===u?(i={scale:n.scaleName,offset:.5+n.rangeBand()/2},o=i):(i={scale:n.scaleName,offset:.5},o={scale:n.scaleName+":prev",offset:.5}),s=(J=n).rangeExtent?J.rangeExtent():c(J.range()),r.extend(z.gridLines,g(t)),r.extend(z.majorTicks,g(t)),r.extend(z.minorTicks,g(t)),r.extend(z.tickLabels,{type:"text",interactive:!0,key:"data",properties:{enter:{fill:{value:(B=t).tickLabelColor},font:{value:B.tickLabelFont},fontSize:{value:B.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}),r.extend(z.domain,{type:"path",interactive:!1,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:(Z=t).axisColor},strokeWidth:{value:Z.axisWidth}},update:{}}}),r.extend(z.title,{type:"text",interactive:!0,properties:{enter:{font:{value:(G=t).titleFont},fontSize:{value:G.titleFontSize},fontWeight:{value:G.titleFontWeight},fill:{value:G.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}),z.gridLines.properties.enter.stroke={value:t.gridColor},z.gridLines.properties.enter.strokeOpacity={value:t.gridOpacity},z.gridLines.properties.enter.strokeWidth={value:t.gridWidth},z.gridLines.properties.enter.strokeDash={value:t.gridDash},d(m,z.gridLines,o,i,1/0,n,t,v),d(m,z.majorTicks,o,i,k,n,t),d(m,z.minorTicks,o,i,S,n,t),T=m,O=z.tickLabels,N=o,L=i,F=k,j=A,F=Math.max(F,0)+j,("left"===T||"top"===T)&&(F*=-1),"top"===T||"bottom"===T?(r.extend(O.properties.enter,{x:N,y:{value:F}}),r.extend(O.properties.update,{x:L,y:{value:F},align:{value:"center"},baseline:{value:h[T]}})):(r.extend(O.properties.enter,{x:{value:F},y:N}),r.extend(O.properties.update,{x:{value:F},y:L,align:{value:f[T]},baseline:{value:"middle"}})),l=m,x=z.domain,b=s,M=E,"top"!==l&&"left"!==l||(M*=-1),w="bottom"===l||"top"===l?"M"+b[0]+","+M+"V0H"+b[1]+"V"+M:"M"+M+","+b[0]+"H0V"+b[1]+"H"+M,x.properties.update.path={value:w},q=m,Y=z.title,$=s,H=+y||-1,W=Y.properties.update,V=~~(($[0]+$[1])/2),X="top"===q||"left"===q?-1:1,"bottom"===q||"top"===q?(W.x={value:V},W.angle={value:0},H>=0&&(W.y={value:X*H})):(W.y={value:V},W.angle={value:"left"===q?-90:90},H>=0&&(W.x={value:X*H})),r.extend(z.gridLines.properties.update,C),r.extend(z.majorTicks.properties.update,I),r.extend(z.minorTicks.properties.update,D),r.extend(z.tickLabels.properties.update,R),r.extend(z.domain.properties.update,P),r.extend(z.title.properties.update,U);var Q=[z.gridLines,z.majorTicks,z.minorTicks,z.tickLabels,z.domain,z.title];r.extend(_,{type:"group",interactive:!1,properties:{enter:{encode:p,scales:[n.scaleName],signals:[],data:[]},update:{encode:p,scales:[n.scaleName],signals:[],data:[]}}}),_.marks=Q.map(function(t){return a(e,t)})}(n);var l,w,N,F,j,$,H,W=Y(o.getTickFormat(n,L,O,T)),V=M?[M].map(q):[];return _.marks[0].from=function(){return b?W[0]:[]},_.marks[1].from=function(){return W[0]},_.marks[2].from=function(){return W[1]},_.marks[3].from=_.marks[1].from,_.marks[4].from=function(){return[1]},_.marks[5].from=function(){return V},_.offset=v,_.orient=m,_.layer=x,"auto"===y&&(w=(l=_).orient,N=l.marks[5].properties.update,F=N.encode,j=t.titleOffsetAutoMin,$=t.titleOffsetAutoMax,H=t.titleOffsetAutoMargin,N.encode=function(e,t,n,r,a,o){var u=F.call(F,e,t,n,r,a,o),l="bottom"===w||"top"===w?"y":"x";if(null!=U[l])return u;s.clear().union(t.items[3].bounds).union(t.items[4].bounds);var c=n?{}:e,f="left"===w||"right"===w?"width":"height",h="top"===w||"left"===w?-1:1,d=~~(s[f]()+e.fontSize/2+H);return i.set(c,l,h*Math.min(Math.max(j,d),$)),n&&n.interpolate(e,c),!0}),_},F.scale=function(e){return arguments.length?(n!==e&&(n=e,j()),F):n},F.orient=function(e){return arguments.length?(m!==e&&(m=e in l?e+"":t.orient,j()),F):m},F.title=function(e){return arguments.length?(M!==e&&(M=e,j()),F):M},F.tickCount=function(e){return arguments.length?(L=e,F):L},F.tickValues=function(e){return arguments.length?(w=e,F):w},F.tickFormat=function(e){return arguments.length?(T!==e&&(T=e,j()),F):T},F.tickFormatType=function(e){return arguments.length?(O!==e&&(O=e,j()),F):O},F.tickSize=function(e,t){if(!arguments.length)return k;var n=arguments.length-1,r=+e,i=n>1?+t:k,a=n>0?+arguments[n]:k;return k===r&&S===i&&E===a||j(),k=r,S=i,E=a,F},F.tickSubdivide=function(e){return arguments.length?(N=+e,F):N},F.offset=function(e){return arguments.length?(v=r.isObject(e)?e:+e,F):v},F.tickPadding=function(e){return arguments.length?(A!==+e&&(A=+e,j()),F):A},F.titleOffset=function(e){return arguments.length?(y!==e&&(y=e,j()),F):y},F.layer=function(e){return arguments.length?(x!==e&&(x=e,j()),F):x},F.grid=function(e){return arguments.length?(b!==e&&(b=e,j()),F):b},F.gridLineProperties=function(e){return arguments.length?(C!==e&&(C=e),F):C},F.majorTickProperties=function(e){return arguments.length?(I!==e&&(I=e),F):I},F.minorTickProperties=function(e){return arguments.length?(D!==e&&(D=e),F):D},F.tickLabelProperties=function(e){return arguments.length?(R!==e&&(R=e),F):R},F.titleProperties=function(e){return arguments.length?(U!==e&&(U=e),F):U},F.domainProperties=function(e){return arguments.length?(P!==e&&(P=e),F):P},F.reset=function(){return j(),F},F}},lTFi:function(e,t,n){var r=n("gWW/"),i=n("eJnU"),a=n("bSC/"),o=n("zhsD").path.area;function s(e,t){var n=t[0],r=n.pathCache||(n.pathCache=i(o(t)));a(e,r)}var u=r.testPath(s);e.exports={draw:r.drawOne(s),pick:function(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),u(e,o,n,r)?o[0]:null)},nested:!0}},lkhv:function(e,t,n){var r=n("zF6n"),i=n("tGq9");e.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(r.array(t))},[]);return(new i).groupby(e).summarize({"*":"values"})}},lnKO:function(e,t){function n(e){this.clear(),e&&this.union(e)}var r=n.prototype;r.clone=function(){return new n(this)},r.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},r.set=function(e,t,n,r){return this.x1=e,this.y1=t,this.x2=n,this.y2=r,this},r.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},r.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},r.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},r.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},r.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,s=this.x1,u=this.x2,l=this.y1,c=this.y2;return this.clear().add(r*s-i*l+a,i*s+r*l+o).add(r*s-i*c+a,i*s+r*c+o).add(r*u-i*l+a,i*u+r*l+o).add(r*u-i*c+a,i*u+r*c+o)},r.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},r.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},r.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},r.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},r.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},r.width=function(){return this.x2-this.x1},r.height=function(){return this.y2-this.y1},e.exports=n},mP8n:function(e,t,n){var r=n("zLl/"),i=n("ZyfV"),a=n("3Scv"),o=n("sV93"),s=n("zhsD"),u=s.metadata.xmlns,l=n("rfWk");function c(e){i.call(this),this._loader=new r(e),this._dirtyID=0}var f=i.prototype,h=c.prototype=Object.create(f);function d(e,t,n){var r,i,a;for((e=o.child(e,n,"linearGradient",u)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)(a=o.child(e,r,"stop",u)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);o.clear(e,r)}function p(e,t,n){var r;(e=o.child(e,n,"clipPath",u)).setAttribute("id",t.id),(r=o.child(e,0,"rect",u)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)}function g(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function m(e,t,n,r,i){var a=o.child(e,r,t.tag,u,null,i);(a.__data__=n,a.__values__={fill:"default"},"g"===t.tag)&&(o.child(a,0,"rect",u,"background").__data__=n);return n._svg=a}h.constructor=c,h.initialize=function(e,t,n,r){return e&&(this._svg=o.child(e,0,"svg",u,"marks"),o.clear(e,1),this._root=o.child(this._svg,0,"g",u),o.clear(this._svg,1)),this._defs={clip_id:1,gradient:{},clipping:{}},this.background(this._bgcolor),f.initialize.call(this,e,t,n,r)},h.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),f.background.apply(this,arguments)},h.resize=function(e,t,n){if(f.resize.call(this,e,t,n),this._svg){var r=this._width,i=this._height,a=this._padding;this._svg.setAttribute("width",r+a.left+a.right),this._svg.setAttribute("height",i+a.top+a.bottom),this._root.setAttribute("transform","translate("+a.left+","+a.top+")")}return this},h.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var t in s.metadata)e[t]=s.metadata[t];return o.openTag("svg",e)+this._svg.innerHTML+o.closeTag("svg")},h.imageURL=function(e){return this._loader.imageURL(e)},h.render=function(e,t){return this._dirtyCheck(t)&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e,-1),o.clear(this._root,1)),this.updateDefs(),this},h.draw=function(e,t,n){this.drawMark(e,t,n,l[t.marktype])},h.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(r=n.el=o.child(t,0,"defs",u)),d(r,n.gradient[e],i++);for(e in n.clipping)r||(r=n.el=o.child(t,0,"defs",u)),p(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):o.clear(r,i))},h._resetDefs=function(){var e=this._defs;e.clip_id=1,e.gradient={},e.clipping={}},h.isDirty=function(e){return this._dirtyAll||e.dirty===this._dirtyID},h._dirtyCheck=function(e){if(this._dirtyAll=!0,!e)return!0;var t,n,r,i,a,s,u,c=++this._dirtyID;for(a=0,s=e.length;a<s;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=l[r]),"exit"!==t.status?(t=i.nest?n.items[0]:t)._update!==c&&(t._svg?this._update(i,t._svg,t):(this._dirtyAll=!1,g(t,c)),t._update=c):t._svg&&(i.nest&&t.mark.items.length?(this._update(i,t._svg,t.mark.items[0]),(u=t.mark.items[0])._svg=t._svg,u._update=c):o.remove(t._svg),t._svg=null);return!this._dirtyAll},h.drawMark=function(e,t,n,r){if(this.isDirty(t)){var i,a,s,l,c,f,h=r.nest?t.items&&t.items.length?[t.items[0]]:[]:t.items||[],d=!1===t.interactive?"none":null,p="g"===r.tag,g=o.cssClass(t);for((i=o.child(e,n+1,"g",u,g)).setAttribute("class",g),t._svg=i,!p&&d&&i.style.setProperty("pointer-events",d),a=0,s=h.length;a<s;++a)this.isDirty(c=h[a])&&(l=m(i,r,c,a,f=!(this._dirtyAll||c._svg)),this._update(r,l,c),p&&(f&&(this._dirtyAll=!0),this._recurse(l,c),f&&(this._dirtyAll=!1)));return o.clear(i,a),i}},h._recurse=function(e,t){var n,r,i=t.items||[],a=t.legendItems||[],s=t.axisItems||[],u=0;for(n=0,r=s.length;n<r;++n)"back"===s[n].layer&&this.drawMark(e,s[n],u++,l.group);for(n=0,r=i.length;n<r;++n)this.draw(e,i[n],u++);for(n=0,r=s.length;n<r;++n)"back"!==s[n].layer&&this.drawMark(e,s[n],u++,l.group);for(n=0,r=a.length;n<r;++n)this.drawMark(e,a[n],u++,l.group);o.clear(e,1+u)};var v=null,y=null,_={group:function(e,t,n){v=t.childNodes[0],y=t.__values__,e.background(x,n,this);var r=!1===n.mark.interactive?"none":null;r!==y.events&&(v.style.setProperty("pointer-events",r),y.events=r)},text:function(e,t,n){var r=a.value(n.text);r!==y.text&&(t.textContent=r,y.text=r),(r=a.font(n))!==y.font&&(t.style.setProperty("font",r),y.font=r)}};function x(e,t,n){t!==y[e]&&(null!=t?n?v.setAttributeNS(n,e,t):v.setAttribute(e,t):n?v.removeAttributeNS(n,e):v.removeAttribute(e),y[e]=t)}h._update=function(e,t,n){v=t,y=t.__values__,e.attr(x,n,this);var r=_[e.type];r&&r(e,t,n),this.style(v,n)},h.style=function(e,t){var n,r,i,a,o;if(null!=t)for(n=0,r=s.styleProperties.length;n<r;++n)(o=t[i=s.styleProperties[n]])!==y[i]&&(a=s.styles[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+("undefined"!=typeof window?window.location.href:"")+"#"+o.id+")"),e.style.setProperty(a,o+"")),y[i]=o)},e.exports=c},mgrV:function(e,t,n){var r=n("aZ75"),i=new Date,a=new Date(0,0,1).setFullYear(0),o=new Date(Date.UTC(0,0,1)).setUTCFullYear(0);function s(e){return i.setTime(+e),i}function u(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function l(e,t,n,r,i,a){return u(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,i,a)}var c=[l("second",r.second,a),l("minute",r.minute,a),l("hour",r.hour,a),l("day",r.day,a,[1,7]),l("month",r.month,a,[1,3,6]),l("year",r.year,a),u("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return s(e).getSeconds()},null,0,59),u("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return s(e).getMinutes()},null,0,59),u("hours",function(e){return new Date(1970,0,1,e)},function(e){return s(e).getHours()},null,0,23),u("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return s(e).getDay()},[1],0,6),u("dates",function(e){return new Date(1970,0,e)},function(e){return s(e).getDate()},[1],1,31),u("months",function(e){return new Date(1970,e%12,1)},function(e){return s(e).getMonth()},[1],0,11)],f=[l("second",r.utcSecond,o),l("minute",r.utcMinute,o),l("hour",r.utcHour,o),l("day",r.utcDay,o,[1,7]),l("month",r.utcMonth,o,[1,3,6]),l("year",r.utcYear,o),u("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return s(e).getUTCSeconds()},null,0,59),u("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return s(e).getUTCMinutes()},null,0,59),u("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return s(e).getUTCHours()},null,0,23),u("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return s(e).getUTCDay()},[1],0,6),u("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return s(e).getUTCDate()},[1],1,31),u("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return s(e).getUTCMonth()},[1],0,11)],h=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];function d(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return function(e,t,n,r){var i,a,o,s=h[0];for(i=1,a=h.length;i<a;++i)if(t>(s=h[i])[0]){if((o=t/s[0])>r)return e[h[i-1][1]];if(o>=n)return e[s[1]]}return e[h[a-1][1]]}(e,t,n,r)},r}e.exports=d(c),e.exports.utc=d(f)},nIY2:function(e,t,n){var r=n("pYy3");e.exports={json:n("cwb4"),topojson:n("Z8XL"),treejson:n("jbgm"),dsv:r,csv:r.delimiter(","),tsv:r.delimiter("\t")}},nOes:function(e,t,n){"use strict";var r=n("FmT5"),i=n("P/aK"),a=n("o+e1"),o=n("ZAUf");!function(e){function t(e){return e.reduce(function(t,n,s){var u=e.fieldDef(s).bin;if(u){var l=o.extend({type:"bin",field:n.field,output:{start:a.field(n,{binSuffix:"_start"}),mid:a.field(n,{binSuffix:"_mid"}),end:a.field(n,{binSuffix:"_end"})}},"boolean"==typeof u?{}:u);l.maxbins||l.step||(l.maxbins=r.autoMaxBins(s));var c=[l],f=e.isOrdinalScale(s)||s===i.COLOR;f&&c.push({type:"formula",field:a.field(n,{binSuffix:"_range"}),expr:a.field(n,{datum:!0,binSuffix:"_start"})+" + '-' + "+a.field(n,{datum:!0,binSuffix:"_end"})}),t[o.hash(u)+"_"+n.field+"oc:"+f]=c}return t},{})}e.parseUnit=t,e.parseFacet=function(e){var n=t(e),r=e.child().component.data;return r.source||(o.extend(n,r.bin),delete r.bin),n},e.parseLayer=function(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;t.source||(o.extend(n,t.bin),delete t.bin)}),n},e.assemble=function(e){return o.flatten(o.vals(e.bin))}}(t.bin||(t.bin={}))},nTOs:function(e,t,n){(function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0),e[0]=(n+=e[0])*i+o,e[1]=(r+=e[1])*a+s}}function r(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function i(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:a(e,t)};return null==t.id&&delete n.id,n}function a(e,t){var r=n(e.transform),i=e.arcs;function a(e,t){t.length&&t.pop();for(var n,a=i[e<0?~e:e],o=0,s=a.length;o<s;++o)t.push(n=a[o].slice()),r(n,o);e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,s)}function o(e){return e=e.slice(),r(e,0),e}function s(e){for(var t=[],n=0,r=e.length;n<r;++n)a(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function u(e){for(var t=s(e);t.length<4;)t.push(t[0].slice());return t}function l(e){return e.map(u)}var c={Point:function(e){return o(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(o)},LineString:function(e){return s(e.arcs)},MultiLineString:function(e){return e.arcs.map(s)},Polygon:function(e){return l(e.arcs)},MultiPolygon:function(e){return e.arcs.map(l)}};return function e(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(e)}:n in c?{type:n,coordinates:c[n](t)}:null}(t)}function o(e,t){var n={},r={},i={},a=[],o=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){n[e<0?~e:e]=1}),a.push(i)}}return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++o],t[o]=n,t[r]=i)}),t.forEach(function(t){var n,a,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=o[0],u=o[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,a=r[u]){delete r[a.start];var l=a===n?n:n.concat(a);r[l.start=n.start]=i[l.end=a.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,a=i[s]){delete i[a.end];var c=a===n?n:a.concat(n);r[c.start=a.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n}),s(i,r),s(r,i),t.forEach(function(e){n[e<0?~e:e]||a.push([e])}),a}function s(e,t,n){var r=[];function i(e){var t=e<0?~e:e;(l[t]||(l[t]=[])).push({i:e,g:u})}function a(e){e.forEach(i)}function s(e){e.forEach(a)}if(arguments.length>1){var u,l=[],c={LineString:a,MultiLineString:s,Polygon:s,MultiPolygon:function(e){e.forEach(s)}};!function e(t){"GeometryCollection"===t.type?t.geometries.forEach(e):t.type in c&&(u=t,c[t.type](t.arcs))}(t),l.forEach(arguments.length<3?function(e){r.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&r.push(e[0].i)})}else for(var f=0,h=e.arcs.length;f<h;++f)r.push(f);return{type:"MultiLineString",arcs:o(e,r)}}function u(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function l(e,t){var n={},r=[],i=[];function s(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})}),r.push(e)}function u(t){return Math.abs(function(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return a/2}(a(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}return t.forEach(function(e){"Polygon"===e.type?s(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(s)}),r.forEach(function(e){if(!e._){var t=[],r=[e];for(e._=1,i.push(t);e=r.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),r.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:i.map(function(t){var r,i=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].length<2&&i.push(e)})})}),(r=(i=o(e,i)).length)>1)for(var a,s,l=1,c=u(i[0]);l<r;++l)(a=u(i[l]))>c&&(s=i[0],i[0]=i[l],i[l]=s,c=a);return i})}}function c(e,t){return e[1][2]-t[1][2]}e.version="1.6.27",e.mesh=function(e){return a(e,s.apply(this,arguments))},e.meshArcs=s,e.merge=function(e){return a(e,l.apply(this,arguments))},e.mergeArcs=l,e.feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return i(e,t)})}:i(e,t)},e.neighbors=function(e){var t={},n=e.map(function(){return[]});function i(e,n){e.forEach(function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function a(e,t){e.forEach(function(e){i(e,t)})}var o={LineString:i,MultiLineString:a,Polygon:a,MultiPolygon:function(e,t){e.forEach(function(e){a(e,t)})}};e.forEach(function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,n)}):t.type in o&&o[t.type](t.arcs,n)});for(var s in t)for(var u=t[s],l=u.length,c=0;c<l;++c)for(var f=c+1;f<l;++f){var h,d=u[c],p=u[f];(h=n[d])[s=r(h,p)]!==p&&h.splice(s,0,p),(h=n[p])[s=r(h,d)]!==d&&h.splice(s,0,d)}return n},e.presimplify=function(e,r){var i=n(e.transform),a=function(e){if(!e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0);var u=Math.round((e[0]-o)/i),l=Math.round((e[1]-s)/a);e[0]=u-n,e[1]=l-r,n=u,r=l}}(e.transform),o=function(){var e={},t=[],n=0;function r(e,n){for(;n>0;){var r=(n+1>>1)-1,i=t[r];if(c(e,i)>=0)break;t[i._=n]=i,t[e._=n=r]=e}}function i(e,r){for(;;){var i=r+1<<1,a=i-1,o=r,s=t[o];if(a<n&&c(t[a],s)<0&&(s=t[o=a]),i<n&&c(t[i],s)<0&&(s=t[o=i]),o===r)break;t[s._=r]=s,t[e._=r=o]=e}}return e.push=function(e){return r(t[e._=n]=e,n++),n},e.pop=function(){if(!(n<=0)){var e,r=t[0];return--n>0&&(e=t[n],i(t[e._=0]=e,0)),r}},e.remove=function(e){var a,o=e._;if(t[o]===e)return o!==--n&&(c(a=t[n],e)<0?r:i)(t[a._=o]=a,o),o},e}();function s(e){o.remove(e),e[1][2]=r(e),o.push(e)}return r||(r=u),e.arcs.forEach(function(e){var t,n,u,l,c=[],f=0;for(n=0,u=e.length;n<u;++n)l=e[n],i(e[n]=[l[0],l[1],1/0],n);for(n=1,u=e.length-1;n<u;++n)(t=e.slice(n-1,n+2))[1][2]=r(t),c.push(t),o.push(t);for(n=0,u=c.length;n<u;++n)(t=c[n]).previous=c[n-1],t.next=c[n+1];for(;t=o.pop();){var h=t.previous,d=t.next;t[1][2]<f?t[1][2]=f:f=t[1][2],h&&(h.next=d,h[2]=t[2],s(h)),d&&(d.previous=h,d[0]=t[0],s(d))}e.forEach(a)}),e},Object.defineProperty(e,"__esModule",{value:!0})})(t)},nXcD:function(e,t,n){var r=n("zF6n"),i=n("ggRp"),a=n("uHQN"),o=n("yQql");e.exports={table:function(e,t){var n=(t=r.extend({separator:" ",minwidth:8,maxwidth:15},t)).fields||r.keys(e[0]),l=i.all(e);if(t.start||t.limit){var c=t.start||0,f=t.limit?c+t.limit:e.length;e=e.slice(c,f)}var h=n.map(function(n){var r=s[l[n]]||"",i=o("{{"+n+r+"}}"),u=a.max(e,function(e){return i(e).length});return u=Math.max(Math.min(n.length,t.minwidth),u),t.maxwidth>0?Math.min(u,t.maxwidth):u}),d=n.map(function(e,t){return r.truncate(r.pad(e,h[t],"center"),h[t])}).join(t.separator),p=o(n.map(function(e,t){return"{{"+e+(s[l[e]]||"")+"|pad:"+h[t]+","+(u[l[e]]||"right")+"|truncate:"+h[t]+"}}"}).join(t.separator));return d+"\n"+e.map(p).join("\n")},summary:function(e){e=e?e.__summary__?e:a.summary(e):this;var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push("-- "+e[t].field+" --"),"string"===e[t].type||e[t].distinct<10?r.push(l(e[t])):r.push(["valid:    "+(i=e[t]).valid,"missing:  "+i.missing,"distinct: "+i.distinct,"min:      "+i.min,"max:      "+i.max,"median:   "+i.median,"mean:     "+i.mean,"stdev:    "+i.stdev,"modeskew: "+i.modeskew].join("\n")),r.push("");var i;return r.join("\n")}};var s={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},u={number:"left",integer:"left"};function l(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,i=r.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(i).join("\n")}},nj7R:function(e,t){e.exports=function(e){function t(t,n,r){return function(i){return a=t,s=n,u=r,l=e((o=i)[0]),s&&(l=s+"("+l+")",0===s.lastIndexOf("new ",0)&&(l="("+l+")")),l+"."+a+(u<0?"":0===u?"()":"("+o.slice(1).map(e).join(",")+")");var a,o,s,u,l}}var n="new Date";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase","String",0),lower:t("toLowerCase","String",0),slice:t("slice","String"),substring:t("substring","String"),replace:t("replace","String"),regexp:"RegExp",test:t("test","RegExp"),if:function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}},"o+e1":function(e,t,n){"use strict";var r=n("h/tW"),i=n("Fw/k"),a=n("z5TJ"),o=n("WJ2w"),s=n("ZAUf");function u(e){return s.contains([o.NOMINAL,o.ORDINAL],e.type)||!!e.bin||e.type===o.TEMPORAL&&!!e.timeUnit}function l(e){return e.aggregate===r.AggregateOp.COUNT}t.aggregate={type:"string",enum:r.AGGREGATE_OPS,supportedEnums:{quantitative:r.AGGREGATE_OPS,ordinal:["median","min","max"],nominal:[],temporal:["mean","median","min","max"],"":["count"]},supportedTypes:s.toMap([o.QUANTITATIVE,o.NOMINAL,o.ORDINAL,o.TEMPORAL,""])},t.field=function(e,t){void 0===t&&(t={});var n=(t.datum?"datum.":"")+(t.prefn||""),r=t.suffix||"",a=e.field;return l(e)?n+"count"+r:t.fn?n+t.fn+"_"+a+r:!t.nofn&&e.bin?n+"bin_"+a+(t.binSuffix||(t.scaleType===i.ScaleType.ORDINAL?"_range":"_start")):t.nofn||t.noAggregate||!e.aggregate?!t.nofn&&e.timeUnit?n+e.timeUnit+"_"+a+r:n+a:n+e.aggregate+"_"+a+r},t.isDimension=function(e){return e&&e.field&&u(e)},t.isMeasure=function(e){return e&&e.field&&!u(e)},t.count=function(){return{field:"*",aggregate:r.AggregateOp.COUNT,type:o.QUANTITATIVE}},t.isCount=l,t.cardinality=function(e,t,n){void 0===n&&(n={});var r=t[e.field],i=e.type;if(e.bin){var u=e.bin,l="boolean"==typeof u?void 0:u.maxbins;void 0===l&&(l=10);var c=s.getbins(r,l);return(c.stop-c.start)/c.step}if(i===o.TEMPORAL)switch(e.timeUnit){case a.TimeUnit.SECONDS:case a.TimeUnit.MINUTES:return 60;case a.TimeUnit.HOURS:return 24;case a.TimeUnit.DAY:return 7;case a.TimeUnit.DATE:return 31;case a.TimeUnit.MONTH:return 12;case a.TimeUnit.QUARTER:return 4;case a.TimeUnit.YEAR:var f=t["year_"+e.field];return f?f.distinct-(r.missing>0&&n[i]?1:0):null}return e.aggregate?1:r.distinct-(r.missing>0&&n[i]?1:0)},t.title=function(e,t){if(null!=e.title)return e.title;if(l(e))return t.countTitle;var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toString().toUpperCase()+"("+e.field+")":e.field}},oCE4:function(e,t,n){e.exports={Handler:n("2zc7"),Renderer:n("pEEJ")}},oCPx:function(e,t,n){var r=n("LHV8").render,i=r.canvas,a=r.svg.string,o=n("+5nH");function s(e,t,n){o.call(this,e,t,n),this._type="canvas",this._renderers={canvas:i,svg:a}}var u=s.prototype=new o;u.renderer=function(e){return e&&(this._type=e),o.prototype.renderer.apply(this,arguments)},u.canvas=function(){return"canvas"===this._type?this._renderer.canvas():null},u.canvasAsync=function(e){var t=this._renderer,n=this;if("canvas"!==this._type)return null;t.pendingImages()>0?function r(){0===t.pendingImages()?(n.render(),e(n.canvas())):setTimeout(r,10)}():e(this.canvas())},u.svg=function(){return"svg"===this._type?this._renderer.svg():null},u.initialize=function(){var e=this._width,t=this._height,n=this._bgcolor,r=this._padding,i=this.model().config();return this._viewport&&(e=this._viewport[0]-(r?r.left+r.right:0),t=this._viewport[1]-(r?r.top+r.bottom:0)),this._renderer=(this._renderer||new this._io.Renderer(i.load)).initialize(null,e,t,r).background(n),this._repaint=!0,this},e.exports=s},pAWG:function(e,t,n){"use strict";var r=n("ZAUf");!function(e){function t(e){return(e.transform().calculate||[]).reduce(function(e,t){return e[r.hash(t)]=t,e},{})}e.parseUnit=t,e.parseFacet=function(e){var n=t(e),i=e.child().component.data;return i.source||(r.extend(n,i.calculate),delete i.calculate),n},e.parseLayer=function(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;!t.source&&t.calculate&&(r.extend(n||{},t.calculate),delete t.calculate)}),n},e.assemble=function(e){return r.vals(e.calculate).reduce(function(e,t){return e.push(r.extend({type:"formula"},t)),e},[])}}(t.formula||(t.formula={}))},pEEJ:function(e,t,n){var r=n("sV93"),i=n("lnKO"),a=n("zLl/"),o=n("WFOa"),s=n("ZyfV"),u=n("kC7m");function l(e){s.call(this),this._loader=new a(e)}l.RETINA=!0;var c=s.prototype,f=l.prototype=Object.create(c);function h(e,t){if(null==t)return e;for(var n=e.clone();null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}f.constructor=l,f.initialize=function(e,t,n,i){return this._canvas=o.instance(t,n),e&&(r.clear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),c.initialize.call(this,e,t,n,i)},f.resize=function(e,t,n){return c.resize.call(this,e,t,n),o.resize(this._canvas,this._width,this._height,this._padding,l.RETINA),this},f.canvas=function(){return this._canvas},f.context=function(){return this._canvas?this._canvas.getContext("2d"):null},f.pendingImages=function(){return this._loader.pending()},f.render=function(e,t){var n,r=this.context(),a=this._padding,o=this._width+a.left+a.right,s=this._height+a.top+a.bottom;return this._scene=e,r.save(),n=function(e,t){if(!t)return null;var n,r,a,o,s,l=new i;for(n=0,r=t.length;n<r;++n)s=(o=(a=t[n]).mark).group,a=u[o.marktype].nested?o:a,l.union(h(a.bounds,s)),a["bounds:prev"]&&l.union(h(a["bounds:prev"],s));return l.round(),e.beginPath(),e.rect(l.x1,l.y1,l.width(),l.height()),e.clip(),l}(r,t),this.clear(-a.left,-a.top,o,s),this.draw(r,e,n),r.restore(),this._scene=null,this},f.draw=function(e,t,n){u[t.marktype].draw.call(this,e,t,n)},f.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))},f.loadImage=function(e){var t=this,n=this._scene;return this._loader.loadImage(e,function(){t.renderAsync(n)})},f.renderAsync=function(e){var t=this;t._async_id&&clearTimeout(t._async_id),t._async_id=setTimeout(function(){t.render(e),delete t._async_id},10)},e.exports=l},pKLr:function(e,t,n){var r=n("Za4h"),i=n("Hqva"),a=i.Tuple,o=i.ChangeSet,s=n("J731"),u=n("4JPs");function l(e){return u.prototype.init.call(this,e),this._prev=null,this._interactive=!1,this._setup=!0,this._nodes=[],this._links=[],this._layout=r.layout.force(),u.addParameters(this,{size:{type:"array<value>",default:n("MRce").size},bound:{type:"value",default:!0},links:{type:"data"},linkStrength:{type:"value",default:1},linkDistance:{type:"value",default:20},charge:{type:"value",default:-30},chargeDistance:{type:"value",default:1/0},friction:{type:"value",default:.9},theta:{type:"value",default:.8},gravity:{type:"value",default:.1},alpha:{type:"value",default:.1},iterations:{type:"value",default:500},interactive:{type:"value",default:this._interactive},active:{type:"value",default:this._prev},fixed:{type:"data"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var c=l.prototype=Object.create(u.prototype);c.constructor=l,c.transform=function(e,t){s.debug(e,["force"]),t-=e.signals.active?1:0;var n=this.param("interactive"),r=this.param("links").source.last(),i=this.param("active"),o=this._output,u=this._layout,l=this._nodes,c=this._links;if(r.stamp<e.stamp&&(r=null),this.configure(e,r,n,t),!n){for(var f=this.param("iterations"),h=0;h<f;++h)u.tick();u.stop()}return this.update(i),(t||i!==this._prev&&i&&i.update)&&u.alpha(this.param("alpha")),i!==this._prev&&(this._prev=i),e.rem.length&&u.nodes(this._nodes=a.idFilter(l,e.rem)),r&&r.rem.length&&u.links(this._links=a.idFilter(c,r.rem)),e.fields[o.x]=1,e.fields[o.y]=1,e},c.configure=function(e,t,n,r){var i=this._layout,a=this._setup||e.add.length||t&&t.add.length||n!==this._interactive||this.param("charge")!==i.charge()||this.param("linkStrength")!==i.linkStrength()||this.param("linkDistance")!==i.linkDistance();if((a||r)&&i.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction")),a){this._setup=!1,this._interactive=n;var s,u,l=this,c=this._graph,f=this._nodes,h=this._links;for(s=e.add,u=0;u<s.length;++u)f.push({tuple:s[u]});if(t)for(s=t.add,u=0;u<s.length;++u)h.push({tuple:s[u],source:f[s[u].source],target:f[s[u].target]});var d=n?function(){c.propagate(o.create(null,!0),l)}:null;i.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(f).links(h).on("tick",d).start().alpha(this.param("alpha"))}},c.update=function(e){var t,n,r,i,o,s,u=this._output,l=this.param("bound"),c=this.param("fixed"),f=this.param("size"),h=this._nodes,d={};if(c&&c.source)for(n=0,r=(c=c.source.values()).length;n<r;++n)d[c[n].id]=1;for(n=0;n<h.length;++n)t=(i=(r=h[n]).tuple)._id,e&&e.id===t?(r.fixed=1,e.update&&(r.x=r.px=e.x,r.y=r.py=e.y)):r.fixed=d[t]||0,o=l?Math.max(0,Math.min(r.x,f[0])):r.x,s=l?Math.max(0,Math.min(r.y,f[1])):r.y,a.set(i,u.x,o),a.set(i,u.y,s)},e.exports=l,l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Force transform",description:"Performs force-directed layout for network data.",type:"object",properties:{type:{enum:["force"]},size:{description:"The dimensions [width, height] of this force layout.",oneOf:[{type:"array",minItems:2,maxItems:2,items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:[500,500]},links:{type:"string",description:"The name of the link (edge) data set."},linkDistance:{description:"Determines the length of edges, in pixels.",oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],default:20},linkStrength:{oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],description:"Determines the tension of edges (the spring constant).",default:1},charge:{oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],description:"The strength of the charge each node exerts.",default:-30},chargeDistance:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum distance over which charge forces are applied.",default:1/0},iterations:{description:"The number of iterations to run the force directed layout.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:500},friction:{description:"The strength of the friction force used to stabilize the layout.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.9},theta:{description:"The theta parameter for the Barnes-Hut algorithm, which is used to compute charge forces between nodes.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.8},gravity:{description:"The strength of the pseudo-gravity force that pulls nodes towards the center of the layout area.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},alpha:{description:'A "temperature" parameter that determines how much node positions are adjusted at each step.',oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},interactive:{description:"Enables an interactive force-directed layout.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!1},active:{description:"A signal representing the active node.",$ref:"#/refs/signal"},fixed:{description:"The name of a datasource containing the IDs of nodes with fixed positions.",type:"string"},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"}},additionalProperties:!1}},additionalProperties:!1,required:["type","links"]}},pYy3:function(e,t,n){var r=n("zF6n"),i=n("SAbC");function a(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return i.dsv(t.delimiter).parse(e)}a.delimiter=function(e){var t={delimiter:e};return function(e,n){return a(e,n?r.extend(n,t):t)}},e.exports=a},pfe9:function(e,t,n){e.exports={parse:n("eJnU"),render:n("bSC/")}},prMK:function(e,t,n){var r=n("zF6n"),i=n("mgrV"),a=1e-15;function o(e){if(!e)throw Error("Missing binning options.");var t,n,i,a,o,l,c,f=e.maxbins||15,h=e.base||10,d=Math.log(h),p=e.div||[5,2],g=e.min,m=e.max,v=m-g;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,function(e,t,n,i){for(;n<i;){var a=n+i>>>1;r.cmp(e[a],t)<0?n=a+1:i=a}return n}(e.steps,v/f,0,e.steps.length))];else{for(n=Math.ceil(Math.log(f)/d),i=e.minstep||0,t=Math.max(i,Math.pow(h,Math.round(Math.log(v)/d)-n));Math.ceil(v/t)>f;)t*=h;for(l=0;l<p.length;++l)(o=t/p[l])>=i&&v/o<=f&&(t=o)}return a=(o=Math.log(t))>=0?0:1+~~(-o/d),c=Math.pow(h,-a-1),{start:g=Math.min(g,Math.floor(g/t+c)*t),stop:m=Math.ceil(m/t)*t,step:t,unit:{precision:a},value:s,index:u}}function s(e){return this.step*Math.floor(e/this.step+a)}function u(e){return Math.floor((e-this.start)/this.step+a)}function l(e){return this.unit.date(s.call(this,e))}function c(e){return u.call(this,this.unit.unit(e))}o.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?i.utc:i,n=e.min,r=e.max,a=e.maxbins||20,s=e.minbins||4,u=+r-+n,f=e.unit?t[e.unit]:t.find(u,s,a),h=o({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(r),maxbins:a,minstep:f.minstep,steps:f.step});return h.unit=f,h.index=c,e.raw||(h.value=l),h},e.exports=o},pyUU:function(e,t,n){"use strict";var r=n("P/aK"),i=n("QSMf"),a=n("o+e1"),o=n("j8cM"),s=n("ZAUf");t.initMarkConfig=function(e,t,n){return s.extend(["filled","opacity","orient","align"].reduce(function(u,l){var c=n.mark[l];switch(l){case"filled":void 0===c&&(u[l]=e!==o.POINT&&e!==o.LINE&&e!==o.RULE);break;case"opacity":void 0===c&&(s.contains([o.POINT,o.TICK,o.CIRCLE,o.SQUARE],e)&&(i.isAggregate(t)&&!i.has(t,r.DETAIL)||(u[l]=.7)),e===o.AREA&&(u[l]=.7));break;case"orient":var f=a.isMeasure(t.x)||a.isMeasure(t.x2),h=a.isMeasure(t.y)||a.isMeasure(t.y2);f&&!h?e===o.TICK?u[l]="vertical":u[l]="horizontal":!f&&h&&(e===o.TICK?u[l]="horizontal":u[l]="vertical");break;case"align":void 0===c&&(u[l]=i.has(t,r.X)?"center":"right")}return u},{}),n.mark)}},qmQ9:function(e,t,n){var r=n("prMK"),i=n("YsQl"),a=n("ggRp"),o=n("zF6n"),s=n("uHQN"),u={integer:1,number:1,date:1};function l(e){var t=e.type,n=null;return(null==t||u[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?r.date(e):r(e)),n}function c(){var e=arguments,t=0,n=o.isArray(e[t])?e[t++]:null,r=o.isFunction(e[t])||o.isString(e[t])?o.$(e[t++]):null,i=o.extend({},e[t]);if(n&&(i.type=i.type||a(n,r),u[i.type])){var l=s.extent(n,r);i=o.extend({min:l[0],max:l[1]},i)}return r&&(i.accessor=r),i}e.exports={$bin:function(e,t,n){var r=l(n=c(e,t,n));return r?o.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor):n.accessor||o.identity},histogram:function(e,t,n){var r,a,u,f,h,d=l(n=c(e,t,n));return d?function(e,t,n){for(var r,a,s=i.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}}),u=0;u<e.length;++u)if(r=t?t(e[u]):e[u],o.isValid(r)){if((a=n.index(r))<0||a>=s.length||!isFinite(a))continue;s[a].count+=1}return s.bins=n,s}(e,n.accessor,d):(r=e,a=n.accessor,u=n&&n.sort,f=s.unique(r,a),h=s.count.map(r,a),f.map(function(e){return{value:e,count:h[e]}}).sort(o.comparator(u?"-count":"+value")))}}},qnrb:function(e,t,n){var r=n("gWW/");e.exports={draw:function(e,t,n){if(t.items&&t.items.length)for(var i,a,o,s,u,l,c=t.items,f=0,h=c.length;f<h;++f)i=c[f],n&&!n.intersects(i.bounds)||0!==(a=null==i.opacity?1:i.opacity)&&(o=i.x||0,s=i.y||0,u=null!=i.x2?i.x2:o,l=null!=i.y2?i.y2:s,i.stroke&&r.stroke(e,i,a)&&(e.beginPath(),e.moveTo(o,s),e.lineTo(u,l),e.stroke()))},pick:r.pick(function(e,t,n,r){return!!e.isPointInStroke&&(i=e,o=(a=t).x||0,s=a.y||0,u=null!=a.x2?a.x2:o,l=null!=a.y2?a.y2:s,c=a.strokeWidth,f=a.strokeCap,i.lineWidth=null!=c?c:1,i.lineCap=null!=f?f:"butt",i.beginPath(),i.moveTo(o,s),i.lineTo(u,l),e.isPointInStroke(n,r));var i,a,o,s,u,l,c,f})}},r7he:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("Hqva"),o=a.Node,s=a.Tuple,u=a.Dependencies,l={INSERT:"insert",REMOVE:"remove",UPSERT:"upsert",TOGGLE:"toggle",CLEAR:"clear"},c=[];function f(e,t,n,r){var i,a,o,s,u=!0,l=e.length;for(i=n.length-1;i>=0;--i){for(a=0;a<l;++a)if(o=e[a],s=t&&o(t)||t,o(n[i])!==s){u=!1;break}u&&r.push.apply(r,n.splice(i,1)),u=!0}}function h(e,t,n){var r=s.ingest(t);e.add.push(r),n._data.push(r)}function d(e,t,n){var a=t.signal?r.field(t.signal):null,d=a?a[0]:null,p=t.predicate?e.predicate(t.predicate.name||t.predicate):null,g=t.test?e.expr(t.test):null,m=null===p&&null===g,v=t.type===l.CLEAR,y=r.array(t.field||"data"),_=y.map(r.accessor),x=y.map(r.mutator),b=new o(e).router(v);return b.evaluate=function(o){var b,M;if(null!==p&&(b=e.values(u.DATA,p.data||c),M=e.values(u.SIGNALS,p.signals||c),m=p.call(p,{},b,M,e._predicates)),null!==g&&(M=e.values(u.SIGNALS,g.globals||c),m=g.fn()),i.debug(o,[t.type+"ing",m]),!m||!v&&!o.signals[d])return o;var k,S=a?e.signalRef(t.signal):null,E=e.data(n.name),A=null,w=[],T=[],O=0;return r.isObject(S)?(k=S,t.field||(y=r.keys(k),_=y.map(r.accessor),x=y.map(r.mutator))):(k={},x.forEach(function(e){e(k,S)})),t.type===l.INSERT?h(o,k,E):t.type===l.REMOVE?(f(_,S,o.mod,o.rem),f(_,S,o.add,T),f(_,S,E._data,T)):t.type===l.UPSERT?(o.mod.forEach(function(e){_.every(function(t){return t(e)===t(k)})&&(r.extend(e,k),O+=1)}),0===O&&h(o,k,E)):t.type===l.TOGGLE?(f(_,S,o.mod,T),o.rem.push.apply(o.rem,T),f(_,S,o.add,w),w.length||T.length?E._data=E._data.filter(function(e){return T.indexOf(e)<0&&w.indexOf(e)<0}):(o.add.push(A=s.ingest(k)),E._data.push(A))):t.type===l.CLEAR&&(o.rem.push.apply(o.rem,o.mod.splice(0)),o.add.splice(0),E._data.splice(0)),y.forEach(function(e){o.fields[e]=1}),o},d&&b.dependency(u.SIGNALS,d),p&&(b.dependency(u.DATA,p.data),b.dependency(u.SIGNALS,p.signals)),g&&(b.dependency(u.SIGNALS,g.globals),b.dependency(u.DATA,g.dataSources)),b}e.exports=d,d.schema={defs:{modify:{type:"array",items:{type:"object",oneOf:[{properties:{type:{enum:[l.INSERT,l.REMOVE,l.UPSERT,l.TOGGLE]},signal:{type:"string"},field:{type:"string"}},required:["type","signal"]},{properties:{type:{enum:[l.CLEAR]},predicate:{type:"string"}},required:["type","predicate"]},{properties:{type:{enum:[l.CLEAR]},test:{type:"string"}},required:["type","test"]}]}}}}},rCVn:function(e,t,n){var r=n("Hqva").Tuple,i=n("J731"),a=n("4JPs");function o(e){return a.prototype.init.call(this,e),a.addParameters(this,{sourceX:{type:"field",default:"_source.layout_x"},sourceY:{type:"field",default:"_source.layout_y"},targetX:{type:"field",default:"_target.layout_x"},targetY:{type:"field",default:"_target.layout_y"},tension:{type:"value",default:.2},shape:{type:"value",default:"line"}}),this._output={path:"layout_path"},this.mutates(!0)}var s=o.prototype=Object.create(a.prototype);s.constructor=o;var u={line:function(e,t,n,r){return"M"+e+","+t+"L"+n+","+r},curve:function(e,t,n,r,i){var a=n-e,o=r-t,s=i*(a+o),u=i*(o-a);return"M"+e+","+t+"C"+(e+s)+","+(t+u)+" "+(n+u)+","+(r-s)+" "+n+","+r},cornerX:function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},cornerY:function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},cornerR:function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*o+","+t*s+"L"+r*o+","+r*s},diagonalX:function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},diagonalY:function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},diagonalR:function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*a+"C"+u*i+","+u*a+" "+u*o+","+u*s+" "+r*o+","+r*s}};s.transform=function(e){i.debug(e,["linkpath"]);var t=this._output,n=u[this.param("shape")]||u.line,a=this.param("sourceX").accessor,o=this.param("sourceY").accessor,s=this.param("targetX").accessor,l=this.param("targetY").accessor,c=this.param("tension");function f(e){var i=n(a(e),o(e),s(e),l(e),c);r.set(e,t.path,i)}return e.add.forEach(f),this.reevaluate(e)&&(e.mod.forEach(f),e.rem.forEach(f)),e.fields[t.path]=1,e},e.exports=o,o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"LinkPath transform",description:"Computes a path definition for connecting nodes within a node-link network or tree diagram.",type:"object",properties:{type:{enum:["linkpath"]},sourceX:{description:"The data field that references the source x-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_source"},sourceY:{description:"The data field that references the source y-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_source"},targetX:{description:"The data field that references the target x-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_target"},targetY:{description:"The data field that references the target y-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_target"},tension:{description:'A tension parameter for the "tightness" of "curve"-shaped links.',oneOf:[{type:"number",minimum:0,maximum:1},{$ref:"#/refs/signal"}],default:.2},shape:{description:"The path shape to use",oneOf:[{enum:["line","curve","cornerX","cornerY","cornerR","diagonalX","diagonalY","diagonalR"]},{$ref:"#/refs/signal"}],default:"line"},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},rKP5:function(e,t,n){"use strict";var r,i=n("P/aK"),a=n("o+e1"),o=n("MtYt");!function(e){e.markType=function(){return"symbol"},e.properties=function(e,t){var n={},r=e.config();return n.x=(c=e.encoding().x,f=e.scaleName(i.X),h=r,c&&c.field?{scale:f,field:a.field(c,{binSuffix:"_mid"})}:{value:h.scale.bandSize/2}),n.y=(s=e.encoding().y,u=e.scaleName(i.Y),l=r,s&&s.field?{scale:u,field:a.field(s,{binSuffix:"_mid"})}:{value:l.scale.bandSize/2}),n.size=function(e,t,n,r){if(e){if(e.field)return{scale:t,field:a.field(e,{scaleType:n.type})};if(void 0!==e.value)return{value:e.value}}return{value:r.mark.size}}(e.encoding().size,e.scaleName(i.SIZE),e.scale(i.SIZE),r),n.shape=function(e,t,n,r,i){if(i)return{value:i};if(e){if(e.field)return{scale:t,field:a.field(e,{scaleType:n.type})};if(e.value)return{value:e.value}}return{value:r.mark.shape}}(e.encoding().shape,e.scaleName(i.SHAPE),e.scale(i.SHAPE),r,t),o.applyColorAndOpacity(n,e),n;var s,u,l;var c,f,h}}(r=t.point||(t.point={})),function(e){e.markType=function(){return"symbol"},e.properties=function(e){return r.properties(e,"circle")},e.labels=function(e){}}(t.circle||(t.circle={})),function(e){e.markType=function(){return"symbol"},e.properties=function(e){return r.properties(e,"square")},e.labels=function(e){}}(t.square||(t.square={}))},rVSZ:function(e,t,n){var r=n("Za4h"),i=n("YzNj").util.mutator;function a(e,t){var n=e.append("input").on("input",c);for(var r in t)"signal"!==r&&"rewrite"!==r&&n.attr(r,t[r]);n.attr("name",t.signal);var i=n.node();return{dom:[i],set:function(e){i.value=e}}}function o(e,t){var n=e.append("input").on("change",function(){c.call(this,this.checked)}).attr("type","checkbox").attr("name",t.signal).attr("checked",t.value||null).node();return{dom:[n],set:function(e){n.checked=!!e||null}}}function s(e,t){var n=e.append("select").attr("name",t.signal).on("change",function(){c.call(this,this.options[this.selectedIndex].__data__)});n.selectAll("option").data(t.options).enter().append("option").attr("value",vg.util.identity).attr("selected",function(e){return e===t.value||null}).text(vg.util.identity);var r=n.node();return{dom:[r],set:function(e){var n=t.options.indexOf(e);r.selectedIndex=n}}}function u(e,t){var n=e.append("span").attr("class","vega-param-radio"),r=t.options.map(function(e){var r="vega-option-"+t.signal+"-"+e,i=n.append("input").datum(e).on("change",c).attr("id",r).attr("type","radio").attr("name",t.signal).attr("value",e).attr("checked",e===t.value||null);return n.append("label").attr("for",r).text(e),i.node()});return{dom:r,set:function(e){for(var t=0;t<r.length;++t)r[t].value===e&&(r[t].checked=!0)}}}function l(e,t){var n=void 0!==t.value?t.value:(+t.max+ +t.min)/2,r=e.append("input").on("input",function(){i.text(this.value),c.call(this,+this.value)}).attr("type","range").attr("name",t.signal).attr("value",n).attr("min",t.min).attr("max",t.max).attr("step",t.step||vg.util.bins({min:t.min,max:t.max,maxbins:100}).step),i=e.append("label").attr("class","vega-range").text(n),a=r.node();return{dom:[a],set:function(e){a.value=e,i.text(e)}}}function c(e){void 0===e&&(e=this.__data__||r.event.target.value),this.__vega__.signal(this.name,e).update()}e.exports={init:function(e,t,n){return function(e,t){for(var n=t.signals||(t.signals=[]),r=0;r<n.length&&n[r].name!==e.signal;++r);r===n.length&&n.push({name:e.signal,init:e.value});(e.rewrite||[]).forEach(function(n){i(n)(t,{signal:e.signal})})}(t,n),function(e,t){var n=e.append("div").attr("class","vega-param");n.append("span").attr("class","vega-param-name").text(t.name||t.signal);var r=a;switch(t.type){case"checkbox":r=o;break;case"select":r=s;break;case"radio":r=u;break;case"range":r=l}return r(n,t)}(e,t)},bind:function(e,t){e.dom.forEach(function(e){e.__vega__=t}),t.onSignal(e.dom[0].name,function(t,n){e.set(n)})}}},rfWk:function(e,t,n){var r=n("3Scv"),i=n("zhsD"),a=i.symbolTypes,o=i.textAlign,s=i.path;function u(e){return l(e.x||0,e.y||0)}function l(e,t){return"translate("+e+","+t+")"}e.exports={arc:{tag:"path",type:"arc",attr:function(e,t){e("transform",u(t)),e("d",s.arc(t))}},area:{tag:"path",type:"area",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",s.area(n))}},group:{tag:"g",type:"group",attr:function(e,t,n){var r,i,a=null;e("transform",u(t)),t.clip&&(r=n._defs,a=t.clip_id||(t.clip_id="clip"+r.clip_id++),(i=r.clipping[a]||(r.clipping[a]={id:a})).width=t.width||0,i.height=t.height||0),e("clip-path",a?"url(#"+a+")":null)},background:function(e,t){e("class","background"),e("width",t.width||0),e("height",t.height||0)}},image:{tag:"image",type:"image",attr:function(e,t,n){var r=t.x||0,i=t.y||0,a=t.width||0,o=t.height||0,s=n.imageURL(t.url);r-="center"===t.align?a/2:"right"===t.align?a:0,i-="middle"===t.baseline?o/2:"bottom"===t.baseline?o:0,e("href",s,"http://www.w3.org/1999/xlink","xlink:href"),e("transform",l(r,i)),e("width",a),e("height",o)}},line:{tag:"path",type:"line",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",s.line(n))}},path:{tag:"path",type:"path",attr:function(e,t){e("transform",u(t)),e("d",t.path)}},rect:{tag:"rect",type:"rect",nest:!1,attr:function(e,t){e("transform",u(t)),e("width",t.width||0),e("height",t.height||0)}},rule:{tag:"line",type:"rule",attr:function(e,t){e("transform",u(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(e,t){var n=!t.shape||a[t.shape]?s.symbol(t):s.resize(t.shape,t.size);e("transform",u(t)),e("d",n)}},text:{tag:"text",type:"text",nest:!1,attr:function(e,t){var n,i=t.dx||0,a=(t.dy||0)+r.offset(t),s=t.x||0,u=t.y||0,c=t.angle||0,f=t.radius||0;f&&(n=(t.theta||0)-Math.PI/2,s+=f*Math.cos(n),u+=f*Math.sin(n)),e("text-anchor",o[t.align]||"start"),c?(n=l(s,u)+" rotate("+c+")",(i||a)&&(n+=" "+l(i,a))):n=l(s+i,u+a),e("transform",n)}}}},rnWk:function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=n("LHV8"),o=i.Node,s=n("J731"),u=a.bound,l=a.Bounds,c=n("XVii");function f(e,t){return this._mark=t,o.prototype.init.call(this,e).router(!0).reflows(!0).mutates(!0)}(f.prototype=new o).evaluate=function(e){s.debug(e,["bounds",this._mark.marktype]);var t,n,a,o,f,h,d=this._mark,p=d.marktype,g="group"===p,m=d.items,v=r.array(d.def.legends).length>0,y=d.bounds,_=!y||e.rem.length;if("line"===p||"area"===p)u.mark(d,null,g&&!v);else if(e.add.forEach(function(e){u.item(e),_=_||y&&!y.encloses(e.bounds)}),e.mod.forEach(function(e){_=_||y&&y.alignsWith(e.bounds),u.item(e)}),_)for(y=d.bounds&&d.bounds.clear()||(d.bounds=new l),t=0,n=m.length;t<n;++t)y.union(m[t].bounds);if(g&&v){for(t=0,n=m.length;t<n;++t)for((f=m[t])._legendPositions=null,a=0,o=f.legendItems.length;a<o;++a)h=f.legendItems[a],c.update(this._graph,e.trans,"legendPosition",h.items,e.dirty),u.mark(h,null,!1);u.mark(d,null,!0)}return i.ChangeSet.create(e,!0)},e.exports=f},sV93:function(e,t){e.exports={find:function(e,t){t=t.toLowerCase();for(var n=0,r=e.childNodes.length;n<r;++n)if(e.childNodes[n].tagName.toLowerCase()===t)return e.childNodes[n]},child:function(e,t,n,r,i,a){var o,s,u,l,c;return(!(o=s=e.childNodes[t])||a||o.tagName.toLowerCase()!==n.toLowerCase()||i&&o.getAttribute("class")!=i)&&(u=e.ownerDocument,l=n,o=(c=r)?u.createElementNS(c,l):u.createElement(l),e.insertBefore(o,s||null),i&&o.setAttribute("class",i)),o},clear:function(e,t){for(var n=e.childNodes.length;n>t;)e.removeChild(e.childNodes[--n]);return e},remove:function e(t){if(t){var n=t.parentNode;n&&(n.removeChild(t),n.childNodes&&n.childNodes.length||e(n))}},cssClass:function(e){return"mark-"+e.marktype+(e.name?" "+e.name:"")},openTag:function(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"},closeTag:function(e){return"</"+e+">"}}},snBf:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva").Tuple,o=n("J731"),s=n("ct8e"),u=n("4JPs");function l(e){return u.prototype.init.call(this,e),u.addParameters(this,s.Parameters),u.addParameters(this,{field:{type:"field",default:null}}),this._output={path:"layout_path"},this.mutates(!0)}var c=l.prototype=Object.create(u.prototype);c.constructor=l,c.transform=function(e){o.debug(e,["geopath"]);var t=this._output,n=this.param("field").accessor||i.identity,u=s.d3Projection.call(this),l=r.geo.path().projection(u);function c(e){a.set(e,t.path,l(n(e)))}return e.add.forEach(c),this.reevaluate(e)&&(e.mod.forEach(c),e.rem.forEach(c)),e.fields[t.path]=1,e},e.exports=l,l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"GeoPath transform",description:"Creates paths for geographic regions, such as countries, states and counties.",type:"object",properties:i.extend({type:{enum:["geopath"]},field:{description:"The data field containing GeoJSON Feature data.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:!1}},s.baseSchema),required:["type"],additionalProperties:!1}},t3C9:function(e,t,n){"use strict";var r=n("ZAUf"),i={nominal:!1,ordinal:!1,quantitative:!0,temporal:!0};!function(e){function t(e){var t=e.transform().filterNull;return e.reduce(function(e,n){return t||void 0===t&&n.field&&"*"!==n.field&&i[n.type]?e[n.field]=!0:e[n.field]=!1,e},{})}e.parseUnit=t,e.parseFacet=function(e){var n=t(e),i=e.child().component.data;return i.source||(r.extend(n,i.nullFilter),delete i.nullFilter),n},e.parseLayer=function(e){var n=t(e);return e.children().forEach(function(t){var i=t.component.data;e.compatibleSource(t)&&!r.differ(i.nullFilter,n)&&(r.extend(n,i.nullFilter),delete i.nullFilter)}),n},e.assemble=function(e){var t=r.keys(e.nullFilter).filter(function(t){return e.nullFilter[t]});return t.length>0?[{type:"filter",test:t.map(function(e){return"(datum."+e+"!==null && !isNaN(datum."+e+"))"}).join(" && ")}]:[]}}(t.nullFilter||(t.nullFilter={}))},tGq9:function(e,t,n){var r=n("zF6n"),i=n("2I0S"),a=n("/2vj");function o(){this._cells={},this._aggr=[],this._stream=!1}var s=o.Flags={ADD_CELL:1,MOD_CELL:2},u=o.prototype;u.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},u.key=function(e){return null==e?this._key:(this._key=r.$(e),this)},u.groupby=function(e){return this._dims=r.array(e).map(function(e,t){if(null==(e=r.isString(e)?{name:e,get:r.$(e)}:r.isFunction(e)?{name:r.name(e)||e.name||"_"+t,get:e}:e.name&&r.isFunction(e.get)?e:null))throw"Invalid groupby argument: "+e;return e}),this.clear()},u.summarize=function(e){e=function(e){if(r.isArray(e))return e;if(null==e)return[];var t,n,i=[];for(t in e)n=r.array(e[t]),i.push({name:t,ops:n});return i}(e),this._count=!0;var t,n,a,o,s,u,l,c=this._aggr=[];for(a=0;a<e.length;++a){for(o=0,t=[],n=e[a];o<n.ops.length;++o)"count"!==(s=n.ops[o])&&(this._count=!1),u=n.as&&n.as[o]||s+("*"===n.name?"":"_"+n.name),t.push(i[s](u));l=n.get&&r.$(n.get)||("*"===n.name?r.identity:r.$(n.name)),c.push({name:n.name,measures:i.create(t,this._stream,l,this._assign)})}return this.clear()},u.count=function(){return this.summarize({"*":"count"})},u._assign=function(e,t,n){e[t]=n},u.clear=function(){return this._cells={},this},u._cellkey=function(e){var t,n=this._dims,r=n.length,i=String(n[0].get(e));for(t=1;t<r;++t)i+="|"+n[t].get(e);return i},u._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))},u._newcell=function(e,t){var n,r={num:0,tuple:this._newtuple(e,t),flag:s.ADD_CELL,aggs:{}},i=this._aggr;for(n=0;n<i.length;++n)r.aggs[i[n].name]=new i[n].measures(r,r.tuple);return r.collect&&(r.data=new a(this._key)),r},u._newtuple=function(e){var t,n,r=this._dims,i={};for(t=0,n=r.length;t<n;++t)i[r[t].name]=r[t].get(e);return this._ingest(i)},u._ingest=r.identity,u._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=s.MOD_CELL,this._on_add&&this._on_add(e,n)},u._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=s.MOD_CELL,this._on_rem&&this._on_rem(e,n)},u._mod=function(e,t){var n,i=this._cell(t),a=this._cell(e),o=this._aggr;for(i!==a?(i.num-=1,a.num+=1,i.collect&&i.data.rem(t),a.collect&&a.data.add(e)):i.collect&&!r.isObject(e)&&(i.data.rem(t),i.data.add(e)),n=0;n<o.length;++n)i.aggs[o[n].name].rem(t),a.aggs[o[n].name].add(e);i.flag|=s.MOD_CELL,a.flag|=s.MOD_CELL,this._on_mod&&this._on_mod(e,t,i,a)},u._markMod=function(e){this._cell(e).flag|=s.MOD_CELL},u.result=function(){var e,t,n,r=[],i=this._aggr;for(n in this._cells){if((e=this._cells[n]).num>0){for(e.collect&&e.data.values(),t=0;t<i.length;++t)e.aggs[i[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},u.changes=function(e){var t,n,r,i,a=e||{add:[],rem:[],mod:[]},o=this._aggr;for(i in this._cells){for(n=(t=this._cells[i]).flag,t.collect&&t.data.values(),r=0;r<o.length;++r)t.aggs[o[r].name].set();t.num<=0?(a.rem.push(t.tuple),delete this._cells[i],this._on_drop&&this._on_drop(t)):(this._on_keep&&this._on_keep(t),n&s.ADD_CELL?a.add.push(t.tuple):n&s.MOD_CELL&&a.mod.push(t.tuple)),t.flag=0}return this._rems=!1,a},u.execute=function(e){return this.clear().insert(e).result()},u.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},u.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},u._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}},e.exports=o},uHQN:function(e,t,n){var r=n("zF6n"),i=n("ggRp"),a=n("YsQl"),o=e.exports;function s(e,t,n){var r=e&&e.nullh||0,i=a.random.normal(0,1),s=o.mean(t,n),u=o.stdev(t,n)/Math.sqrt(o.count.valid(t,n));if(0===u)return s-r==0?1:0;var l=(s-r)/u;return 2*i.cdf(-Math.abs(l))}function u(e,t,n,i){var a,s=i?t.map(r.$(n)):t,u=i?t.map(r.$(i)):n,l=o.count(s),c=o.count(u),f=Array();if(l!==c)throw Error("Array lengths must match.");for(a=0;a<l;++a)r.isValid(s[a])&&r.isValid(u[a])&&f.push(s[a]-u[a]);return o.z.test(f,e&&e.nullh||0)}function l(e,t,n,i){var s=i?t.map(r.$(n)):t,u=i?t.map(r.$(i)):n,l=o.count.valid(s),c=o.count.valid(u),f=a.random.normal(0,1),h=o.mean(s)-o.mean(u)-(e&&e.nullh||0),d=Math.sqrt(o.variance(s)/l+o.variance(u)/c);if(0===d)return 0===h?1:0;var p=h/d;return 2*f.cdf(-Math.abs(p))}o.unique=function(e,t,n){t=r.$(t),n=n||[];var i,a,o,s={};for(a=0,o=e.length;a<o;++a)(i=t?t(e[a]):e[a])in s||(s[i]=1,n.push(i));return n},o.count=function(e){return e&&e.length||0},o.count.valid=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;i<a;++i)n=t?t(e[i]):e[i],r.isValid(n)&&(o+=1);return o},o.count.missing=function(e,t){t=r.$(t);var n,i,a=0;for(n=0,i=e.length;n<i;++n)null==(t?t(e[n]):e[n])&&(a+=1);return a},o.count.distinct=function(e,t){t=r.$(t);var n,i,a,o={},s=0;for(i=0,a=e.length;i<a;++i)(n=t?t(e[i]):e[i])in o||(o[n]=1,s+=1);return s},o.count.map=function(e,t){t=r.$(t);var n,i,a,o={};for(i=0,a=e.length;i<a;++i)o[n=t?t(e[i]):e[i]]=n in o?o[n]+1:1;return o},o.median=function(e,t){return t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp),o.quantile(e,.5)},o.quartile=function(e,t){t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp);var n=o.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},o.quantile=function(e,t,n){void 0===n&&(n=t,t=r.identity),t=r.$(t);var i=(e.length-1)*n+1,a=Math.floor(i),o=+t(e[a-1]),s=i-a;return s?o+s*(t(e[a])-o):o},o.sum=function(e,t){t=r.$(t);for(var n,i=0,a=0,o=e.length;a<o;++a)n=t?t(e[a]):e[a],r.isValid(n)&&(i+=n);return i},o.mean=function(e,t){t=r.$(t);var n,i,a,o,s=0;for(n=0,a=0,i=e.length;n<i;++n)o=t?t(e[n]):e[n],r.isValid(o)&&(s+=(o-s)/++a);return s},o.mean.geometric=function(e,t){t=r.$(t);var n,i,a,o,s=1;for(o=0,n=0,i=e.length;o<i;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){if(a<=0)throw Error("Geometric mean only defined for positive values.");s*=a,++n}return s=n>0?Math.pow(s,1/n):0},o.mean.harmonic=function(e,t){t=r.$(t);var n,i,a,o,s=0;for(o=0,n=0,i=e.length;o<i;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(s+=1/a,++n);return n/s},o.variance=function(e,t){if(t=r.$(t),!r.isArray(e)||e.length<2)return 0;var n,i,a,o,s=0,u=0;for(i=0,a=0;i<e.length;++i)o=t?t(e[i]):e[i],r.isValid(o)&&(u+=(n=o-s)*(o-(s+=n/++a)));return u/=a-1},o.stdev=function(e,t){return Math.sqrt(o.variance(e,t))},o.modeskew=function(e,t){var n=o.mean(e,t),r=o.median(e,t),i=o.stdev(e,t);return 0===i?0:(n-r)/i},o.min=function(e,t){return o.extent(e,t)[0]},o.max=function(e,t){return o.extent(e,t)[1]},o.extent=function(e,t){t=r.$(t);var n,i,a,o,s=e.length;for(o=0;o<s;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){n=i=a;break}for(;o<s;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(a<n&&(n=a),a>i&&(i=a));return[n,i]},o.extent.index=function(e,t){t=r.$(t);var n,i,a,o,s=-1,u=-1,l=e.length;for(o=0;o<l;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){n=i=a,s=u=o;break}for(;o<l;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(a<n&&(n=a,s=o),a>i&&(i=a,u=o));return[s,u]},o.dot=function(e,t,n){var i,a,o=0;if(n)for(t=r.$(t),n=r.$(n),i=0;i<e.length;++i)(a=t(e[i])*n(e[i]))==a&&(o+=a);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(i=0;i<e.length;++i)(a=e[i]*t[i])==a&&(o+=a)}return o},o.dist=function(e,t,n,i){var a,o,s=r.isFunction(n)||r.isString(n),u=e,l=s?e:t,c=s?i:n,f=2===c||null==c,h=e.length,d=0;for(s&&(t=r.$(t),n=r.$(n)),o=0;o<h;++o)a=s?t(u[o])-n(l[o]):u[o]-l[o],d+=f?a*a:Math.pow(Math.abs(a),c);return f?Math.sqrt(d):Math.pow(d,1/c)},o.cohensd=function(e,t,n){var i=n?e.map(r.$(t)):e,a=n?e.map(r.$(n)):t,s=o.mean(i),u=o.mean(a),l=o.count.valid(i),c=o.count.valid(a);if(l+c-2<=0)return 0;var f=o.variance(i),h=o.variance(a),d=Math.sqrt(((l-1)*f+(c-1)*h)/(l+c-2));return 0===d?0:(s-u)/d},o.covariance=function(e,t,n){var i,a,s,u,l,c=n?e.map(r.$(t)):e,f=n?e.map(r.$(n)):t,h=c.length,d=o.mean(c),p=o.mean(f),g=0,m=0;if(h!==f.length)throw Error("Input lengths must match.");for(i=0;i<h;++i)if(a=c[i],u=r.isValid(a),s=f[i],l=r.isValid(s),u&&l)g+=(a-d)*(s-p),++m;else if(u||l)throw Error("Valid values must align.");return g/(m-1)},o.rank=function(e,t){t=r.$(t)||r.identity;var n,i,a,o=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(r.comparator("val")),s=e.length,u=Array(s),l=-1,c={};for(n=0;n<s;++n){if(i=o[n].val,l<0&&c===i)l=n-1;else if(l>-1&&c!==i){for(a=1+(n-1+l)/2;l<n;++l)u[o[l].idx]=a;l=-1}u[o[n].idx]=n+1,c=i}if(l>-1)for(a=1+(s-1+l)/2;l<s;++l)u[o[l].idx]=a;return u},o.cor=function(e,t,n){var i=n;n=i?e.map(r.$(n)):t,t=i?e.map(r.$(t)):e;var a=o.dot(t,n),s=o.mean(t),u=o.mean(n),l=o.stdev(t),c=o.stdev(n),f=e.length;return(a-f*s*u)/((f-1)*l*c)},o.cor.rank=function(e,t,n){var r,i,a,s=n?o.rank(e,t):o.rank(e),u=n?o.rank(e,n):o.rank(t),l=e.length;for(r=0,i=0;r<l;++r)i+=(a=s[r]-u[r])*a;return 1-6*i/(l*(l*l-1))},o.cor.dist=function(e,t,n){var i,a,s,u,l=n?e.map(r.$(t)):e,c=n?e.map(r.$(n)):t,f=o.dist.mat(l),h=o.dist.mat(c),d=f.length;for(i=0,a=0,s=0,u=0;i<d;++i)a+=f[i]*f[i],s+=h[i]*h[i],u+=f[i]*h[i];return Math.sqrt(u/Math.sqrt(a*s))},o.linearRegression=function(e,t,n){var i,a,s=n?e.map(r.$(t)):e,u=n?e.map(r.$(n)):t,l=s.length,c=o.covariance(s,u),f=o.stdev(s),h=o.stdev(u),d=c/(f*f),p=o.mean(u)-d*o.mean(s),g={slope:d,intercept:p,R:c/(f*h),rss:0};for(a=0;a<l;++a)r.isValid(s[a])&&r.isValid(u[a])&&(i=d*s[a]+p-u[a],g.rss+=i*i);return g},o.bootstrap={},o.bootstrap.ci=function(e,t,n,i,s){var u,l,c,f,h,d,p;for(r.isFunction(t)||r.isString(t)?(u=e.map(r.$(t)),l=n,c=i,f=s):(u=e,l=t,c=n,f=i),l=l?+l:1e3,c=c||.05,h=a.random.bootstrap(u,f),p=0,d=Array(l);p<l;++p)d[p]=o.mean(h.samples(u.length));return d.sort(r.numcmp),[o.quantile(d,c/2),o.quantile(d,1-c/2)]},o.z={},o.z.ci=function(e,t,n){var i=e,s=t;(r.isFunction(t)||r.isString(t))&&(i=e.map(r.$(t)),s=n);var u=.05===(s=s||.05)?1.96:a.random.normal(0,1).icdf(1-s/2),l=o.mean(i),c=o.stdev(i)/Math.sqrt(o.count.valid(i));return[l-u*c,l+u*c]},o.z.test=function(e,t,n,i){return r.isFunction(n)||r.isString(n)?(i&&i.paired?u:l)(i,e,t,n):r.isArray(t)?(n&&n.paired?u:l)(n,e,t):r.isFunction(t)||r.isString(t)?s(n,e,t):s(t,e)},o.dist.mat=function(e){var t,n,r,i=e.length,o=i*i,s=Array(o),u=a.zeros(i),l=0;for(n=0;n<i;++n)for(s[n*i+n]=0,r=n+1;r<i;++r)s[n*i+r]=t=Math.abs(e[n]-e[r]),s[r*i+n]=t,u[n]+=t,u[r]+=t;for(n=0;n<i;++n)l+=u[n],u[n]/=i;for(l/=o,n=0;n<i;++n)for(r=n;r<i;++r)s[n*i+r]+=l-u[n]-u[r],s[r*i+n]=s[n*i+r];return s},o.entropy=function(e,t){t=r.$(t);var n,i,a=0,o=0,s=e.length;for(n=0;n<s;++n)a+=t?t(e[n]):e[n];if(0===a)return 0;for(n=0;n<s;++n)(i=(t?t(e[n]):e[n])/a)&&(o+=i*Math.log(i));return-o/Math.LN2},o.mutual=function(e,t,n,i){var a,o,s,u=i?e.map(r.$(t)):e,l=i?e.map(r.$(n)):t,c=i?e.map(r.$(i)):n,f={},h={},d=c.length,p=0,g=0,m=0;for(s=0;s<d;++s)f[u[s]]=0,h[l[s]]=0;for(s=0;s<d;++s)f[u[s]]+=c[s],h[l[s]]+=c[s],p+=c[s];for(o=1/(p*Math.LN2),s=0;s<d;++s)0!==c[s]&&(a=p*c[s]/(f[u[s]]*h[l[s]]),g+=c[s]*o*Math.log(a),m+=c[s]*o*Math.log(c[s]/p));return[g,1+g/m]},o.mutual.info=function(e,t,n,r){return o.mutual(e,t,n,r)[0]},o.mutual.dist=function(e,t,n,r){return o.mutual(e,t,n,r)[1]},o.profile=function(e,t){var n,a,s,u,l,c=0,f=0,h=0,d=0,p=null,g=null,m=0,v=[],y={};for(s=0;s<e.length;++s)y[u=t?t(e[s]):e[s]]=u in y?y[u]+1:(d+=1,1),null==u?++h:r.isValid(u)&&(l="string"==typeof u?u.length:u,(null===p||l<p)&&(p=l),(null===g||l>g)&&(g=l),m+=(n=l-c)*(l-(c+=n/++f)),v.push(l));return m/=f-1,a=Math.sqrt(m),v.sort(r.cmp),{type:i(e,t),unique:y,count:e.length,valid:f,missing:h,distinct:d,min:p,max:g,mean:c,stdev:a,median:u=o.quantile(v,.5),q1:o.quantile(v,.25),q3:o.quantile(v,.75),modeskew:0===a?0:(c-u)/a}},o.summary=function(e,t){var n=(t=t||r.keys(e[0])).map(function(t){var n=o.profile(e,r.$(t));return n.field=t,n});return n.__summary__=!0,n}},v0Fq:function(e,t,n){var r=n("zicW"),i={};r.extend(i,n("hv1v")),e.exports=r.extend(i,r)},v4pi:function(e,t,n){var r=n("CXWl");function i(e,t,n,i){(t||[]).forEach(function(t,a){n[a]=n[a]||r(e),function(e,t,n,r){n.size(e.size?r.scale(e.size):null),n.shape(e.shape?r.scale(e.shape):null),n.fill(e.fill?r.scale(e.fill):null),n.stroke(e.stroke?r.scale(e.stroke):null),n.opacity(e.opacity?r.scale(e.opacity):null),e.orient&&n.orient(e.orient);null!=e.offset&&n.offset(e.offset);n.title(e.title||null),n.values(e.values||null),n.format(void 0!==e.format?e.format:null),n.formatType(e.formatType||null);var i=e.properties;n.titleProperties(i&&i.title||{}),n.labelProperties(i&&i.labels||{}),n.legendProperties(i&&i.legend||{}),n.symbolProperties(i&&i.symbols||{}),n.gradientProperties(i&&i.gradient||{})}(t,0,n[a],i)})}e.exports=i,i.schema={defs:{legend:{type:"object",properties:{size:{type:"string"},shape:{type:"string"},fill:{type:"string"},stroke:{type:"string"},opacity:{type:"string"},orient:{enum:["left","right"],default:"right"},offset:{type:"number"},title:{type:"string"},values:{type:"array"},format:{type:"string"},formatType:{enum:["time","utc","string","number"]},properties:{type:"object",properties:{title:{$ref:"#/defs/propset"},labels:{$ref:"#/defs/propset"},legend:{$ref:"#/defs/propset"},symbols:{$ref:"#/defs/propset"},gradient:{$ref:"#/defs/propset"}},additionalProperties:!1}},additionalProperties:!1,anyOf:[{required:["size"]},{required:["shape"]},{required:["fill"]},{required:["stroke"]},{required:["opacity"]}]}}}},vA75:function(e,t,n){"use strict"},vY52:function(e,t,n){"use strict";var r=n("P/aK"),i=n("WJ2w"),a=n("ZAUf");!function(e){e.parseUnit=function(e){var t={};return e.has(r.COLOR)&&e.fieldDef(r.COLOR).type===i.ORDINAL&&(t[e.field(r.COLOR)]=[{type:"sort",by:e.field(r.COLOR)},{type:"rank",field:e.field(r.COLOR),output:{rank:e.field(r.COLOR,{prefn:"rank_"})}}]),t},e.parseFacet=function(e){var t=e.child().component.data;if(!t.source){var n=t.colorRank;return delete t.colorRank,n}return{}},e.parseLayer=function(e){var t={};return e.children().forEach(function(e){var n=e.component.data;n.source||(a.extend(t,n.colorRank),delete n.colorRank)}),t},e.assemble=function(e){return a.flatten(a.vals(e.colorRank))}}(t.colorRank||(t.colorRank={}))},wKIX:function(e,t,n){"use strict";var r=n("ZAUf"),i=n("P/aK"),a=n("z5TJ");t.smallestUnit=function(e){if(e)return a.containsTimeUnit(e,a.TimeUnit.SECONDS)?"second":a.containsTimeUnit(e,a.TimeUnit.MINUTES)?"minute":a.containsTimeUnit(e,a.TimeUnit.HOURS)?"hour":a.containsTimeUnit(e,a.TimeUnit.DAY)||a.containsTimeUnit(e,a.TimeUnit.DATE)?"day":a.containsTimeUnit(e,a.TimeUnit.MONTH)?"month":a.containsTimeUnit(e,a.TimeUnit.YEAR)?"year":void 0},t.parseExpression=function(e,t,n){void 0===n&&(n=!1);var r="datetime(";function i(e,r){return void 0===r&&(r=!0),n?t+(r?", ":""):("quarter"===e?"floor(month("+t+")/3)*3":e+"("+t+")")+(r?", ":"")}return a.containsTimeUnit(e,a.TimeUnit.YEAR)?r+=i("year"):r+="2006, ",a.containsTimeUnit(e,a.TimeUnit.MONTH)?r+=i("month"):a.containsTimeUnit(e,a.TimeUnit.QUARTER)?r+=i("quarter"):r+="0, ",a.containsTimeUnit(e,a.TimeUnit.DAY)?r+=i("day",!1)+"+1, ":a.containsTimeUnit(e,a.TimeUnit.DATE)?r+=i("date"):r+="1, ",a.containsTimeUnit(e,a.TimeUnit.HOURS)?r+=i("hours"):r+="0, ",a.containsTimeUnit(e,a.TimeUnit.MINUTES)?r+=i("minutes"):r+="0, ",a.containsTimeUnit(e,a.TimeUnit.SECONDS)?r+=i("seconds"):r+="0, ",a.containsTimeUnit(e,a.TimeUnit.MILLISECONDS)?r+=i("milliseconds",!1):r+="0",r+")"},t.rawDomain=function(e,t){if(r.contains([i.ROW,i.COLUMN,i.SHAPE,i.COLOR],t))return null;switch(e){case a.TimeUnit.SECONDS:case a.TimeUnit.MINUTES:return r.range(0,60);case a.TimeUnit.HOURS:return r.range(0,24);case a.TimeUnit.DAY:return r.range(0,7);case a.TimeUnit.DATE:return r.range(1,32);case a.TimeUnit.MONTH:return r.range(0,12);case a.TimeUnit.QUARTER:return[0,3,6,9]}return null}},"wLy+":function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){return s.prototype.init.call(this,e),o.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value",default:"zero"}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}var l=u.prototype=Object.create(s.prototype);l.constructor=u,l.batchTransform=function(e,t){a.debug(e,["stacking"]);for(var n=this.param("groupby").accessor,o=r.comparator(this.param("sortby").field),s=this.param("field").accessor,u=this.param("offset"),l=this._output,c=function(e,t,n,r){var i,a,o,s,u,l,c,f=[],h=function(e){return e(o)};if(null==t)f.push(e.slice());else for(i={},a=0;a<e.length;++a)o=e[a],s=t.map(h),(u=i[s]||(f.push(i[s]=[]),i[s])).push(o);for(s=0,c=0;s<f.length;++s){for(u=f[s],a=0,l=0;a<u.length;++a)l+=r(u[a]);u.sum=l,l>c&&(c=l),null!=n&&u.sort(n)}return f.max=c,f}(t,n,o,s),f=0,h=c.max;f<c.length;++f){var d,p,g,m=c[f],v=m.sum,y="center"===u?(h-v)/2:0,_="normalize"===u?1/v:1,x=y,b=0;for(d=0;d<m.length;++d)g=x,x=_*(b+=s(p=m[d]))+y,i.set(p,l.start,g),i.set(p,l.end,x),i.set(p,l.mid,.5*(g+x))}return e.fields[l.start]=1,e.fields[l.end]=1,e.fields[l.mid]=1,e},e.exports=u,u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Stack transform",description:"Computes layout values for stacked graphs, as in stacked bar charts or stream graphs.",type:"object",properties:{type:{enum:["stack"]},groupby:{description:"A list of fields to split the data into groups (stacks).",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},sortby:{description:"A list of fields to determine the sort order of stacks.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},field:{description:"The data field that determines the thickness/height of stacks.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},offset:{description:"The baseline offset",oneOf:[{enum:["zero","center","normalize"]},{$ref:"#/refs/signal"}],default:"zero"},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"layout_start"},end:{type:"string",default:"layout_end"},mid:{type:"string",default:"layout_mid"}},additionalProperties:!1}},additionalProperties:!1,required:["type","groupby","field"]}},wWYS:function(e,t,n){"use strict";t.axis=n("cihr"),t.aggregate=n("h/tW"),t.bin=n("FmT5"),t.channel=n("P/aK"),t.compile=n("z/Ym").compile,t.config=n("Py5Z"),t.data=n("x6Fv"),t.encoding=n("QSMf"),t.facet=n("vA75"),t.fieldDef=n("o+e1"),t.legend=n("ZE31"),t.mark=n("j8cM"),t.scale=n("Fw/k"),t.shorthand=n("/7Ur"),t.sort=n("yLwJ"),t.spec=n("F9eC"),t.stack=n("f2i1"),t.timeUnit=n("z5TJ"),t.transform=n("iIpz"),t.type=n("WJ2w"),t.util=n("ZAUf"),t.validate=n("Utn/"),t.version="__VERSION__"},x6Fv:function(e,t,n){"use strict";var r,i=n("WJ2w");(r=t.DataFormatType||(t.DataFormatType={}))[r.JSON="json"]="JSON",r[r.CSV="csv"]="CSV",r[r.TSV="tsv"]="TSV",r[r.TOPOJSON="topojson"]="TOPOJSON";var a;t.DataFormatType;(a=t.DataTable||(t.DataTable={}))[a.SOURCE="source"]="SOURCE",a[a.SUMMARY="summary"]="SUMMARY",a[a.STACKED_SCALE="stacked_scale"]="STACKED_SCALE",a[a.LAYOUT="layout"]="LAYOUT";var o=t.DataTable;t.SUMMARY=o.SUMMARY,t.SOURCE=o.SOURCE,t.STACKED_SCALE=o.STACKED_SCALE,t.LAYOUT=o.LAYOUT,t.types={boolean:i.Type.NOMINAL,number:i.Type.QUANTITATIVE,integer:i.Type.QUANTITATIVE,date:i.Type.TEMPORAL,string:i.Type.NOMINAL}},"xZ2+":function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("ekYZ"),o=n("B1p+"),s=n("gtuQ"),u=n("3FFs");function l(e,t,n){this._graph=e,this._name=t,this._data=[],this._source=null,this._facet=n,this._input=a.create(),this._output=null,this._indexes={},this._indexFields=[],this._inputNode=null,this._outputNode=null,this._pipeline=null,this._collector=null,this._mutates=!1}var c=l.prototype;c.name=function(e){return arguments.length?(this._name=e,this):this._name},c.source=function(e){return arguments.length?this._source=this._graph.data(e):this._source},c.insert=function(e){return this._input.add=this._input.add.concat(e.map(s.ingest)),this},c.remove=function(e){var t=this._data.filter(e);return this._input.rem=this._input.rem.concat(t),this},c.update=function(e,t,n){var r=this._input.mod,i=s.idMap(r);return this._input.fields[t]=1,this._data.filter(e).forEach(function(e){var a=e[t],o=n(e);a!==o&&(s.set(e,t,o),1!==i[e._id]&&(r.push(e),i[e._id]=1))}),this},c.values=function(e){return arguments.length?(this._input.rem=this._data.slice(),e&&this.insert(e),this):this._collector.data()},c.mutates=function(e){return arguments.length?(this._mutates=this._mutates||e,this):this._mutates},c.last=function(){return this._output},c.fire=function(e){return e&&(this._input=e),this._graph.propagate(this._input,this._pipeline[0]),this},c.pipeline=function(e){if(!arguments.length)return this._pipeline;var t,n,l,c=this._graph;return e.unshift(this._inputNode=((l=new u((n=this)._graph).router(!0).collector(!0)).data=function(){return n._data},l.evaluate=function(e){i.debug(e,["input",n._name]);var t,r=n._input,o=a.create(e);for(t in r.fields)o.fields[t]=1;return r.rem.length&&(n._data=s.idFilter(n._data,r.rem)),r.add.length&&(n._data=n._data.concat(r.add)),r.sort&&n._data.sort(r.sort),e.reflow&&(r.mod=r.mod.concat(s.idFilter(n._data,r.add,r.mod,r.rem))),n._input=a.create(),o.add=r.add,o.mod=r.mod,o.rem=r.rem,o.facet=n._facet,o},l)),(t=c.preprocess(e)).router&&e.push(t.collector=new o(c)),e.push(this._outputNode=function(e){var t=new u(e._graph).router(!0).reflows(!0).collector(!0);return t.data=function(){return e._collector?e._collector.data():e._data},t.evaluate=function(t){i.debug(t,["output",e._name]),function(t){var n,i,a,o,u,l,c=e._indexFields;for(n=0;n<c.length;++n){for(o=c[n],u=e._indexes[o],a=r.$(o),i=0;i<t.add.length;++i)l=a(t.add[i]),s.prev_init(t.add[i]),u[l]=(u[l]||0)+1;for(i=0;i<t.rem.length;++i)l=a(t.rem[i]),u[l]=(u[l]||0)-1;for(i=0;i<t.mod.length;++i)l=a(t.mod[i]._prev),u[l]=(u[l]||0)-1,l=a(t.mod[i]),u[l]=(u[l]||0)+1}}(t);var n=a.create(t,!0);return e._facet&&(e._facet.values=e.values(),t.facet=null),e._output=t,n.data[e._name]=1,n},t}(this)),this._collector=t.collector,this._mutates=!!t.mutates,c.connect(this._pipeline=e),this},c.synchronize=function(){return this._graph.synchronize(this._pipeline),this},c.getIndex=function(e){var t,n,i,a,o=this.values(),u=this._indexes,l=this._indexFields,c=r.$(e);if(!u[e])for(u[e]=t={},l.push(e),n=0,i=o.length;n<i;++n)t[a=c(o[n])]=(t[a]||0)+1,s.prev_init(o[n]);return u[e]},c.listener=function(){return(e=this,t=new u(e._graph).router(!0),t.evaluate=function(t){if(e.mutates()){var n=e._srcMap||(e._srcMap={}),r=a.create(t);return r.add=t.add.map(function(e){return n[e._id]=s.derive(e)}),r.mod=t.mod.map(function(e){return s.rederive(e,n[e._id])}),r.rem=t.rem.map(function(e){var t=n[e._id];return n[e._id]=null,t}),e._input=r}return e._input=t},t).addListener(this._inputNode);var e,t},c.addListener=function(e){return e instanceof l?this._collector.addListener(e.listener()):this._outputNode.addListener(e),this},c.removeListener=function(e){this._outputNode.removeListener(e)},c.listeners=function(e){return(e?this._collector:this._outputNode).listeners()},e.exports=l},yLCL:function(e,t,n){var r=n("Hqva").Tuple,i=n("J731"),a=n("4JPs"),o=n("acp7");function s(e){return o.prototype.init.call(this,e),a.addParameters(this,{field:{type:"field",default:null},normalize:{type:"value",default:!1}}),this._output={rank:"rank"},this.mutates(!0)}var u=s.prototype=Object.create(o.prototype);u.constructor=s,u.batchTransform=function(e,t){i.debug(e,["rank"]);var n,a,o,s,u=this._output.rank,l=this.param("normalize"),c=this.param("field").accessor,f={},h=t.length;if(c)for(n=0,a=0;n<h;++n)f[s=c(o=t[n])]=f[s]||(f[s]=++a);for(n=0;n<h&&(o=t[n]);++n)c&&(s=c(o))?r.set(o,u,l?f[s]/a:f[s]):r.set(o,u,l?(n+1)/h:n+1);return e.fields[u]=1,e},e.exports=s,s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Rank transform",description:"Computes ascending rank scores for data tuples.",type:"object",properties:{type:{enum:["rank"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"A key field to used to rank tuples. If undefined, tuples will be ranked in their observed order."},normalize:{description:"If true, values of the output field will lie in the range [0, 1].",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!1},output:{type:"object",description:"Rename the output data fields",properties:{rank:{type:"string",default:"rank"}},additionalProperties:!1}},additionalProperties:!1,required:["type"]}},yLwJ:function(e,t,n){"use strict";var r;(r=t.SortOrder||(t.SortOrder={}))[r.ASCENDING="ascending"]="ASCENDING",r[r.DESCENDING="descending"]="DESCENDING",r[r.NONE="none"]="NONE";t.SortOrder},yQql:function(e,t,n){var r=n("zF6n"),i=n("GXhC"),a={formats:[],format_map:{},truncate:r.truncate,pad:r.pad,day:i.day,month:i.month,quarter:i.quarter,utcQuarter:i.utcQuarter};function o(e){var t=s(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(a)}function s(e,t,n){t=t||"obj";var i=0,a="'",s=u;return e.replace(s,function(s,u,f){return a+=e.slice(i,f).replace(h,d),i=f+s.length,u&&(a+="'\n+((__t=("+function(e,t,n){var i=e.match(l),a=i.shift().trim(),s=!0;function u(e){return e=e||"",s?(s=!1,h="String("+h+")"+e):h+=e,h}function f(e){var t=_[0];if(!("'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]))throw Error("Format pattern must be quoted: "+t);t=t.slice(1,-1),m=p(t,e),s=!1;var n="number"===e?h:"(typeof "+h+'==="number"?new Date('+h+"):"+h+")";h="this.formats["+m+"]("+n+")"}n&&(n[a]=1);for(var h=o.property(t,a),d=0;d<i.length;++d){var g,m,v,y=i[d],_=null;switch((g=y.indexOf(":"))>0&&(y=y.slice(0,g),_=i[d].slice(g+1).match(c).map(function(e){return e.trim()})),y=y.trim()){case"length":u(".length");break;case"lower":u(".toLowerCase()");break;case"upper":u(".toUpperCase()");break;case"lower-locale":u(".toLocaleLowerCase()");break;case"upper-locale":u(".toLocaleUpperCase()");break;case"trim":u(".trim()");break;case"left":u(".slice(0,"+(m=r.number(_[0]))+")");break;case"right":u(".slice(-"+(m=r.number(_[0]))+")");break;case"mid":m=r.number(_[0]),v=m+r.number(_[1]),u(".slice(+"+m+","+v+")");break;case"slice":u(".slice("+(m=r.number(_[0]))+(_.length>1?","+r.number(_[1]):"")+")");break;case"truncate":m=r.number(_[0]),v="left"!==(v=_[1])&&"middle"!==v&&"center"!==v?"right":v,h="this.truncate("+u()+","+m+",'"+v+"')";break;case"pad":m=r.number(_[0]),v="left"!==(v=_[1])&&"middle"!==v&&"center"!==v?"right":v,h="this.pad("+u()+","+m+",'"+v+"')";break;case"number":f("number");break;case"time":f("time");break;case"time-utc":f("utc");break;case"month":h="this.month("+h+")";break;case"month-abbrev":h="this.month("+h+",true)";break;case"day":h="this.day("+h+")";break;case"day-abbrev":h="this.day("+h+",true)";break;case"quarter":h="this.quarter("+h+")";break;case"quarter-utc":h="this.utcQuarter("+h+")";break;default:throw Error("Unrecognized template filter: "+y)}}return h}(u,t,n)+"))==null?'':__t)+\n'"),s}),a+"'"}o.source=s,o.context=a,o.format=function(e,t){return a.formats[p(e,t)]},e.exports=o,o.clearFormatCache=function(){a.formats=[],a.format_map={}},o.property=function(e,t){return e+"["+r.field(t).map(r.str).join("][")+"]"};var u=/\{\{(.+?)\}\}|$/g,l=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,c=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,f={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},h=/\\|'|\r|\n|\u2028|\u2029/g;function d(e){return"\\"+f[e]}function p(e,t){var n=t+":"+e;if(null==a.format_map[n]){var r=i[t](e),o=a.formats.length;return a.formats.push(r),a.format_map[n]=o,o}return a.format_map[n]}},yaQe:function(e,t,n){var r=n("zicW"),i={"=":l,"==":l,"!=":l,">":l,">=":l,"<":l,"<=":l,and:c,"&&":c,or:c,"||":c,in:function(e,t){var n=[t.item],i="";t.range&&n.push.apply(n,t.range);t.scale&&(i=function(e,t){var n="var scale = ",i=t.length;r.isString(e)?(t.push({value:e}),n+="this.root().scale(o"+i+")"):e.arg?(t.push(e),n+="o"+i):e.name&&(t.push(r.isString(e.name)?{value:e.name}:e.name),n+="(this.isFunction(o"+i+") ? o"+i+" : ",e.scope?(t.push(e.scope),n+="((o"+(i+1)+".scale || this.root().scale)(o"+i+") || this.nullScale)"):n+="this.root().scale(o"+i+")",n+=")");!0===e.invert&&(n+=".invert");return n+";\n"}(t.scale,n));var a=u(e,n);if(i=a.code+i+"\n  var ordSet = null;\n",t.data){var o=r.field(t.field).map(r.str);i+="var where = function(d) { return d["+o.join("][")+"] == o0 };\n",i+="return db["+r.str(t.data)+"].filter(where).length > 0;"}else t.range&&(t.scale&&(i+="if (scale.length == 2) {\n  ordSet = scale(o1, o2);\n} else {\n  o1 = scale(o1);\no2 = scale(o2);\n}"),i+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;");return{code:i,signals:a.signals,data:a.data.concat(t.data?[t.data]:[])}}},a=function(){return 0};function o(e,t){return(t||[]).forEach(function(t){var n=i[t.type](e,t),o=Function("args","db","signals","predicates",n.code);o.root=function(){return e.scene().items[0]},o.nullScale=a,o.isFunction=r.isFunction,o.signals=n.signals,o.data=n.data,e.predicate(t.name,o)}),t}function s(e,t){var n=r.field(e),i="signals["+n.map(r.str).join("][")+"]";return t[n[0]]=1,i}function u(e,t){var n=[],i=[],a={},o={};function u(e){a[e]=1}function l(e){o[e]=1}return r.array(t).forEach(function(t,o){var c="o"+o,f="";if(void 0!==t.value)f=r.str(t.value);else if(t.arg)f="args["+r.str(t.arg)+"]";else if(t.signal)f=s(t.signal,a);else if(t.predicate){var h=t.predicate,d=h&&(h.name||h),p=e.predicate(d),g="predicates["+r.str(d)+"]";p.signals.forEach(u),p.data.forEach(l),r.isObject(h)&&r.keys(h).forEach(function(e){if("name"!==e){var t=h[e];f+="args["+r.str(e)+"] = ",t.signal?f+=s(t.signal,a):t.arg&&(f+="args["+r.str(t.arg)+"]"),f+=", "}}),f+=g+".call("+g+", args, db, signals, predicates)"}n.push(c),i.push(c+"=("+f+")")}),{code:"var "+n.join(", ")+";\n"+i.join(";\n")+";\n",signals:r.keys(a),data:r.keys(o)}}function l(e,t){var n=u(e,t.operands);return"="===t.type&&(t.type="=="),n.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\no1 = o1 instanceof Date ? o1.getTime() : o1;\n",{code:n.code+"return "+["o0","o1"].join(t.type)+";",signals:n.signals,data:n.data}}function c(e,t){for(var n=u(e,t.operands),r=[],i=0,a=t.operands.length;r.push("o"+i++)<a;);return"and"===t.type?t.type="&&":"or"===t.type&&(t.type="||"),{code:n.code+"return "+r.join(t.type)+";",signals:n.signals,data:n.data}}a.invert=a,e.exports=o,o.schema={refs:{operand:{type:"object",oneOf:[{properties:{value:{}},required:["value"]},{properties:{arg:{type:"string"}},required:["arg"]},{$ref:"#/refs/signal"},{properties:{predicate:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"}},required:["name"]}]}},required:["predicate"]}]}},defs:{predicate:{type:"object",oneOf:[{properties:{name:{type:"string"},type:{enum:["==","!=",">","<",">=","<="]},operands:{type:"array",items:{$ref:"#/refs/operand"},minItems:2,maxItems:2}},required:["name","type","operands"]},{properties:{name:{type:"string"},type:{enum:["and","&&","or","||"]},operands:{type:"array",items:{$ref:"#/refs/operand"},minItems:2}},required:["name","type","operands"]},{properties:{name:{type:"string"},type:{enum:["in"]},item:{$ref:"#/refs/operand"}},oneOf:[{properties:{range:{type:"array",items:{$ref:"#/refs/operand"},minItems:2},scale:{$ref:"#/refs/scopedScale"}},required:["range"]},{properties:{data:{type:"string"},field:{type:"string"}},required:["data","field"]}],required:["name","type","item"]}]}}}},ybCx:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("YvtE"),o=n("PwiD"),s=n("+5nH");function u(e){var t,u=arguments.length,l=2,c=arguments[u-1],f=new o,h=s.factory;if(u>l&&r.isFunction(arguments[u-l])&&(h=arguments[u-l],++l),u>l&&r.isObject(arguments[u-l])&&f.config(arguments[u-l]),t=f.config(),r.isObject(e))p(e);else if(r.isString(e)){var d=r.extend({url:e},t.load);r.json(d,function(e,t){e?g("SPECIFICATION LOAD FAILED: "+e):p(t)})}else g("INVALID SPECIFICATION: Must be a valid JSON object or URL.");function p(e){try{e=r.duplicate(e);var i=n("UaGl"),o=a(e,t,"width",500),s=a(e,t,"height",500),u=i.padding(a(e,t,"padding")),l=a(e,t,"background");f.signal("width",o),f.signal("height",s),f.signal("padding",u),function(e){var t,n=e.signals||(e.signals=[]);n.some(function(e){return"cursor"===e.name&&(t=e,!0)}),t||n.push(t={name:"cursor",streams:[]});t.init=t.init||{},t.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}(e),f.defs({width:o,height:s,padding:u,viewport:e.viewport||null,background:i.background(l),signals:i.signals(f,e.signals),predicates:i.predicates(f,e.predicates),marks:i.marks(f,e,o,s),data:i.data(f,e.data,g)})}catch(e){g(e)}}function g(e){var t;e?i.error(e):t=h(f.buildIndexes()),c&&(c.length>1?c(e,t):e||c(t),c=null)}}e.exports=u,u.schema={defs:{spec:{title:"Vega visualization specification",type:"object",allOf:[{$ref:"#/defs/container"},{properties:{width:{type:"number"},height:{type:"number"},viewport:{type:"array",items:{type:"number"},maxItems:2},background:{$ref:"#/defs/background"},padding:{$ref:"#/defs/padding"},signals:{type:"array",items:{$ref:"#/defs/signal"}},predicates:{type:"array",items:{$ref:"#/defs/predicate"}},data:{type:"array",items:{$ref:"#/defs/data"}}}}]}}}},yixx:function(e,t,n){"use strict";var r=n("Fw/k"),i=n("ZAUf");!function(e){e.parseUnit=function(e){return e.channels().reduce(function(t,n){var i=e.scale(n);return e.field(n)&&i?(t[e.field(n)]=i.type===r.ScaleType.LOG,t):t},{})},e.parseFacet=function(e){var t=e.child().component.data;if(!t.source){var n=t.nonPositiveFilter;return delete t.nonPositiveFilter,n}return{}},e.parseLayer=function(e){var t={};return e.children().forEach(function(n){var r=n.component.data;e.compatibleSource(n)&&!i.differ(r.nonPositiveFilter,t)&&(i.extend(t,r.nonPositiveFilter),delete r.nonPositiveFilter)}),t},e.assemble=function(e){return i.keys(e.nonPositiveFilter).filter(function(t){return e.nonPositiveFilter[t]}).map(function(e){return{type:"filter",test:"datum."+e+" > 0"}})}}(t.nonPositiveFilter||(t.nonPositiveFilter={}))},yszh:function(e,t,n){var r=n("sV93"),i=n("VeBo");function a(){i.call(this)}var o=i.prototype,s=a.prototype=Object.create(o);s.constructor=a,s.initialize=function(e,t,n){return this._svg=r.find(e,"svg"),o.initialize.call(this,e,t,n)},s.svg=function(){return this._svg},s.listener=function(e){var t=this;return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}},s.on=function(e,t){var n=this.eventName(e),r=this._svg,i=this._handlers,a={type:e,handler:t,listener:this.listener(t)};return(i[n]||(i[n]=[])).push(a),r.addEventListener(n,a.listener),this},s.off=function(e,t){var n,r=this.eventName(e),i=this._svg,a=this._handlers[r];if(a){for(n=a.length;--n>=0;)(a[n].type===e&&!t||a[n].handler===t)&&(i.removeEventListener(r,a[n].listener),a.splice(n,1));return this}},e.exports=a},"z/Ym":function(e,t,n){"use strict";var r=n("x6Fv"),i=n("F9eC"),a=n("ZAUf"),o=n("MtYt");function s(e){var t=a.extend({name:e.name("root"),type:"group"},e.description()?{description:e.description()}:{},{from:{data:r.LAYOUT},properties:{update:a.extend({width:{field:"width"},height:{field:"height"}},e.assembleParentGroupProperties(e.config().cell))}});return a.extend(t,e.assembleGroup())}t.compile=function(e){var t,n,r=i.normalize(e),u=o.buildModel(r,null,"");return u.parse(),n=(t=u).config(),{spec:a.extend({width:1,height:1,padding:"auto"},n.viewport?{viewport:n.viewport}:{},n.background?{background:n.background}:{},{data:[].concat(t.assembleData([]),t.assembleLayout([])),marks:[s(t)]})}},t.assembleRootGroup=s},z5TJ:function(e,t,n){"use strict";var r;(r=t.TimeUnit||(t.TimeUnit={}))[r.YEAR="year"]="YEAR",r[r.MONTH="month"]="MONTH",r[r.DAY="day"]="DAY",r[r.DATE="date"]="DATE",r[r.HOURS="hours"]="HOURS",r[r.MINUTES="minutes"]="MINUTES",r[r.SECONDS="seconds"]="SECONDS",r[r.MILLISECONDS="milliseconds"]="MILLISECONDS",r[r.YEARMONTH="yearmonth"]="YEARMONTH",r[r.YEARMONTHDAY="yearmonthday"]="YEARMONTHDAY",r[r.YEARMONTHDATE="yearmonthdate"]="YEARMONTHDATE",r[r.YEARDAY="yearday"]="YEARDAY",r[r.YEARDATE="yeardate"]="YEARDATE",r[r.YEARMONTHDAYHOURS="yearmonthdayhours"]="YEARMONTHDAYHOURS",r[r.YEARMONTHDAYHOURSMINUTES="yearmonthdayhoursminutes"]="YEARMONTHDAYHOURSMINUTES",r[r.YEARMONTHDAYHOURSMINUTESSECONDS="yearmonthdayhoursminutesseconds"]="YEARMONTHDAYHOURSMINUTESSECONDS",r[r.HOURSMINUTES="hoursminutes"]="HOURSMINUTES",r[r.HOURSMINUTESSECONDS="hoursminutesseconds"]="HOURSMINUTESSECONDS",r[r.MINUTESSECONDS="minutesseconds"]="MINUTESSECONDS",r[r.SECONDSMILLISECONDS="secondsmilliseconds"]="SECONDSMILLISECONDS",r[r.QUARTER="quarter"]="QUARTER",r[r.YEARQUARTER="yearquarter"]="YEARQUARTER",r[r.QUARTERMONTH="quartermonth"]="QUARTERMONTH",r[r.YEARQUARTERMONTH="yearquartermonth"]="YEARQUARTERMONTH";var i=t.TimeUnit;function a(e,t){var n=e.toString(),r=t.toString();return n.indexOf(r)>-1}t.TIMEUNITS=[i.YEAR,i.MONTH,i.DAY,i.DATE,i.HOURS,i.MINUTES,i.SECONDS,i.MILLISECONDS,i.YEARMONTH,i.YEARMONTHDAY,i.YEARMONTHDATE,i.YEARDAY,i.YEARDATE,i.YEARMONTHDAYHOURS,i.YEARMONTHDAYHOURSMINUTES,i.YEARMONTHDAYHOURSMINUTESSECONDS,i.HOURSMINUTES,i.HOURSMINUTESSECONDS,i.MINUTESSECONDS,i.SECONDSMILLISECONDS,i.QUARTER,i.YEARQUARTER,i.QUARTERMONTH,i.YEARQUARTERMONTH],t.template=function(e,t,n){if(e){var r=[];a(e,i.YEAR)&&r.push(n?"%y":"%Y"),a(e,i.QUARTER)&&r.push("'}}Q{{"+t+" | quarter}}{{"+t+" | time:'"),a(e,i.MONTH)&&r.push(n?"%b":"%B"),a(e,i.DAY)?r.push(n?"%a":"%A"):a(e,i.DATE)&&r.push("%d");var o=[];a(e,i.HOURS)&&o.push("%H"),a(e,i.MINUTES)&&o.push("%M"),a(e,i.SECONDS)&&o.push("%S"),a(e,i.MILLISECONDS)&&o.push("%L");var s=[];return r.length>0&&s.push(r.join("-")),o.length>0&&s.push(o.join(":")),s.length>0?("{{"+t+" | time:'"+s.join(" ")+"'}}").replace(new RegExp("{{"+t+" \\| time:''}}","g"),""):void 0}},t.containsTimeUnit=a},zF6n:function(e,t,n){(function(t){var n=e.exports;n.namedfunc=function(e,t){return t.__name__=e,t},n.name=function(e){return null==e?null:e.__name__},n.identity=function(e){return e},n.true=n.namedfunc("true",function(){return!0}),n.false=n.namedfunc("false",function(){return!1}),n.duplicate=function(e){return JSON.parse(JSON.stringify(e))},n.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},n.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},n.length=function(e){return null!=e&&null!=e.length?e.length:null},n.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},n.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},n.toMap=function(e,t){return(t=n.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},n.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;r<t;++r)n+="|"+String(e[r]);return n};var r=Object.prototype.toString;n.isObject=function(e){return e===Object(e)},n.isFunction=function(e){return"[object Function]"===r.call(e)},n.isString=function(e){return"string"==typeof value||"[object String]"===r.call(e)},n.isArray=Array.isArray||function(e){return"[object Array]"===r.call(e)},n.isNumber=function(e){return"number"==typeof e||"[object Number]"===r.call(e)},n.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==r.call(e)},n.isDate=function(e){return"[object Date]"===r.call(e)},n.isValid=function(e){return null!=e&&e==e},n.isBuffer="function"==typeof t&&t.isBuffer||n.false,n.number=function(e){return null==e||""===e?null:+e},n.boolean=function(e){return null==e||""===e?null:"false"!==e&&!!e},n.date=function(e,t){var n=t||Date;return null==e||""===e?null:n.parse(e)},n.array=function(e){return null!=e?n.isArray(e)?e:[e]:[]},n.str=function(e){return n.isArray(e)?"["+e.map(n.str)+"]":n.isObject(e)||n.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var i=/\[(.*?)\]|[^.\[]+/g;function a(e,t){var n,r="";for(n=0;n<e;++n)r+=t;return r}function o(e,t,n){var r=0,i=e.split(s);return(e=n?(i=i.reverse()).filter(function(e){return(r+=e.length)<=t}).reverse():i.filter(function(e){return(r+=e.length)<=t})).length?e.join("").trim():i[0].slice(0,t)}n.field=function(e){return String(e).match(i).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},n.accessor=function(e){return null==e||n.isFunction(e)?e:n.namedfunc(e,Function("x","return x["+n.field(e).map(n.str).join("][")+"];"))},n.$=n.accessor,n.mutator=function(e){var t;return n.isString(e)&&(t=n.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},n.$func=function(e,t){return function(r){r=n.$(r)||n.identity;var i=e+(n.name(r)?"_"+n.name(r):"");return n.namedfunc(i,function(e){return t(r(e))})}},n.$valid=n.$func("valid",n.isValid),n.$length=n.$func("length",n.length),n.$in=function(e,t){e=n.$(e);var r=n.isArray(t)?n.toMap(t):t;return function(t){return!!r[e(t)]}},n.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=n.array(e).map(function(e){var r=1;return"-"===e[0]?(r=-1,e=e.slice(1)):"+"===e[0]&&(r=1,e=e.slice(1)),t.push(r),n.accessor(e)}),function(r,i){var a,o,s,u;for(a=0,o=e.length;a<o;++a)if(s=e[a],u=n.cmp(s(r),s(i)))return u*t[a];return 0}},n.cmp=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0)},n.numcmp=function(e,t){return e-t},n.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return a<o?-1:a>o?1:r[n(e)]-r[n(i)]}),e},n.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},n.pad=function(e,t,n,r){r=r||" ";var i=t-e.length;if(i<=0)return e;switch(n){case"left":return a(i,r)+e;case"middle":case"center":return a(Math.floor(i/2),r)+e+a(Math.ceil(i/2),r);default:return e+a(i,r)}},n.truncate=function(e,t,n,r,i){var a=e.length;if(a<=t)return e;i=void 0!==i?String(i):"…";var s=Math.max(0,t-i.length);switch(n){case"left":return i+(r?o(e,s,1):e.slice(a-s));case"middle":case"center":var u=Math.ceil(s/2),l=Math.floor(s/2);return(r?o(e,u):e.slice(0,u))+i+(r?o(e,l,1):e.slice(a-l));default:return(r?o(e,s):e.slice(0,s))+i}};var s=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(t,n("EuP9").Buffer)},"zLl/":function(e,t,n){var r=n("5AQc");function i(e){this._pending=0,this._config=e||i.Config}i.Config=null;var a=i.prototype;a.pending=function(){return this._pending},a.params=function(e){var t,n={url:e};for(t in this._config)n[t]=this._config[t];return n},a.imageURL=function(e){return r.sanitizeUrl(this.params(e))},a.loadImage=function(e,t){return r.useXHR?function(e,t){var n=r.sanitizeUrl(this.params(e));if(!n)return t&&t(e,null),null;var i=this,a=new Image;return i._pending+=1,a.onload=function(){i._pending-=1,a.loaded=!0,t&&t(null,a)},a.src=n,a}.call(this,e,t):function(e,t){var i=this,a=new(n(7).Image);return i._pending+=1,r(this.params(e),function(e,n){if(i._pending-=1,e)return t&&t(e,null),null;a.src=n,a.loaded=!0,t&&t(null,a)}),a}.call(this,e,t)},e.exports=i},zPnY:function(e,t,n){var r=n("gWW/"),i=n("eJnU"),a=n("bSC/"),o=Math.sqrt(3),s=Math.tan(30*Math.PI/180);function u(e,t){var n,r,u,l,c=null!=t.size?t.size:100,f=t.x,h=t.y;if(e.beginPath(),null==t.shape||"circle"===t.shape)return n=Math.sqrt(c/Math.PI),e.arc(f,h,n,0,2*Math.PI,0),void e.closePath();switch(t.shape){case"cross":r=3*(n=Math.sqrt(c/5)/2),e.moveTo(f-r,h-n),e.lineTo(f-n,h-n),e.lineTo(f-n,h-r),e.lineTo(f+n,h-r),e.lineTo(f+n,h-n),e.lineTo(f+r,h-n),e.lineTo(f+r,h+n),e.lineTo(f+n,h+n),e.lineTo(f+n,h+r),e.lineTo(f-n,h+r),e.lineTo(f-n,h+n),e.lineTo(f-r,h+n);break;case"diamond":u=(l=Math.sqrt(c/(2*s)))*s,e.moveTo(f,h-l),e.lineTo(f+u,h),e.lineTo(f,h+l),e.lineTo(f-u,h);break;case"square":n=(r=Math.sqrt(c))/2,e.rect(f-n,h-n,r,r);break;case"triangle-down":l=(u=Math.sqrt(c/o))*o/2,e.moveTo(f,h+l),e.lineTo(f+u,h-l),e.lineTo(f-u,h-l);break;case"triangle-up":l=(u=Math.sqrt(c/o))*o/2,e.moveTo(f,h-l),e.lineTo(f+u,h+l),e.lineTo(f-u,h+l);break;default:var d=function(e,t){var n,r,i,a,o,s=Math.sqrt(t);for(n=0,r=e.length;n<r;++n)for(o=e[n],i=1,a=o.length;i<a;++i)o[i]*=s;return e}(i(t.shape),c);a(e,d,f,h)}e.closePath()}e.exports={draw:r.drawAll(u),pick:r.pickPath(u)}},zYzi:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n("h/tW"),a=n("P/aK"),o=n("Py5Z"),s=n("x6Fv"),u=n("QSMf"),l=n("o+e1"),c=n("j8cM"),f=n("Fw/k"),h=n("WJ2w"),d=n("ZAUf"),p=n("HeGT"),g=n("MtYt"),m=n("pyUU"),v=n("V22v"),y=n("jxr4"),_=n("YBv9"),x=n("jGoH"),b=n("0ZZw"),M=n("TLMq"),k=n("f2i1"),S=function(e){function t(t,n,r){e.call(this,t,n,r);var i=this._mark=t.mark,a=this._encoding=this._initEncoding(i,t.encoding||{}),o=this._config=this._initConfig(t.config,n,i,a);this._scale=this._initScale(i,a,o),this._axis=this._initAxis(a,o),this._legend=this._initLegend(a,o),this._stack=k.stack(i,a,o)}return r(t,e),t.prototype._initEncoding=function(e,t){return t=d.duplicate(t),u.forEach(t,function(t,n){if(!a.supportMark(n,e))return console.warn(n,"dropped as it is incompatible with",e),void delete t.field;t.type&&(t.type=h.getFullName(t.type)),n!==a.PATH&&n!==a.ORDER||t.aggregate||t.type!==h.QUANTITATIVE||(t.aggregate=i.AggregateOp.MIN)}),t},t.prototype._initConfig=function(e,t,n,r){var i=d.mergeDeep(d.duplicate(o.defaultConfig),t?t.config():{},e);return i.mark=m.initMarkConfig(n,r,i),i},t.prototype._initScale=function(e,t,n){return a.UNIT_SCALE_CHANNELS.reduce(function(r,i){if(u.has(t,i)||i===a.X&&u.has(t,a.X2)||i===a.Y&&u.has(t,a.Y2)){var o=t[i],s=(o||{}).scale||{},l=M.scaleType(s,o,i,e);r[i]=d.extend({type:l,round:n.scale.round,padding:n.scale.padding,useRawDomain:n.scale.useRawDomain,bandSize:i===a.X&&l===f.ScaleType.ORDINAL&&e===c.TEXT?n.scale.textBandWidth:n.scale.bandSize},s)}return r},{})},t.prototype._initAxis=function(e,t){return[a.X,a.Y].reduce(function(n,r){if(u.has(e,r)||r===a.X&&u.has(e,a.X2)||r===a.Y&&u.has(e,a.Y2)){var i=(e[r]||{}).axis;!1!==i&&(n[r]=d.extend({},t.axis,!0===i?{}:i||{}))}return n},{})},t.prototype._initLegend=function(e,t){return a.NONSPATIAL_SCALE_CHANNELS.reduce(function(n,r){if(u.has(e,r)){var i=e[r].legend;!1!==i&&(n[r]=d.extend({},t.legend,!0===i?{}:i||{}))}return n},{})},t.prototype.parseData=function(){this.component.data=v.parseUnitData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this.component.layout=_.parseUnitLayout(this)},t.prototype.parseScale=function(){this.component.scale=M.parseScaleComponent(this)},t.prototype.parseMark=function(){this.component.mark=b.parseMark(this)},t.prototype.parseAxis=function(){this.component.axis=p.parseAxisComponent(this,[a.X,a.Y])},t.prototype.parseAxisGroup=function(){return null},t.prototype.parseGridGroup=function(){return null},t.prototype.parseLegend=function(){this.component.legend=y.parseLegendComponent(this)},t.prototype.assembleData=function(e){return v.assembleData(this,e)},t.prototype.assembleLayout=function(e){return _.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return this.component.mark},t.prototype.assembleParentGroupProperties=function(e){return g.applyConfig({},e,g.FILL_STROKE_CONFIG.concat(["clip"]))},t.prototype.channels=function(){return a.UNIT_CHANNELS},t.prototype.mapping=function(){return this.encoding()},t.prototype.stack=function(){return this._stack},t.prototype.toSpec=function(e,t){var n,r=d.duplicate(this._encoding);return n={mark:this._mark,encoding:r},e||(n.config=d.duplicate(this._config)),t||(n.data=d.duplicate(this._data)),n},t.prototype.mark=function(){return this._mark},t.prototype.has=function(e){return u.has(this._encoding,e)},t.prototype.encoding=function(){return this._encoding},t.prototype.fieldDef=function(e){return this._encoding[e]||{}},t.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n.bin&&(t=d.extend({binSuffix:this.scale(e).type===f.ScaleType.ORDINAL?"_range":"_start"},t)),l.field(n,t)},t.prototype.dataTable=function(){return this.dataName(u.isAggregate(this._encoding)?s.SUMMARY:s.SOURCE)},t.prototype.isUnit=function(){return!0},t}(x.Model);t.UnitModel=S},zhsD:function(e,t,n){var r=n("zicW"),i=n("Za4h").svg,a=n("eJnU");function o(e){return e.x||0}function s(e){return e.y||0}var u=i.area().x(o).y1(s).y0(function(e){return(e.y||0)+(e.height||0)}),l=i.area().y(s).x1(o).x0(function(e){return(e.x||0)+(e.width||0)}),c=i.line().x(o).y(s);e.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:i.arc(),symbol:i.symbol().type(function(e){return e.shape||"circle"}).size(function(e){return null==e.size?100:e.size}),area:function(e){var t=e[0];return("horizontal"===t.orient?l:u).interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},line:function(e){var t=e[0];return c.interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},resize:function(e,t){var n,r,i,o,s,u,l,c=a(e),f="";for(t=Math.sqrt(t),o=0,s=c.length;o<s;++o)for(u=0,l=(n=c[o]).length;u<l&&"Z"!==n[u];++u)(r=+n[u])===r&&(i=e.indexOf(r),f+=e.substring(0,i)+r*t,e=e.substring(i+(r+"").length));return f+"Z"}},symbolTypes:r.toMap(i.symbolTypes),textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}},zicW:function(e,t,n){var r=n("zF6n"),i={version:n("NdEd").version,load:n("5AQc"),read:n("YGNx"),type:n("ggRp"),Aggregator:n("tGq9"),groupby:n("lkhv"),bins:n("prMK"),$bin:n("qmQ9").$bin,histogram:n("qmQ9").histogram,format:n("GXhC"),template:n("yQql"),time:n("mgrV")};r.extend(i,r),r.extend(i,n("3bKu")),r.extend(i,n("YsQl")),r.extend(i,n("uHQN")),r.extend(i,n("gjoU")),r.extend(i.format,n("nXcD")),i.print={table:i.format.table,summary:i.format.summary},e.exports=i}});
//# sourceMappingURL=0.f30e390d494625aeb321.js.map